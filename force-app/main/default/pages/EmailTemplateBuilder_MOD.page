<apex:page sidebar="false" controller="PDFTemplateBuilder_MOD_Controller"  doctype="HTML-5.0" showHeader="false" standardStylesheets="true" id="pageId" >
    <apex:slds />
    <apex:form id="formId" > 
        <html> 
            <head> 
                <title>Template Builder</title>
                <meta charset="utf-8"/>
                <meta name="viewport" content="width=device-width, initial-scale=1"/>
                <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
                <meta name="viewport" content="width=device-width, initial-scale=1"/>  
                
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
                <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400;600;700;900&display=swap" rel="stylesheet" />       
                
                <apex:includeScript value="{!$Resource.Template_Script_clone}"/> 
                <apex:stylesheet value="{!$Resource.Print}" />  
                <apex:stylesheet value="{!$Resource.Style_clone}" />
                
                <!--[if lt IE 9]>
<script src="js/respond.min.js"></script>
<script type="text/javascript">
    var __sfdcSessionId = '{!GETSESSIONID()}';
</script>
<script src="soap/ajax/34.0/connection.js" type="text/javascript"></script>
<script src="soap/ajax/34.0/apex.js" type="text/javascript"></script>


<![endif]-->
                <style>
                    
                    /* width */
                    ::-webkit-scrollbar {
                    width: 5px;
                    }
                    
                    /* Track */
                    ::-webkit-scrollbar-track {
                    background: #f1f1f1; 
                    }
                    
                    /* Handle */
                    ::-webkit-scrollbar-thumb {
                    background: rgba(1, 118, 211, 1); 
                    }
                    
                    /* Handle on hover */
                    ::-webkit-scrollbar-thumb:hover {
                    background: #555; 
                    }
                    
                    .style-box{
                    background: white !important;
                    padding:2px !important;
                    top: 44px !important;
                    
                    }
                    
                    /*.property_blocks{
                    border: 1px solid lightgray !important;margin-top: 10px !important;margin-left: 5px !important
                    }*/
                    
                    .style-header-box{
                    background :white !important
                    margin-top: 2px !important
                    }
                    
                    .mCSB_container{
                    background :white !important
                    }
                    
                    .mCustomScrollBox{
                    background :white !important
                    }
                    
                    .mCustomScrollbar{
                    background :white !important
                    }
                    
                    #property_blocks label{
                    font-size : 0.8em;
                    }
                    .slds-select{
                    font-size : 0.9em !important;
                    }
                </style>
                <style>
                    .vfHelpText a            {position:relative;}
                    .vfHelpText a span       {display: none;}
                    .vfHelpText a:hover span {    text-align: left;
                    display: block;
                    position: absolute;
                    top: -1.95em;
                    padding: 5px 5px;
                    left: 0.1em;
                    width: 17em;
                    background-color: #1d1d1b;
                    color: white;
                    border-radius: 5px;
                    }
                </style>
                <script>    
                var calIds = '';  
                function hideAllItems(){
                    //Toggle
                    $(".parenttoggle").hide();
                    $(".childtoggle").hide();
                    $(".Logotoggle").hide();
                    $(".TextArea").hide();
                }
                function sortRecords(filterType,childImp) {
                    // Declare variables
                    debugger;
                    var input, filter, ul, li, a, i;
                    //alert(filterType);
                    //alert(childImp);
                    input = document.getElementById(childImp);
                    //alert(input);
                    filter = input.value.toUpperCase();
                    //alert(filter);
                    ul = document.getElementById(filterType);
                    //alert(ul);
                    li = ul.getElementsByTagName('li'); 
                    //alert(li);
                    // Loop through all list items, and hide those who dont match the search query
                    for (let i = 0; i < li.length; i++) {
                        a = li[i].getElementsByTagName("a")[0];
                        if (a.innerText.toUpperCase().indexOf(filter) > -1) {
                            li[i].style.display = "";
                        } else {
                            li[i].style.display = "none";
                        }
                    }
                }
                function sortchildRecords(filterType,childImp){
                    // Declare variables
                    var input, filter, ul, li,a, div, i;
                    input = document.getElementById(childImp);
                    filter = input.value.toUpperCase();
                    ul = document.getElementById(filterType);
                    li = ul.getElementsByTagName('li');
                    // Loop through all list items, and hide those who dont match the search query
                    for (let i = 0; i < li.length; i++) {
                        a = li[i].getElementsByTagName("div")[0];
                        if (a.innerText.toUpperCase().indexOf(filter) > -1) {
                            li[i].style.display = "";
                        } else {
                            li[i].style.display = "none";
                        }
                    }
                }
                function sortchildFields(filterType,childImp){
                    // Declare variables
                    var input, filter, ul, li,a, div, i;
                    input = document.getElementById(childImp);
                    filter = input.value.toUpperCase();
                    ul = document.getElementById(filterType);
                    li = ul.getElementsByTagName('div');
                    // Loop through all list items, and hide those who dont match the search query
                    for (i = 0; i < li.length; i++) {
                        a = li[i].innerHTML;
                        if (a.toUpperCase().indexOf(filter) > -1) {
                            li[i].style.display = "";
                        } else {
                            li[i].style.display = "none";
                        }
                    }
                }
                
                
                function cancelEmailcontainer(){
                    document.getElementById('EmailErrorId').style.display = "none";
                    document.getElementById('EmailsubjectErrorId').style.display = "none";
                    $('#SaveContainerEmailBox').hide(); 
                }
                function cancelcontainer(){
                    document.getElementById('ErrorId').style.display = "none";
                    $('#SaveContainerBox').hide(); 
                }
                function afterSavecontainer(assignname){  
                    if(assignname == 'saveas'){
                        $('#SaveContainerBox').show(); 
                    }
                    else{
                        Savecontainer(assignname);
                    }
                }
                function validate(){
                    var htmls = document.getElementById("content_area").innerHTML;
                    Validates(htmls); 
                    
                }
                function Addpage(){
                    Addpages();
                }
                
                function Removepage(counts){
                    Removepages(counts);
                }
                function afterSaveEmailcontainer(assignname){  
                    //saveandclose
                    if(assignname == 'saveas' || assignname == 'save' || assignname == 'saveandclose'){
                        if(assignname == 'save'){
                            document.getElementById("EmailTemplatediv").style.display = 'none'; 
                            document.getElementById("savetemplateId").style.display = 'inline';
                            document.getElementById("saveastemplateId").style.display = 'none';
                            document.getElementById("saveasclosetemplateId").style.display = 'none';
                            
                        }
                        else if(assignname == 'saveas'){
                            document.getElementById("EmailTemplatediv").style.display = 'block'; 
                            document.getElementById("savetemplateId").style.display = 'none';
                            document.getElementById("saveastemplateId").style.display = 'inline';
                            document.getElementById("saveasclosetemplateId").style.display = 'none';
                        }
                            else if(assignname == 'saveandclose'){
                                document.getElementById("EmailTemplatediv").style.display = 'none'; 
                                document.getElementById("savetemplateId").style.display = 'none';
                                document.getElementById("saveastemplateId").style.display = 'none';
                                document.getElementById("saveasclosetemplateId").style.display = 'inline';
                            }
                        $('#SaveContainerEmailBox').show(); 
                    }
                    else{
                        SaveEmailcontainer(assignname);
                    }
                }
                function afterSavecontainers(){
                    document.getElementById('spinner').className = 'slds-spinner_container slds-hide';
                    $('#SaveContainerBox').hide();
                    $('#SaveContainerEmailBox').hide();
                    $('#SucessMessageId').show();
                    document.getElementById('SuccessMsg').style.display = "block";
                    // var pageSize = '{!pagesizes}';
                    
                    //  document.getElementById("ddlPageSize").value = pageSize;
                    // calIds = '';
                }   
                function afterSaveEmailcontainers(){
                    $('#SaveContainerBox').hide();
                    $('#SucessMessageId').show();
                    document.getElementById('SuccessMsg').style.display = "block";
                }   
                function toggleLayout_show(cls){
                    
                    
                    var displays = $(cls).toggle().is(":visible");  
                    $('.parenttoggle').toggle().hide();
                    $('.childtoggle').toggle().hide();
                    $('.groupchildtoggle').toggle().hide();
                    $('.querychildtoggle').toggle().hide(); 
                    $('.Logotoggle').toggle().hide(); 
                    $('.Globaltoggle').toggle().hide();
                    $('.caltoggle').toggle().hide();
                    $('.Paratoggle').toggle().hide();
                    $('.Tabletoggle').toggle().hide();	
                    $(cls).toggle().show();
                    
                    /*if(displays === false && cls !== cls){  
                        $(cls).toggle().hide();
                        $(cls).toggle('slow');
                    }
                    else{
                        $(cls).toggle().show();
                        $(cls).toggle('slow');
                    }*/
                         //toggleLayout(obj,'.parenttoggle');
                     }
                /* function toggleLayout_hide(cls){
                    $(cls).toggle().hide();
                    //toggleLayout(obj,'.parenttoggle');
                    }*/
                function toggleLayout(obj,cls){
                    //alert('inn')
                    
                    var displays = $(cls).toggle().is(":visible");                    
                    $('.parenttoggle').toggle().hide();
                    $('.childtoggle').toggle().hide();
                    $('.groupchildtoggle').toggle().hide();
                    $('.querychildtoggle').toggle().hide(); 
                    $('.Logotoggle').toggle().hide(); 
                    $('.Globaltoggle').toggle().hide();
                    $('.caltoggle').toggle().hide();
                    $('.Paratoggle').toggle().hide();
                    $('.Tabletoggle').toggle().hide();	
                    
                    
                    if($(obj).find('.fa-minus-circle').hasClass('fa-minus-circle')){  
                        $(obj).find('.fa-minus-circle').addClass('fa-plus-circle');
                        $(obj).find('.fa-minus-circle').removeClass('fa-minus-circle');
                    }else{
                        $(obj).find('.fa-plus-circle').addClass('fa-minus-circle');
                        $(obj).find('.fa-plus-circle').removeClass('fa-plus-circle');
                    }  
                    
                    if(displays === true){  
                        $(cls).toggle().hide();
                        $(cls).toggle('slow');
                    }
                    else{
                        $(cls).toggle().show();
                        $(cls).toggle('slow');
                    }
                    
                    // 
                    
                    //$('.parenttoggle').toggle('slow');
                }
                boxDragdrop();
                function GetAddChildParent(){
                    $('#AddChildMessageId').show();
                }
                function groupGetAddChildParent(){	
                    $('#groupAddChildMessageId').show();	
                }
                var itemlist;
                var len = 0;
                var selected=0;   
                function Addtocontainer(){
                    var itemid = document.getElementById('addpageId').value;
                    var itemLabel = document.getElementById('addpageLabel').value;
                    var newitems = '';
                    var lens =$(itemlist).children().length; 
                    if(itemid != '' && itemid != undefined && itemLabel != '' && itemLabel != undefined){
                        if(itemid.includes('.')){
                            newitems = itemid.split('.').join('');
                            //newitems = itemid.replace('.','');
                        }
                        
                        var items = '<div itemid="'+itemid+'" id="'+newitems+'" class="selitems box-item" style="display: inline-flex;width:100%;padding: 3px;padding-left:5px;padding-right:5px;cursor:pointer;font-size:74%;"  onclick="SelectChild(this)"><div style="width:80%" id="'+lens+'">'+itemLabel+'</div><div style="width:20%;text-align: right;" onclick="movetoleft(\''+itemid+'\',\''+itemLabel+'\')"><i class="fa fa-times"></i></div></div>';
                        $("#container2").append(items);
                        $('#AddChildMessageId').hide();
                        document.getElementById('addpageId').value = '';
                        document.getElementById('addpageLabel').value = '';
                        itemlist = $('#container2');
                        len=$(itemlist).children().length; 
                    }
                }
                function groupAddtocontainer(){	
                    var itemid = document.getElementById('groupaddpageId').value;	
                    var itemLabel = document.getElementById('groupaddpageLabel').value;	
                    
                    var newitems = '';	
                    var lens =$(itemlist).children().length; 	
                    if(itemid != '' && itemid != undefined && itemLabel != '' && itemLabel != undefined){	
                        if(itemid.includes('.')){	
                            newitems = itemid.split('.').join('');	
                            //newitems = itemid.replace('.','');	
                        }	
                        var items = '<div itemid="'+itemid+'" id="'+newitems+'" class="selitems box-item" style="display: inline-flex;width:100%;padding: 3px;padding-left:5px;padding-right:5px;cursor:pointer;font-size:74%;"  onclick="groupSelectChild(this)"><div style="width:80%" id="'+lens+'">'+itemLabel+'</div><div style="width:20%;text-align: right;" onclick="groupmovetoleft(\''+itemid+'\',\''+itemLabel+'\')"><i class="fa fa-times"></i></div></div>';
                        $("#groupcontainer2").append(items);	
                        $('#groupAddChildMessageId').hide();	
                        document.getElementById('addpageId').value = '';	
                        document.getElementById('addpageLabel').value = '';	
                        itemlist = $('#groupcontainer2');	
                        len=$(itemlist).children().length; 	
                    }	
                }
                function movetoright(eve,Itemlabel){
                    
                    var itemid = eve;
                    var newitems = itemid;
                    if(itemid.includes('.')){
                        newitems = itemid.split('.').join('');
                        //  newitems = itemid.replace('.','');
                    }
                    var lens =$(itemlist).children().length; 
                    var items = '<div itemid="'+itemid+'" id="'+newitems+'" class="selitems box-item" style="display: inline-flex;width:100%;padding: 3px;padding-left:5px;padding-right:5px;cursor:pointer;font-size:74%;" onclick="SelectChild(this)"><div style="width:80%;" id="'+lens+'" >'+Itemlabel+'</div><div style="width:20%;text-align: right;" onclick="movetoleft(\''+itemid+'\',\''+Itemlabel+'\')"><i class="fa fa-times"></i></div></div>';
                    $("#container2").append(items);
                    $("#container1").children("#"+newitems).remove();
                    itemlist = $('#container2');
                    len=$(itemlist).children().length; 
                }
                function SelectChild(ev){   
                    var index = $(".selitems").index(ev);
                    selected = index; 
                    $('.selitems').each(function () {
                        this.style.backgroundColor = "white";
                    });
                    ev.style.backgroundColor = "lightgray";
                }
                function moveup(){ 
                    if(selected>0){
                        jQuery($(itemlist).children().eq(selected-1)).before(jQuery($(itemlist).children().eq(selected)));
                        selected=selected-1;
                    }
                }
                function movedown(){
                    if(selected < len){
                        jQuery($(itemlist).children().eq(selected+1)).after(jQuery($(itemlist).children().eq(selected)));
                        selected=selected+1;
                    }
                }
                function movetoleft(eve,Itemlabel){
                    var itemid = eve;
                    var newitems = itemid;
                    if(itemid.includes('.')){
                        newitems = itemid.split('.').join('');
                        // newitems = newitems.replace('.','');
                    }
                    var items = '<div itemid="'+itemid+'" id="'+newitems+'" class=" box-item" onclick="movetoright(\''+itemid+'\',\''+Itemlabel+'\')" style = "font-size:74%;padding-top:8px;" >'+Itemlabel+'</div>';
                    $("#container1").append(items);
                    $("#container2").children("#"+newitems).remove();   
                }
                function groupmovetoright(eve,Itemlabel){	
                    
                    var itemid = eve;	
                    var newitems = itemid;	
                    if(itemid.includes('.')){	
                        newitems = itemid.split('.').join('');	
                        //  newitems = itemid.replace('.','');	
                    }	
                    var lens =$(itemlist).children().length; 	
                    var items = '<div itemid="'+itemid+'" id="'+newitems+'" class="selitems box-item" style="display: inline-flex;width:100%;padding: 3px;padding-left:5px;padding-right:5px;cursor:pointer;font-size:74%;" onclick="groupSelectChild(this)"><div style="width:80%" id="'+lens+'" >'+Itemlabel+'</div><div style="width:20%;text-align: right;" onclick="groupmovetoleft(\''+itemid+'\',\''+Itemlabel+'\')"><i class="fa fa-times"></i></div></div>';
                    $("#groupcontainer2").append(items);	
                    $("#groupcontainer1").children("#"+newitems).remove();	
                    itemlist = $('#groupcontainer2');	
                    len=$(itemlist).children().length; 	
                }	
                function groupSelectChild(ev){   	
                    var index = $(".selitems").index(ev);	
                    selected = index; 	
                    $('.selitems').each(function () {	
                        this.style.backgroundColor = "white";	
                    });	
                    ev.style.backgroundColor = "lightgray";	
                }	
                function groupmoveup(){ 	
                    if(selected>0){	
                        jQuery($(itemlist).children().eq(selected-1)).before(jQuery($(itemlist).children().eq(selected)));	
                        selected=selected-1;	
                    }	
                }	
                function groupmovedown(){	
                    if(selected < len){	
                        jQuery($(itemlist).children().eq(selected+1)).after(jQuery($(itemlist).children().eq(selected)));	
                        selected=selected+1;	
                    }	
                }	
                function groupmovetoleft(eve,Itemlabel){	
                    var itemid = eve;	
                    var newitems = itemid;	
                    if(itemid.includes('.')){	
                        newitems = itemid.split('.').join('');	
                        // newitems = newitems.replace('.','');	
                    }	
                    var items = '<div itemid="'+itemid+'" id="'+newitems+'" class=" box-item" onclick="groupmovetoright(\''+itemid+'\',\''+Itemlabel+'\')" style = "font-size:74%;padding-top:8px" >'+Itemlabel+'</div>';
                    $("#groupcontainer1").append(items);	
                    $("#groupcontainer2").children("#"+newitems).remove();   	
                }
                function boxDragdrop (){
                    $('.box-item').draggable({
                        cursor: 'move',
                        helper: "clone"
                    });
                    
                    
                    
                }
                var imagesvalue = '1';
                function addAttachment(){
                    
                    var reader = new FileReader();
                    var attachFile = document.getElementById('newAttFiles').files[0];
                    if(attachFile == undefined){
                        alert('Attachment required to proceed');
                        return;
                    }
                    
                    if(attachFile.size > 26214400){  //Where 26214400 is byte equivalent of 25MB
                        alert('Attachment size not supported');
                    }
                    
                    reader.onload = function(e) {
                        var encodedString = btoa(e.target.result);
                        Visualforce.remoting.Manager.invokeAction(
                            //Invoking controller action getcon
                            '{!$RemoteAction.PDFTemplateBuilder_MOD_Controller.getDocument}',
                            attachFile.name,
                            encodedString,
                            function(result, event){
                                //We can access the records through the parameter result
                                //event.status determines if there is error or not 
                                $("#newAttFiles").val('');
                                if(event.status){
                                    var documentId=result;  // get document object id.
                                    var salesurl = '{!sfdcURL}';
                                    var orgId = '{!organizationId}';
                                    var imageUrl  = '<img src="'+salesurl+'/servlet/servlet.ImageServer?id='+documentId+'&oid='+orgId+'"  alt="your image"';
                                    imageUrl += 'style="width: 100%;margin: 0 0 0px 0;padding:0px;cursor: grab;overflow: hidden;box-sizing: border-box;"/>';
                                    document.getElementById('ImageId'+imagesvalue).innerHTML = imageUrl;
                                    imagesvalue = '2';
                                    
                                    
                                }               
                            },
                            {escape: true}
                        );
                    };
                    reader.readAsBinaryString(attachFile);
                }
                var counts = 1; 
                function changeheight(heihts){
                    document.getElementById(heihts).style.height = "auto";
                    document.getElementById('TablesTest'+heihts).style.minHeight = "auto";
                }
                function createChildItemTable(){
                    var ids = document.getElementById('Idvalue').value;
                    var oldids = document.getElementById('oldIdvalue').value;
                    var chidl = $("#childObjName").val();
                    //var thmltabl='<input id="childtableObject" type="hidden" value="'+chidl+'"/><table class="order-list" style="width: 100%;table-layout: fixed;border-collapse: collapse;"><tr class="hover-row">';
                    var backgroundtr = 'white';
                    var firsttdbackground = 'white';
                    var secondtdbackground = 'white';
                    var textalign = '';
                    var border = '1px solid rgb(187, 187, 187);';
                    var tdtextalign = '';
                    var tdborder = '1px solid rgb(187, 187, 187);';
                    var padding = '0px';	
                    var tdpadding = '0px';
                    var height = 'auto';
                    var width = 'auto';
                    var bold = '400';
                    
                    if(document.getElementById('tr'+oldids) != undefined){
                        backgroundtr = document.getElementById('tr'+oldids).style.backgroundColor;
                    }
                    
                    if(document.getElementById('th'+oldids) != undefined){
                        textalign = document.getElementById('th'+oldids).style.textAlign;
                        border = document.getElementById('th'+oldids).style.border;
                        height = document.getElementById('th'+oldids).style.height;
                        
                        padding = document.getElementById(chilcont + 'th'+ids).style.padding;
                    }
                    
                    if(document.getElementById('td'+oldids) != undefined){
                        tdtextalign = document.getElementById('td'+oldids).style.textAlign;
                        tdborder = document.getElementById('td'+oldids).style.border;
                        
                        padding = document.getElementById(chilcont + 'th'+ids).style.padding;
                    } 
                    
                    
                    
                    
                    if(document.getElementById('1tr'+oldids) != undefined){
                        firsttdbackground = document.getElementById('1tr'+oldids).style.backgroundColor;
                    } 
                    if(document.getElementById('2tr'+oldids) != undefined){
                        secondtdbackground = document.getElementById('2tr'+oldids).style.backgroundColor;
                    }
                    
                    if(document.getElementById('tr'+ids) != undefined){
                        backgroundtr = document.getElementById('tr'+ids).style.backgroundColor;
                    }
                    
                    if(document.getElementById('td'+ids) != undefined){
                        tdtextalign = document.getElementById('td'+ids).style.textAlign;
                        tdborder = document.getElementById('td'+ids).style.border;
                        
                        
                    } 
                    
                    if(document.getElementById('th'+ids) != undefined){
                        textalign = document.getElementById('th'+ids).style.textAlign;
                        border = document.getElementById('th'+ids).style.border;
                        height = document.getElementById('th'+ids).style.height;
                        
                        padding = document.getElementById(chilcont + 'th'+ids).style.padding;
                    }
                    
                    
                    
                    var borders = tdborder.split(' ');
                    if(borders.length > 2){
                        document.getElementById('borderWidth').value = borders[0];
                        document.getElementById('borderStyle').value = borders[1];
                        document.getElementById('borderColor').value = borders[2]+ borders[3] + borders[4];
                    }
                    
                    if(document.getElementById('TablesTest'+ids) != undefined){
                        width = document.getElementById('TablesTest'+ids).style.width;
                    }
                    if(document.getElementById('1tr'+ids) != undefined){
                        firsttdbackground = document.getElementById('1tr'+ids).style.backgroundColor;
                    } 
                    if(document.getElementById('2tr'+ids) != undefined){
                        secondtdbackground = document.getElementById('2tr'+ids).style.backgroundColor;
                    }
                    var renderedFieldIds = document.getElementById('renderedFieldId').value;
                    
                    var thmltabl = '';
                    if(renderedFieldIds != null && renderedFieldIds != undefined && renderedFieldIds != ''){
                        thmltabl += '<div id="NewId" style="{{IF( '+renderedFieldIds+',\'display:block\',\'display:none\')}">';
                    }
                    else{
                        thmltabl += '<div id="NewId" >';
                    }
                    
                    thmltabl += '<div id="parentsvalue'+ids+'" style="position:absolute;left:2px;top:0px;cursor:pointer;z-index: 9000;" data-title="Edit"> <i class="fa fa-pencil" onclick="ShowpChildPop(\''+chidl+'\',event)" ></i></div><table class="order-list" id="TablesTest'+ids+'" style="width: '+width+';border-collapse: collapse;padding:0px;min-height:50px;" onclick="changeheight(\''+ids+'\')" ><tbody><tr id="tr'+ids+'" class="hover-row" style="background-color:'+backgroundtr+'">';
                    
                    var childObjectLabelsMap = $("#childFieldsJSON").val(''); 
                    var Fields = '';
                    var Labels = '';
                    var AvailFields = '';
                    //alert(textalign);
                    var chilcont = 1;
                    $('#container2').children('.box-item').each(function () {
                        if(document.getElementById(chilcont + 'th'+ids) != undefined){
                            textalign = document.getElementById(chilcont + 'th'+ids).style.textAlign;
                            border = document.getElementById(chilcont + 'th'+ids).style.border;
                            height = document.getElementById(chilcont + 'th'+ids).style.height;
                            bold = document.getElementById(chilcont + 'th'+ids).style.fontWeight;
                            
                            padding = document.getElementById(chilcont + 'th'+ids).style.padding;
                        }   
                        thmltabl+='<td id="'+chilcont + 'th'+ids+'" data-title="Td Element" class="item-label hover-header" scope="col" style="border:'+border+';text-align:'+textalign+';font-weight: 400;height:'+height+';font-weight:'+bold+';padding:'+padding+'"><div class="td-label" style="display: inline-block;box-sizing: border-box;">'+$(this).text()+'</div></td>'; 
                        Labels += $(this).text() + ','; 
                        Fields += $(this).attr('itemid') + ',';
                        chilcont = chilcont + 1;
                    });
                    $('#container1').children('.box-item').each(function () {
                        AvailFields += $(this).text() + ','; 
                    });
                    thmltabl+='</tr></tbody><tbody id="'+chidl+ids+'">';
                    for(var k=0; k<2;k++){
                        var m = k+1;
                        if(k==0){
                            thmltabl+='<tr class="hover-row" id="'+m+'tr'+ids+'" style="background-color:'+firsttdbackground+'">';
                        }
                        else{
                            thmltabl+='<tr class="hover-row" id="'+m+'tr'+ids+'" style="background-color:'+secondtdbackground+'">';
                        }
                        $('#container2').children('.box-item').each(function () {
                            
                            thmltabl+='<td id="td'+ids+'" data-title="Td Element" class="item-label hover-header" scope="col" style="border:'+tdborder+';text-align:'+tdtextalign+';font-weight: 400;height: '+height+';padding:'+tdpadding+'"><div class="td-label" style="display: inline-block;box-sizing: border-box;"></div></td>'; 
                            
                        });
                        thmltabl+='</tr>';
                    }
                    
                    thmltabl+='</tbody></table>'; 
                    thmltabl+= '</div>';
                    var color1 = '';
                    var color2 = '';
                    var border = '';
                    $("#"+ids).children(".order-list").remove();
                    $("#"+ids).children('#parentsvalue'+ids).remove();
                    $("#"+ids).children('#NewId').remove();
                    $("#"+ids).removeClass("ordlist");
                    document.getElementById(ids).style.backgroundColor= "transparent";
                    // document.getElementById(ids).style.border= "none";
                    document.getElementById(ids).style.height= "auto";
                    document.getElementById(ids).style.width= "100%";
                    $("#"+ids).append(thmltabl);
                    $('#childFieldlabelBox').hide();
                    
                    var rendercondition = document.getElementById('renderedFieldId').value
                    
                    if(rendercondition == null || rendercondition == undefined || rendercondition == ''){
                        rendercondition = '';
                    }
                    var fieldscal = '';
                    $('#Calcontainer1').children('.box-item').each(function () {         
                        var docs= $(this).find('textarea').val();
                        if(docs != null && docs != undefined && docs != ''){
                            var newdocs = '[{' + docs+ '}]';
                            var TotalIds = ''
                            TotalIds += '<li style="padding-top: 2px;padding-bottom: 2px;">';
                            TotalIds += '<a class="" style="padding:0px;padding-bottom:5px;padding-top:5px;">';
                            TotalIds += '<label Id="calcopytext'+counts+'" ';
                            TotalIds += 'style="font-size: 95%; font-weight: 500;padding:0px;cursor: grab;overflow: hidden;box-sizing: border-box;height:auto;"';
                            TotalIds += 'data-title="Label Element" class="slds-text">';
                            TotalIds += newdocs;    
                            TotalIds += '</label>';
                            TotalIds += '<input type="textarea" ID="calholdtext'+counts+'" style="display:none;"></input>';
                            TotalIds += '<em style="font-size:12px"><i class="fa fa-files-o" data-title="Copy to clipboard" style="padding-right: 6px;float:right;top:0px" onClick="ClipBoard(\'calcopytext'+counts+'\', \'calholdtext'+counts+'\',\''+newdocs+'\');"></i></em>';
                            TotalIds += '</a>';
                            TotalIds += '</li>';
                            // TotalIds += '</ul>';
                            $("#CalculatedIds").append(TotalIds);
                            
                            fieldscal += ';' + newdocs
                        }
                    });
                    
                    calIds += fieldscal;
                    
                    // Order By
                    var OrderField = '';
                    var showorderby = false;
                    if(document.getElementById("OrderByField").value != undefined 
                       && document.getElementById("OrderByField").value != '' &&
                       document.getElementById("OrderByField").value != '--select one--'){
                        OrderField += ''+ document.getElementById("OrderByField").value;
                        
                    }
                    if(document.getElementById("OrderByASC").value != undefined
                       && document.getElementById("OrderByASC").value != ''
                       && document.getElementById("OrderByASC").value != '--select one--'){
                        OrderField += ' ' + document.getElementById("OrderByASC").value;
                    }
                    if(document.getElementById("OrderByField").value != undefined 
                       && document.getElementById("OrderByField").value != '' 
                       && document.getElementById("OrderByField").value != '--select one--'
                       && document.getElementById("OrderByASC").value != undefined
                       && document.getElementById("OrderByASC").value != ''
                       && document.getElementById("OrderByASC").value != '--select one--'){
                        showorderby = true; 
                    }
                    
                    if(showorderby == false){
                        OrderField = '';
                    }
                    var htmls = document.getElementById("content_area").innerHTML;
                    var Headerhtmls = ''; //document.getElementById("content_area_header").innerHTML;
                    var Footerhtmls = ''; //document.getElementById("content_area_footer").innerHTML;
                    var invoices = document.getElementById("invoiceId").innerHTML; 
                    var aggreagtequeries = '';	
                    var groupby = '';	
                    savechilddetails(ids,chidl,Fields,AvailFields,border,color1,color2,Labels,RenderFields,rendercondition,htmls,Headerhtmls,Footerhtmls,OrderField,height,invoices,groupby,aggreagtequeries);
                    RenderFields = '';
                    
                }
                
                function groupcreateChildItemTable(){	
                    var ids = document.getElementById('Idvalue').value;	
                    var oldids = document.getElementById('oldIdvalue').value;	
                    var chidl = $("#childObjName").val();	
                    //var thmltabl='<input id="childtableObject" type="hidden" value="'+chidl+'"/><table class="order-list" style="width: 100%;table-layout: fixed;border-collapse: collapse;"><tr class="hover-row">';	
                    var backgroundtr = 'white';	
                    var firsttdbackground = 'white';	
                    var secondtdbackground = 'white';	
                    var textalign = '';	
                    var border = '1px solid rgb(187, 187, 187);';	
                    var tdtextalign = '';	
                    var tdborder = '1px solid rgb(187, 187, 187);';	
                    var height = 'auto';	
                    var width = 'auto';	
                    var bold = '400';	
                    if(document.getElementById('3tr'+oldids) != undefined){	
                        backgroundtr = document.getElementById('3tr'+oldids).style.backgroundColor;	
                    }	
                    if(document.getElementById('th'+oldids) != undefined){	
                        textalign = document.getElementById('th'+oldids).style.textAlign;	
                        border = document.getElementById('th'+oldids).style.border;	
                        height = document.getElementById('th'+oldids).style.height;	
                    }	
                    if(document.getElementById('td'+oldids) != undefined){	
                        tdtextalign = document.getElementById('td'+oldids).style.textAlign;	
                        tdborder = document.getElementById('td'+oldids).style.border;	
                    } 	
                    
                    
                    if(document.getElementById('1tr'+oldids) != undefined){	
                        firsttdbackground = document.getElementById('1tr'+oldids).style.backgroundColor;	
                    } 	
                    if(document.getElementById('2tr'+oldids) != undefined){	
                        secondtdbackground = document.getElementById('2tr'+oldids).style.backgroundColor;	
                    }	
                    
                    if(document.getElementById('3tr'+ids) != undefined){	
                        backgroundtr = document.getElementById('3tr'+ids).style.backgroundColor;	
                    }	
                    
                    if(document.getElementById('td'+ids) != undefined){	
                        tdtextalign = document.getElementById('td'+ids).style.textAlign;	
                        tdborder = document.getElementById('td'+ids).style.border;	
                    } 	
                    if(document.getElementById('th'+ids) != undefined){	
                        textalign = document.getElementById('th'+ids).style.textAlign;	
                        border = document.getElementById('th'+ids).style.border;	
                        height = document.getElementById('th'+ids).style.height;	
                    }	
                    
                    
                    
                    var borders = tdborder.split(' ');	
                    if(borders.length > 2){	
                        document.getElementById('borderWidth').value = borders[0];	
                        document.getElementById('borderStyle').value = borders[1];	
                        document.getElementById('borderColor').value = borders[2]+ borders[3] + borders[4];	
                    }	
                    
                    if(document.getElementById('TablesTest'+ids) != undefined){	
                        width = document.getElementById('TablesTest'+ids).style.width;	
                    }	
                    if(document.getElementById('1tr'+ids) != undefined){	
                        firsttdbackground = document.getElementById('1tr'+ids).style.backgroundColor;	
                    } 	
                    if(document.getElementById('2tr'+ids) != undefined){	
                        secondtdbackground = document.getElementById('2tr'+ids).style.backgroundColor;	
                    }	
                    var renderedFieldIds = document.getElementById('renderedFieldId').value;	
                    
                    var thmltabl = '';	
                    if(renderedFieldIds != null && renderedFieldIds != undefined && renderedFieldIds != ''){	
                        thmltabl += '<div id="NewId" style="{{IF( '+renderedFieldIds+',\'display:block\',\'display:none\')}">';	
                    }	
                    else{	
                        thmltabl += '<div id="NewId" >';	
                    }	
                    
                    
                    
                    thmltabl += '<div id="parentsvalue'+ids+'" style="position:absolute;left:2px;top:0px;cursor:pointer;z-index: 9000;" data-title="Edit"> <i class="fa fa-pencil" onclick="groupShowpChildPop(\''+chidl+'\',event)" ></i></div><table class="order-list" id="TablesTest'+ids+'" style="width: '+width+';border-collapse: collapse;padding:0px;min-height:50px;" onclick="changeheight(\''+ids+'\')" ><tbody><tr id="3tr'+ids+'" class="hover-row" style="background-color:'+backgroundtr+'">';	
                    
                    var childObjectLabelsMap = $("#groupchildFieldsJSON").val(''); 	
                    var Fields = '';	
                    var Labels = '';	
                    var AvailFields = '';	
                    var chilcont = 1;	
                    $('#groupcontainer2').children('.box-item').each(function () {	
                        if(document.getElementById(chilcont + 'th'+ids) != undefined){	
                            textalign = document.getElementById(chilcont + 'th'+ids).style.textAlign;	
                            border = document.getElementById(chilcont + 'th'+ids).style.border;	
                            height = document.getElementById(chilcont + 'th'+ids).style.height;	
                            bold = document.getElementById(chilcont + 'th'+ids).style.fontWeight;	
                        }	
                        thmltabl+='<td id="'+chilcont + 'th'+ids+'" data-title="Td Element" class="item-label hover-header" scope="col" style="border:'+border+';text-align:'+textalign+';font-weight: 400;height:'+height+';font-weight:'+bold+'"><div class="td-label" style="display: inline-block;box-sizing: border-box;">'+$(this).text()+'</div></td>'; 	
                        Labels += $(this).text() + ','; 	
                        Fields += $(this).attr('itemid') + ',';	
                        chilcont = chilcont + 1;	
                    });	
                    $('#groupcontainer1').children('.box-item').each(function () {	
                        AvailFields += $(this).text() + ','; 	
                    });	
                    thmltabl+='</tr></tbody><tbody id="'+chidl+ids+'">';	
                    for(var k=0; k<2;k++){	
                        var m = k+1;	
                        if(k==0){	
                            thmltabl+='<tr class="hover-row" id="'+m+'tr'+ids+'" style="background-color:'+firsttdbackground+'">';	
                        }	
                        else{	
                            thmltabl+='<tr class="hover-row" id="'+m+'tr'+ids+'" style="background-color:'+secondtdbackground+'">';	
                        }	
                        $('#groupcontainer2').children('.box-item').each(function () {	
                            
                            thmltabl+='<td id="td'+ids+'" data-title="Td Element" class="item-label hover-header" scope="col" style="border:'+tdborder+';text-align:'+tdtextalign+';font-weight: 400;height: '+height+';"><div class="td-label" style="display: inline-block;box-sizing: border-box;"></div></td>'; 	
                            
                        });	
                        thmltabl+='</tr>';	
                    }	
                    
                    thmltabl+='</tbody></table>'; 	
                    thmltabl+= '</div>';	
                    var color1 = '';	
                    var color2 = '';	
                    var border = '';	
                    $("#"+ids).children(".order-list").remove();	
                    $("#"+ids).children('#parentsvalue'+ids).remove();	
                    $("#"+ids).children('#NewId').remove();	
                    $("#"+ids).removeClass("ordlist");	
                    document.getElementById(ids).style.backgroundColor= "transparent";	
                    // document.getElementById(ids).style.border= "none";	
                    document.getElementById(ids).style.height= "auto";	
                    document.getElementById(ids).style.width= "100%";	
                    $("#"+ids).append(thmltabl);	
                    
                    
                    var rendercondition = document.getElementById('renderedFieldId').value	
                    
                    if(rendercondition == null || rendercondition == undefined || rendercondition == ''){	
                        rendercondition = '';	
                    }	
                    var fieldscal = '';	
                    
                    calIds += fieldscal;	
                    
                    // Order By	
                    var OrderField = '';	
                    var showorderby = false;	
                    if(document.getElementById("groupOrderByField").value != undefined 	
                       && document.getElementById("groupOrderByField").value != '' &&	
                       document.getElementById("groupOrderByField").value != '--select one--'){	
                        OrderField += ''+ document.getElementById("groupOrderByField").value;	
                        
                    }	
                    if(document.getElementById("groupOrderByASC").value != undefined	
                       && document.getElementById("groupOrderByASC").value != ''	
                       && document.getElementById("groupOrderByASC").value != '--select one--'){	
                        OrderField += ' ' + document.getElementById("groupOrderByASC").value;	
                    }	
                    if(document.getElementById("groupOrderByField").value != undefined 	
                       && document.getElementById("groupOrderByField").value != '' 	
                       && document.getElementById("groupOrderByField").value != '--select one--'	
                       && document.getElementById("groupOrderByASC").value != undefined	
                       && document.getElementById("groupOrderByASC").value != ''	
                       && document.getElementById("groupOrderByASC").value != '--select one--'){	
                        showorderby = true; 	
                    }	
                    if(showorderby == false){	
                        OrderField = '';	
                    }	
                    var groupby = '';
                    if(document.getElementById("groupByField").value != undefined 
                       && document.getElementById("groupByField").value != '' 
                       && document.getElementById("groupByField").value != '--select one--'){
                        groupby = document.getElementById("groupByField").value;
                    }
                    var htmls = document.getElementById("content_area").innerHTML;
                    var Headerhtmls = '';// document.getElementById("content_area_header").innerHTML;
                    var Footerhtmls = ''; //document.getElementById("content_area_footer").innerHTML;
                    var invoices = document.getElementById("invoiceId").innerHTML; 
                    
                    if(groupby != ''){
                        document.getElementById("GroupErrorId").style.display = 'none';
                        $('#groupchildFieldlabelBox').hide();
                        var aggreagtequeries = '';
                        savechilddetails(ids,chidl,Fields,AvailFields,border,color1,color2,Labels,RenderFields,rendercondition,htmls,Headerhtmls,Footerhtmls,OrderField,height,invoices,groupby,aggreagtequeries); 
                        RenderFields = '';
                    }
                    else{
                        document.getElementById('GroupObjectErrorId').style.display = "block";
                        setTimeout(function(){
                            document.getElementById('GroupObjectErrorId').style.display = "none";
                        },1000)
                    }
                }
                
                function querycreateChildItemTable(){
                    var ids = document.getElementById('Idvalue').value;
                    var oldids = document.getElementById('oldIdvalue').value;
                    var chidl = $("#childObjName").val();
                    var backgroundtr = 'white';
                    var firsttdbackground = 'white';
                    var secondtdbackground = 'white';
                    var textalign = '';
                    var border = '1px solid rgb(187, 187, 187);';
                    var tdtextalign = '';
                    var tdborder = '1px solid rgb(187, 187, 187);';
                    var height = '100%';
                    var width = '';
                    var bold = '400';
                    
                    var thmltabl = '';
                    thmltabl += '<div id="NewId"><div id="parentsvalue'+ids+'" style="position:absolute;left:2px;top:0px;cursor:pointer;z-index: 9000;" data-title="Edit"> <i class="fa fa-pencil" onclick="queryShowpChildPop(\''+chidl+'\',event)" ></i></div><div id="TablesTest'+ids+'" style="width: '+width+';border-collapse: collapse;padding:0px;height:auto;background:white"><div id="'+chidl+ids+'">'+document.getElementById("AggregateQueryId").value+'</div></div</div>';
                    
                    var aggreagtequeries = '';
                    if(document.getElementById('AggregateQueryId') != undefined){
                        aggreagtequeries = document.getElementById('AggregateQueryId').value;
                    }
                    
                    var childObjectLabelsMap = $("#groupchildFieldsJSON").val(''); 
                    var Fields = '';
                    var Labels = '';
                    var AvailFields = '';
                    var chilcont = 1;
                    
                    
                    var color1 = '';
                    var color2 = '';
                    var border = '';
                    $("#"+ids).children(".order-list").remove();
                    $("#"+ids).children('#parentsvalue'+ids).remove();
                    $("#"+ids).children('#NewId').remove();
                    $("#"+ids).removeClass("ordlist");
                    document.getElementById(ids).style.backgroundColor= "transparent";
                    // document.getElementById(ids).style.border= "none";
                    document.getElementById(ids).style.height= "auto";
                    document.getElementById(ids).style.width= "100%";
                    console.log('thmltabl **** ' + thmltabl);
                    $("#"+ids).append(thmltabl);
                    
                    
                    var rendercondition = document.getElementById('renderedFieldId').value
                    
                    if(rendercondition == null || rendercondition == undefined || rendercondition == ''){
                        rendercondition = '';
                    }
                    var fieldscal = '';
                    
                    calIds += fieldscal;
                    
                    // Order By
                    var OrderField = '';
                    var showorderby = false;
                    if(document.getElementById("groupOrderByField").value != undefined 
                       && document.getElementById("groupOrderByField").value != '' &&
                       document.getElementById("groupOrderByField").value != '--select one--'){
                        OrderField += ''+ document.getElementById("groupOrderByField").value;
                        
                    }
                    if(document.getElementById("groupOrderByASC").value != undefined
                       && document.getElementById("groupOrderByASC").value != ''
                       && document.getElementById("groupOrderByASC").value != '--select one--'){
                        OrderField += ' ' + document.getElementById("groupOrderByASC").value;
                    }
                    if(document.getElementById("groupOrderByField").value != undefined 
                       && document.getElementById("groupOrderByField").value != '' 
                       && document.getElementById("groupOrderByField").value != '--select one--'
                       && document.getElementById("groupOrderByASC").value != undefined
                       && document.getElementById("groupOrderByASC").value != ''
                       && document.getElementById("groupOrderByASC").value != '--select one--'){
                        showorderby = true; 
                    }
                    
                    if(showorderby == false){
                        OrderField = '';
                    }
                    var groupby = '';
                    if(document.getElementById("groupByField").value != undefined 
                       && document.getElementById("groupByField").value != '' 
                       && document.getElementById("groupByField").value != '--select one--'){
                        groupby = document.getElementById("groupByField").value;
                    }
                    var htmls = document.getElementById("content_area").innerHTML;
                    var Headerhtmls = ''; //document.getElementById("content_area_header").innerHTML;
                    var Footerhtmls = ''; //document.getElementById("content_area_footer").innerHTML;
                    var invoices = document.getElementById("invoiceId").innerHTML; 
                    
                    //if(groupby != ''){
                    //  document.getElementById("GroupErrorId").style.display = 'none';
                    //aggreagtequeries = aggreagtequeries.replace(/,/g,';');
                    savechilddetails(ids,chidl,Fields,AvailFields,border,color1,color2,Labels,RenderFields,rendercondition,htmls,Headerhtmls,Footerhtmls,OrderField,height,invoices,groupby,aggreagtequeries); 
                    RenderFields = '';
                    $('#querychildFieldlabelBox').hide();
                    // }
                    // else{   
                    //document.getElementById("GroupErrorId").style.display = 'block';
                    // }
                    
                }
                function displayFilters(){
                    var Ids = document.getElementById('Idvalue').value
                    ShowFilters(Ids);    
                }    
                function loadscript(){
                    var DocId = '{!DocId}';
                    var EmailId = '{!EmailId}';
                    
                    var pagesize = '{!pagesize}';
                    if(DocId != '' || EmailId != ''){
                        $( document ).ready(function() {
                            
                            $("#txtArea").css("display", "block");
                            var childJson = '{!JSENCODE(ChildInnerClassJson)}';
                            var jsonpasrse = JSON.parse(childJson);
                            
                            $('.btn-add-page').click();
                            $('.bottom-page-number').css('font-size','12px'); 
                            $('.bottom-page-number').css('top','0px');
                            for(var i = 0;i < jsonpasrse.length;i++){
                                if($("#1tr"+jsonpasrse[i].sortorder) != undefined){
                                    $("#1tr"+jsonpasrse[i].sortorder).css("display", "table-row");
                                }
                                if($("#2tr"+jsonpasrse[i].sortorder) != undefined){
                                    $("#2tr"+jsonpasrse[i].sortorder).css("display", "table-row");
                                } 
                                if($("#3tr"+jsonpasrse[i].sortorder) != undefined){	
                                    $("#3tr"+jsonpasrse[i].sortorder).css("display", "table-row");	
                                } 
                            }
                            $(".paragraph-element").each(function (){
                                
                                if($(this).attr('id') != undefined){
                                    var heights = parseInt(document.getElementById($(this).attr('id')).style.minHeight.replace('px',''));
                                    var padings = parseInt(document.getElementById($(this).attr('id')).style.padding.replace('px',''))*2;
                                    var width = document.getElementById($(this).attr('id')).style.width;
                                    var widths = parseInt(document.getElementById($(this).attr('id')).style.width.replace('px',''));    
                                    if(padings >= 0){
                                        var minheights = heights + padings;
                                        var minwidths = widths + padings;
                                        document.getElementById($(this).attr('id')).style.minHeight = minheights + 'px'  ;
                                        document.getElementById($(this).attr('id')).style.width = minwidths + 'px'  ;
                                    }
                                }
                            });
                            $(".label-element").each(function (){
                                if($(this).attr('id') != undefined){
                                    var heights = parseInt(document.getElementById($(this).attr('id')).style.minHeight.replace('px',''));
                                    var padings = parseInt(document.getElementById($(this).attr('id')).style.padding.replace('px',''))*2;
                                    var widths = parseInt(document.getElementById($(this).attr('id')).style.width.replace('px',''));    
                                    if(padings >= 0){
                                        var minheights = heights + padings;
                                        var minwidths = widths + padings;
                                        document.getElementById($(this).attr('id')).style.minHeight = minheights + 'px'  ;
                                        document.getElementById($(this).attr('id')).style.width = minwidths + 'px'  ;
                                    }
                                }
                            });
                            $("#Height-Property").css("display", "block");
                                var widthContainer = '{!widthContainer}';
                                document.getElementById('Height-Property').value = widthContainer;
                            $("#txtArea").css("display", "none");
                            // document.getElementById("ddlPageSize").value = pagesize;
                            var calculatedFields = '{!calculatedFields}';
                            var calculatedFieldsList = calculatedFields.split(';');
                            for(var i=0;i<calculatedFieldsList.length;i++){   
                                var counts = i;
                                var docs= calculatedFieldsList[i];
                                if(docs != null && docs != undefined && docs != '' && docs != 'null' && docs != 'Null'){
                                    var newdocs = docs;
                                    var TotalIds = ''
                                    TotalIds += '<li style="padding-top: 2px;padding-bottom: 2px;">';
                                    TotalIds += '<a class="" style="padding:0px;padding-bottom:5px;padding-top:5px;">';
                                    TotalIds += '<div style="display:inline-flex;width: 100%;"><div style="width: 88%;">';
                                    TotalIds += '<label Id="calcopytext'+counts+'" ';
                                    TotalIds += 'style="font-size: 95%; font-weight: 500;padding:0px;cursor: grab;overflow: hidden;box-sizing: border-box;height:auto;"';
                                    TotalIds += 'data-title="Label Element" class="slds-text">';
                                    TotalIds += newdocs;    
                                    TotalIds += '</label></div><div style="width: 12%;text-align:right;">';
                                    TotalIds += '<input type="textarea" ID="calholdtext'+counts+'" style="display:none;" class="slds-textarea"></input>';
                                    /*TotalIds += '<span class=" slds-icon_container" onClick="ClipBoard(\'calcopytext'+counts+'\', \'calholdtext'+counts+'\',\''+newdocs+'\');" style = "padding-right: 6px;float:right;top:0px">
                                    TotalIds +=  '<svg aria-hidden="true" class="slds-icon slds-icon--xx-small">';
                                    TotalIds +=   '<use xmlns:xlink=" http://www.w3.org/1999/xlink" xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#copy">';
                                    TotalIds +=    '</use>';
                                    TotalIds +=    '</svg></span>';*/
                                          TotalIds += '<em style="font-size:11px"><i class="fa fa-files-o" data-title="Copy to clipboard" style="padding-right: 6px;float:right;top:0px" onClick="ClipBoard(\'calcopytext'+counts+'\', \'calholdtext'+counts+'\',\''+newdocs+'\');"></i></em>';
                                          TotalIds += '</div></div>';
                                          TotalIds += '</a>';
                                          TotalIds += '</li>';
                                          // TotalIds += '</ul>';
                                          $("#CalculatedIds").append(TotalIds);
                                          //calFIelds(newdocs);
                                      }
                                }
                                
                                
                                var NewcalculatedFields = '{!NewcalculatedFields}';	
                                var NewcalculatedFieldsList = NewcalculatedFields.split(';');	
                                for(var i=0;i<NewcalculatedFieldsList.length;i++){   	
                                    var counts = i;	
                                    var docs= NewcalculatedFieldsList[i];	
                                    if(NewcalculatedFieldsList[i] != null && NewcalculatedFieldsList[i] != undefined && NewcalculatedFieldsList[i] != '' && NewcalculatedFieldsList[i] != 'null' && NewcalculatedFieldsList[i] != 'Null'){	
                                        var newdocs = docs;	
                                        var TotalIds = ''	
                                        TotalIds += '<li style="padding-top: 2px;padding-bottom: 2px;">';
                                        TotalIds += '<a class="" style="padding:0px;padding-bottom:5px;padding-top:5px;">';
                                        TotalIds += '<div style="display:inline-flex;width: 100%;"><div style="width: 88%;">';
                                        TotalIds += '<label Id="calcopytext'+NewcalculatedFieldsList[i]+'" ';
                                        TotalIds += 'style="font-size: 95%; font-weight: 500;padding:0px;cursor: grab;overflow: hidden;box-sizing: border-box;height:auto;"';
                                        TotalIds += 'data-title="Label Element" class="slds-text">';
                                        TotalIds += newdocs;    
                                        TotalIds += '</label></div><div style="width: 12%;text-align:right;">';
                                        TotalIds += '<input type="textarea" ID="calholdtext'+NewcalculatedFieldsList[i]+'" style="display:none;" class="slds-textarea"></input>';
                                        TotalIds += '<em style="font-size:11px"><i class="fa fa-files-o" data-title="Copy to clipboard" style="padding-right: 6px;float:right;top:0px" onClick="ClipBoard(\'calcopytext'+NewcalculatedFieldsList[i]+'\', \'calholdtext'+NewcalculatedFieldsList[i]+'\',\''+newdocs+'\');"></i></em>';
                                        TotalIds += '</div></div>';
                                        TotalIds += '</a>';
                                        TotalIds += '</li>';
                                        // TotalIds += '</ul>';	
                                        $("#CalculatedIds").append(TotalIds);	
                                        //calFIelds(newdocs);	
                                    }	
                                }
                            });
                            
                        }
                        setTimeout(function(){
                            $('.parenttoggle').toggle().show();
                        },1000);
                    }
                
                </script>
                <script>
                function openCity(evt, cityName) {
                    var i, j,tabcontent, tablinks;
                    var classnames = '';
                    if(cityName == 'content_area'){
                        classnames = 'invoice-content-box '; 
                        var j = 2;
                        for (j = 2; j < 200; j++) {
                            if(document.getElementById('page'+j) != undefined){
                                document.getElementById('page'+j).style.display = "block";
                            }
                        }
                    }
                    if(cityName == 'content_area_header'){
                        classnames = 'invoice-header-box '; 
                        var j = 2;
                        for (j = 2; j < 200; j++) {
                            if(document.getElementById('page'+j) != undefined){
                                document.getElementById('page'+j).style.display = "none";
                            }
                        } 
                    }
                    if(cityName == 'content_area_footer'){
                        classnames = 'invoice-footer-box '; 
                        var j = 2;
                        for (j = 2; j < 200; j++) {
                            if(document.getElementById('page'+j) != undefined){
                                document.getElementById('page'+j).style.display = "none";
                            }
                        }
                    }
                    tabcontent = document.getElementsByClassName("tabcontent");
                    
                    
                    for (i = 0; i < tabcontent.length; i++) {
                        tabcontent[i].style.display = "none";
                        tabcontent[i].className = tabcontent[i].className.replace(" actives", "");
                    }
                    tablinks = document.getElementsByClassName("tablinks");
                    for (i = 0; i < tablinks.length; i++) {
                        tablinks[i].className = tablinks[i].className.replace(" active", "");
                    }
                    
                    
                    document.getElementById(cityName).style.display = "block";
                    document.getElementById(cityName).className = classnames + " tabcontent actives";  
                    evt.currentTarget.className += " active";
                }
                
                function openChilds(evt, cityName) {
                    var i, tabcontent, tablinks;
                    var classnames = '';
                    
                    tabcontent = document.getElementsByClassName("chtabcontent");
                    for (i = 0; i < tabcontent.length; i++) {
                        tabcontent[i].style.display = "none";
                        tabcontent[i].className = tabcontent[i].className.replace(" actives", "");
                    }
                    tablinks = document.getElementsByClassName("chtablinks");
                    for (i = 0; i < tablinks.length; i++) {
                        tablinks[i].className = tablinks[i].className.replace(" active", "");
                    }
                    document.getElementById(cityName).style.display = "block";
                    document.getElementById(cityName).className = " chtabcontent actives";  
                    evt.currentTarget.className += " active";
                }
                
                function Oncompletes(){
                    setTimeout(function(){
                        CLosevalidError(); 
                    },5000);
                }
                
                
                
                function containerHeight(){
                    var values = document.getElementById('Height-Property').value;
                    document.getElementById('content_area').style.height = values+'px';
                    //alert(values);
                    /*  setTimeout(function(){
                        if(values == 'A3'){
                            document.getElementById('content_area').style.height = '1191px'; 
                            document.getElementById('content_area_footer').style.height = '100px';
                            document.getElementById('content_area_header').style.height = '100px';   
                        }
                        if(values == 'A4 Letter'){
                            document.getElementById('content_area').style.height = '791px'; 
                            document.getElementById('content_area_footer').style.height = '100px';
                            document.getElementById('content_area_header').style.height = '100px';
                            
                        }
                        if(values == 'A4 Legal'){
                            document.getElementById('content_area').style.height = '1006px'; 
                            document.getElementById('content_area_footer').style.height = '100px';
                            document.getElementById('content_area_header').style.height =  '100px';
                            
                        }
                        if(values == 'A5'){
                            document.getElementById('content_area').style.height = '595px'; 
                            document.getElementById('content_area_footer').style.height = '100px';
                            document.getElementById('content_area_header').style.height =  '100px';
                            
                        }
                        if(values == 'Label 4x6'){
                            document.getElementById('content_area').style.height = '450px'; 
                            document.getElementById('content_area_footer').style.height = '100px';
                            document.getElementById('content_area_header').style.height =  '100px';
                            
                        }
                    },100); */
                }
                </script>
                <style>
                    body {font-family: Arial;}
                    
                    /* Style the tab
                    .tab {
                    overflow: hidden;
                    border: 1px solid #ccc;
                    background-color: #f1f1f1;
                    } */
                    
                    /* Style the buttons inside the tab 
                    .tab a {
                    background-color: inherit;
                    float: left;
                    border: none;
                    outline: none;
                    cursor: pointer;
                    padding: 14px 16px;
                    transition: 0.3s;
                    font-size: 17px;
                    } */
                    
                    /* Change background color of buttons on hover 
                    .tab a:hover {
                    background-color: #ddd;
                    } */
                    
                    /* Create an active/current tablink class 
                    .tab a.active {
                    background-color: #ccc;
                    }*/
                    
                    /* Style the tab content */
                    .tabcontent {
                    display: none;
                    padding: 0px 0px;
                    
                    }
                    
                    .chtabcontent{
                    display: none;
                    padding: 0px 0px;
                    
                    }
                    .actives{
                    display: block !important;
                    }
                    .active{
                    background-color: #187bcd !important;
                    border-color: #187bcd !important;
                    color: white !important;
                    box-shadow: 2px 4px 5px 0px rgba(0,0,0,0.75) !important;
                    }
                    
                </style>
                <style>
                    .main-contents{
                    padding: 56px 10px 22px 420px !important;
                    min-height: 100% !important;
                    position: absolute !important;
                    width: 100% !important;
                    
                    }
                    
                    .invoice-container {
                    width: 842px;
                    margin: 0px 0 10px 0 !important;
                    border: 2px dashed #999 !important;
                    }
                    
                    #Header_content_area{
                    min-height: 100px;
                    }
                    
                    .left-menu-box .style-box{
                    padding: 0px 0px 0px 0px;
                    left: 0px !important;
                    width:200px;
                    }
                    label{
                    margin:0px 0px 0px 0px;
                    }
                    .slds-scope h1, .slds-scope h2, .slds-scope h3, .slds-scope h4, .slds-scope h5, .slds-scope h6, .slds-scope th, .slds-scope td {
                    font-family: unset;
                    color: unset;
                    }
                    .slds-scope table {  
                    border-spacing: 0;
                    border-collapse: unset;
                    }
                    .slds-scope caption, .slds-scope th, .slds-scope td {
                    text-align: unset;
                    }
                    /* Large desktop */
                    @media (min-width: 1200px) { ... }
                    
                    /* Portrait tablet to landscape and desktop */    
                    @media (min-width: 768px) and (max-width: 979px) { ... }
                    
                    /* Landscape phone to portrait tablet */
                    @media (max-width: 767px) { ... }
                    
                    /* Landscape phones and down */
                    @media (max-width: 480px) { ... }
                    
                    }
                    
                    .panel-default {
                    border-color: #337AB7;
                    }
                    .panel {
                    background-color: #fff;
                    border: 1px solid #ccc;
                    border-radius: 4px;
                    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
                    margin-bottom: 20px;
                    }
                    .panel-default > .panel-heading {
                    background-color: #337AB7;
                    border-color: #ddd;
                    color: white;
                    }
                    .panel-heading {
                    border-bottom: 1px solid transparent;
                    border-top-left-radius: 3px;
                    border-top-right-radius: 3px;
                    padding: 10px 15px;
                    }
                    .panel-body {
                    padding: 15px;
                    }
                    .slds-panel {
                    background-color: #fff;
                    border: 1px solid #ccc;
                    border-radius: 4px;
                    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
                    margin-bottom: 20px;
                    }
                    .panel-default > .slds-panel__header{
                    background-color: #337AB7;
                    border-color: #ddd;
                    color: white;
                    }
                    .slds-panel__header{
                    border-bottom: 1px solid transparent;
                    border-top-left-radius: 3px;
                    border-top-right-radius: 3px;
                    padding: 10px 15px;
                    }
                    .slds-panel__body{
                    padding: 15px;
                    }
                    .ParentObj ul,.childObject ul {
                    list-style-type: none;
                    margin: 0;
                    padding: 0;
                    width: 100%;
                    }
                    .ParentObj ul li,.childObject ol li{
                    padding-top:1%;
                    }
                    
                    .ParentObj li a,.childObject li a {
                    display: block;
                    color: #000;
                    padding: 8px 16px;
                    text-decoration: none;
                    }
                    .ParentObj li a.active,.childObject li a.active {
                    background-color: #337AB7;
                    color: white;
                    }
                    
                    .ParentObj li a:hover:not(.active) {
                    background-color: #555;
                    color: white;
                    }
                    .childObject li a:hover:not(.active) {
                    background-color: #555;
                    color: white;
                    }
                    .childObject li a:hover:not(.active) {
                    background-color: #555;
                    color: white;
                    }
                    .slds-form-element__label {
                    cursor:pointer;
                    }
                    .dv_load{
                    top: 40%;
                    margin-left: 45%;
                    padding: 15px;
                    z-index: 20000;
                    position: fixed;
                    width:100px;
                    }
                    .slds-badge {
                    background-color:#449D44 !important;
                    color:white !important;
                    }
                    #ParantDragandDropElements .ParentLbl,#ChildDragandDropElements .ChildLbl{
                    padding:0px !important;
                    }
                    
                    .dragUL li a{
                    background-color:#337ab7;
                    color:white !important;
                    text-decoration: none !important;
                    }
                    .reqFields{
                    border-left: 3px solid red;
                    }
                    li a{
                    text-decoration: none !important;
                    }
                    
                    .closeIcon::before{
                    content: "\f00d";
                    }
                </style>
                <script>
                
                function sectionShowpChildPop(event){
                    var Ids = event.target.parentElement.id; 
                    document.getElementById('Idvalue').value = Ids;
                    $("#sectionchildFieldlabelBox").show();
                    boxDragdrop (); 
                }
                
                var sectionRenderFields = '';
                function AddsecrenderedField(){
                    var childIds = document.getElementById('sectionrenderIds').value;
                    var childsunIds = document.getElementById('sectionSumAvgIds').value;
                    var rendIds = document.getElementById('sectionrenderId').value; 
                    var Ids = document.getElementById('Idvalue').value;
                    var childcalId = document.getElementById('sectionrenderedFieldId').value;
                    
                    if(childIds != undefined && childIds != ''){
                        if(sectionRenderFields.length > 0){
                            sectionRenderFields += ',' + childIds;
                        }
                        else{
                            sectionRenderFields += childIds;
                        }
                    }
                    var totalIds = '';
                    if(childcalId != undefined && childcalId != ''){
                        // if(childsunIds == '==' || childsunIds == '!='){
                        //     totalIds = childcalId + ' &&  \'' + childIds +'\' '+ childsunIds + ' \'' + rendIds + '\'';
                        //}
                        // else{
                        totalIds = childcalId + ' AND  ' + childIds +' '+ childsunIds + ' ' + rendIds;  
                        // }
                    } 
                    else{
                        // if(childsunIds != '==' && childsunIds != '!='){
                        totalIds = childIds +' '+ childsunIds + ' ' + rendIds;  
                        // }
                        //  else{
                        //  totalIds = '\''+childIds +'\' '+ childsunIds + ' \'' + rendIds + '\'';
                        //  }
                        
                    }
                    document.getElementById('sectionrenderedFieldId').value = totalIds
                }
                
                
                
                function sectioncreate(){
                    var renderedFieldIds = document.getElementById('sectionrenderedFieldId').value;
                    var Ids = document.getElementById('Idvalue').value
                    if(renderedFieldIds != null && renderedFieldIds != undefined && renderedFieldIds != ''){
                        if ( $('#'+Ids).parent().is( "#NewId" ) ) {
                            $('#'+Ids).unwrap();
                        } 
                        
                        $('#'+Ids).wrapAll( '<div id="NewId" data-renderdiv="{{IF( '+renderedFieldIds+',\'showDiv\',\'hideDiv\')}" style="{{IF( '+renderedFieldIds+',\'display:block\',\'display:none\')}">' );
                        
                    }
                    else{
                        if ( $('#'+Ids).parent().is( "#NewId" ) ) {
                            $('#'+Ids).unwrap();
                        } 
                        
                        $('#'+Ids).wrapAll( '<div id="NewId">' );
                        
                        
                    }
                    $("#sectionchildFieldlabelBox").hide();
                    // saveSectionChildDetails(Ids,chidl,sectionRenderFields,rendercondition); 
                }
                </script>
                <style>
                    .left-menu-box, .ui-icon, footer, header {
                    display: block !important;
                    }
                    .btn{
                    display: block;
                    font-size: 18px;
                    padding: 8px 0;
                    height: 35px;
                    width: 35px;
                    text-align: center;
                    color: #1f2b88;
                    border: 1px solid #1f2b88;
                    border-radius: 40%;
                    background: transparent;    
                    }
                    
                    
                    .main-content {
                    padding: 56px 10px 22px 420px !important;
                    min-height: 100% !important;
                    position: absolute !important;
                    left: 0 !important;
                    top: 0 !important;
                    width: 100% !important;
                    }
                    .pixie-ig-setting:before{
                    content: "\f013";
                    }
                    
                    .invoice-container .invoice-content-box .img-element:hover{
                    border: 2px solid #1f2b88 !important;
                    }
                    .invoice-container .invoice-content-box .label-element:hover{
                    border: 2px solid #1f2b88 !important;
                    }
                    .invoice-container .invoice-content-box .paragraph-element:hover {
                    border: 2px solid #1f2b88 !important;
                    }
                    .invoice-container .invoice-content-box .img-element:focus{
                    border: 2px solid #1f2b88;
                    cursor:pointer !important;
                    }
                    .invoice-container .invoice-content-box .label-element:focus{
                    border: 2px solid #1f2b88;
                    cursor:pointer !important;
                    }
                    .invoice-container .invoice-content-box .paragraph-element:focus {
                    border: 2px solid #1f2b88;
                    cursor:pointer !important;
                    }
                    
                    .invoice-container .invoice-header-box .img-element:hover{
                    border: 2px solid #1f2b88 !important;
                    }
                    .invoice-container .invoice-header-box .label-element:hover{
                    border: 2px solid #1f2b88 !important;
                    }
                    .invoice-container .invoice-header-box .paragraph-element:hover {
                    border: 2px solid #1f2b88 !important;
                    }
                    .invoice-container .invoice-header-box .img-element:focus{
                    border: 2px solid #1f2b88;
                    cursor:pointer !important;
                    }
                    .invoice-container .invoice-header-box .label-element:focus{
                    border: 2px solid #1f2b88;
                    cursor:pointer !important;
                    }
                    .invoice-container .invoice-header-box .paragraph-element:focus {
                    border: 2px solid #1f2b88;
                    cursor:pointer !important;
                    }
                    
                    .invoice-container .invoice-footer-box .img-element:hover{
                    border: 2px solid #1f2b88 !important;
                    }
                    .invoice-container .invoice-footer-box .label-element:hover{
                    border: 2px solid #1f2b88 !important;
                    }
                    .invoice-container .invoice-footer-box .paragraph-element:hover {
                    border: 2px solid #1f2b88 !important;
                    border-color: #1f2b88 !important;
                    border-width: 2px !important;
                    }
                    .invoice-container .invoice-footer-box .img-element:focus{
                    border: 2px solid #1f2b88;
                    cursor:pointer !important;
                    }
                    .invoice-container .invoice-footer-box .label-element:focus{
                    border: 2px solid #1f2b88;
                    cursor:pointer !important;
                    }
                    .invoice-container .invoice-footer-box .paragraph-element:focus {
                    border: 2px solid #1f2b88 !important;
                    border-color: #1f2b88 !important;
                    border-width: 2px !important;
                    }
                    
                    
                    .ui-icon, .ui-widget-content .ui-icon {
                    background-image: url('{!$Resource.UI_Icons}');
                    }
                    .clipboard{
                    background: #6cbb3c;
                    color: white;
                    text-align: center;
                    padding: 10px 40px 10px 40px;
                    position: absolute;
                    top: 40px;
                    left: 45%;
                    border-radius: 10px; 
                    display:none;
                    }
                    .clipboards{
                    background: #6cbb3c;
                    color: white;
                    text-align: center;
                    padding: 10px 40px 10px 40px;
                    position: absolute;
                    top: 40px;
                    left: 45%;
                    border-radius: 10px; 
                    display:none;
                    }
                    .GroupObjectError{
                    background: red;
                    color: white;
                    text-align: center;
                    padding: 10px 40px 10px 40px;
                    position: absolute;
                    top: 50px;
                    left: 45%;
                    border-radius: 10px; 
                    display:none;
                    }
                    .slds-scope {
                    line-height:unset;
                    }
                    .bottom-page-number {
                    position: absolute;
                    z-index: 1;
                    background: #00000017;
                    padding: 8px;
                    color: #000;
                    font-weight: 700;
                    left: 0px;
                    }
                    .ordlist{
                    width : 310px !important;  
                    }
                    
                    .Tableorder{  
                    border : 0px solid black !important;
                    }
                    
                    /*.left-menu-box ul li a.active-menu, .left-menu-box ul li a:focus, .left-menu-box ul li a:hover {
                    background: #fffff;
                    }*/
                    
                    
                    .slds-button--brand{
                    background-color: #187bcd !important;
                    border: #187bcd !important;
                    }
                    .left-menu-box ul li {
                    //display: block !important;
                    text-align: left !important;
                    padding-left :2px !important;
                    }
                    .dragUL li a {
                    background-color: #ffffff !important;
                    color: black !important;
                    text-decoration: none !important;
                    
                    }
                    .dragUL li a:hover {
                    background-color: rgba(1, 118, 211, 1) !important;
                    color: white !important;
                    text-decoration: none !important;
                    border-radius: 3px !important;
                    }
                    
                    .left-menu-box .style-box .style-header-box .left-box h2 {
                    margin: 0;
                    padding: 5px 0 0 0;
                    font-size: 18px;
                    color: #000000;
                    font-weight: bold;
                    }
                    .left-menu-box .style-box .style-header-box {
                    position: relative;
                    z-index: 1;
                    min-height: 40px;
                    display: table;
                    width: 100%;
                    background: #ffffff;
                    padding: 5px;
                    }
                    .left-menu-box {
                    position: fixed;
                    top: 0;
                    left: 0;
                    padding: 46px 0 0 0;
                    z-index: 2;
                    height: 100%;
                    //background: #223f79;
                    width: 0px;
                    }
                    .active-page {
                    background: #DCE1DE !important;
                    color: #1D3461!important;
                    }
                    .pagging-btn:hover{
                    background: #DCE1DE !important;
                    color: #1D3461!important;
                    }
                    .page-number:hover{
                    background: #DCE1DE !important;
                    color: #1D3461!important;
                    }
                    pagging-btn{
                    background: #DCE1DE !important;
                    }
                    
                    header .right-box .paging ul li a {
                    display: block;
                    background: #fff;
                    color: #1D3461;
                    border: 1px solid #1D3461;
                    padding: 7px;
                    text-decoration: none;
                    }
                    .left-menu-box .style-box .style-content-box {
                    position: relative;
                    width: 100%;
                    background: #ffffff;
                    padding: 5px;
                    height: 90% !important;
                    }
                    
                    .wrapper .form-control {
                    display: block;
                    width: 100%;
                    border: 1px solid #1D3461;
                    height: 34px;
                    padding: 6px 10px;
                    font-size: 14px;
                    line-height: 1.42857143;
                    background: #fff;
                    }
                    .mCustomScrollBox {
                    position: relative;
                    overflow: hidden;
                    height: 100%;
                    max-width: 100%;
                    outline: 0;
                    direction: ltr;
                    background: #DCE1DE;
                    }
                    .mCSB_scrollTools .mCSB_dragger .mCSB_dragger_bar {
                    background: #1D3461;
                    }
                    
                    .form-control {
                    display: block;
                    width: 100%;
                    border: 1px solid lightgray !important;
                    height: 34px;
                    padding: 6px 10px;
                    font-size: 13px !important;
                    border-radius: 5px;
                    background: white !important;
                    margin-top: 14px;
                    margin-left: 3px;
                    }
                    .hoverclass a{
                    background-color: #FFFFFF ;
                    color: #187bcd ;
                    }
                    .hoverclass div{
                    background-color: #FFFFFF ;
                    color: #187bcd ;
                    }
                    .hoverclass:hover{
                    background-color: #187bcd !important;
                    border-color: #187bcd !important;
                    color: white !important;
                    animation: pulsate 5s
                    ease-in-out;
                    }
                    @keyframes pulsate{
                    0%{
                    box-shadow:
                    0 0 25px white,
                    0 0 30px #187bcd,
                    2px 4px 5px 0px rgba(0,0,0,0.75);
                    }
                    }
                    .hoverclassFields a{
                    background-color: #FFFFFF ;
                    color: #dddddd ;
                    }
                    .hoverclassFields div{
                    background-color: #FFFFFF ;
                    color: #dddddd ;
                    }
                    .hoverclassFields:hover{
                    background-color: #dddddd !important;
                    border-color: #dddddd !important;
                    color: #000000 !important;
                    
                    }
                    
                    .hoverclass2 li{
                    background-color: #FFFFFF ;
                    color: #187bcd ;
                    }
                    .hoverclass2:hover{
                    background-color: #187bcd !important;
                    border-color: #187bcd !important;
                    color: white !important;
                    border-radius: 5px !important;
                    }
                    
                    #html_blocks{
                    display:block !important;
                    }
                    
                </style>  
            </head>
            <body >
                <apex:outputtext value="{!loadstring}" escape="false" />
                
                <apex:actionFunction name="Validates" action="{!validate}" reRender="NewFormId" oncomplete="Oncompletes()">
                    <apex:param name="finalstring" assignTo="{!finalstring}" value=""/>
                </apex:actionFunction>
                <apex:actionFunction name="checksyntaxforaggregate" action="{!checksyntaxforaggregate}" reRender="querychildFieldlabelBoxId" >	
                    <apex:param name="AggregateQuery" assignTo="{!aggregatequery}" value=""/>	
                </apex:actionFunction>
                
                <apex:actionFunction name="CLosevalidError" action="{!CLosevalidError}" reRender="NewFormId">
                </apex:actionFunction>
                
                <apex:actionFunction name="ShowFilters" action="{!showFilters}" reRender="FiltersId">
                    <apex:param name="SortOrder" assignTo="{!SortOrders}" value=""/>
                </apex:actionFunction>
                <apex:actionFunction name="saveDataString" status="status"  action="{!SaveData}"
                                     rerender="SaveId,TaxtId,aftersaveId"  oncomplete="afterSavecontainers()" > 
                    <apex:param name="finalstring" assignTo="{!finalstring}" value=""/>
                    <apex:param name="actionname" assignTo="{!ActionName}" value=""/>
                    <apex:param name="Chilclass" assignTo="{!ChildInnerClassJson}" value=""/>
                    <apex:param name="Headerstring" assignTo="{!Headerstring}" value=""/>
                    <apex:param name="FooterString" assignTo="{!FooterString}" value=""/>
                    <apex:param name="InvoiceString" assignTo="{!InvoiceString}" value=""/>
                    <apex:param name="pageSize" assignTo="{!pageSize}" value=""/>
                    <apex:param name="Calculate" assignTo="{!calculatedFields}" value=""/>
                </apex:actionFunction>   
                <apex:actionFunction name="saveEmailDataString" status="status"  action="{!SaveEmailData}"
                                     rerender="SaveId,TaxtId,aftersaveId"  oncomplete="afterSavecontainers()" >
                    <apex:param name="finalstring" assignTo="{!finalstring}" value=""/>
                    <apex:param name="actionname" assignTo="{!ActionName}" value=""/>
                    <apex:param name="Chilclass" assignTo="{!ChildInnerClassJson}" value=""/>
                    <apex:param name="pageSize" assignTo="{!pageSize}" value=""/>
                    <apex:param name="Calculate" assignTo="{!calculatedFields}" value=""/>
                     <apex:param name="Container" assignTo="{!widthContainer}" value=""/>
                </apex:actionFunction>   
                <apex:actionFunction name="getchildObjects" status="status"  action="{!parentToChildObject}"
                                     reRender="newfieldOutpanel,childPanelObject,childObjLbl,secondPage,pageBodyPanel,pageBodyPanelFormLabel,RecTypePanel"
                                     oncomplete="hideAllItems()" >
                    <apex:param name="selectedParentObject" assignTo="{!selectedParentObject}" value=""/>
                </apex:actionFunction>
                
                <apex:actionFunction name="getcalchildObjectFields" status="status"  action="{!getChildObjectFields}"	
                                     reRender="calculatedFIeldsMessageId"	
                                     oncomplete="boxDragdrop(),showcalObj()">  	
                    <apex:param name="selectedChildObject" assignTo="{!selectedChildObject}" value=""/>	
                    <apex:param name="SortOrder" assignTo="{!SortOrders}" value=""/>	
                </apex:actionFunction>   	
                
                <apex:actionFunction name="getcalInnerFields" status="status"  action="{!getcalInnerFields}"	
                                     reRender="calculatedFIeldsMessageId"	
                                     oncomplete="boxDragdrop()">  	
                    <apex:param name="calqueryId" assignTo="{!calqueryId}" value=""/>	
                    <apex:param name="CalculatedFieldIds" assignTo="{!CalculatedFieldIds}" value=""/>	
                    <apex:param name="CalculatedFieldtext" assignTo="{!CalculatedFieldtext}" value=""/>	
                </apex:actionFunction>   	
                
                <apex:actionFunction name="getchildObjectFields" status="status"  action="{!getChildObjectFields}"
                                     reRender="childFieldlabelBoxid,showchiIds"
                                     oncomplete="$('#childFieldlabelBox').show(),boxDragdrop(),getchildata()">
                    <apex:param name="selectedChildObject" assignTo="{!selectedChildObject}" value=""/>
                    <apex:param name="SortOrder" assignTo="{!SortOrders}" value=""/>
                </apex:actionFunction> 
                <apex:actionFunction name="groupgetchildObjectFields" status="status"  action="{!getChildObjectFields}"	
                                     reRender="showchiIds,groupchildFieldlabelBoxId"	
                                     oncomplete="$('#groupchildFieldlabelBox').show(),boxDragdrop(),groupgetchildata()">	
                    <apex:param name="selectedChildObject" assignTo="{!selectedChildObject}" value=""/>	
                    <apex:param name="SortOrder" assignTo="{!SortOrders}" value=""/>	
                </apex:actionFunction>  	
                
                <apex:actionFunction name="querygetchildObjectFields" status="status"  action="{!getChildObjectFields}"	
                                     reRender="showchiIds,querychildFieldlabelBoxId"	
                                     oncomplete="$('#querychildFieldlabelBox').show(),boxDragdrop(),querygetchildata()">	
                    <apex:param name="selectedChildObject" assignTo="{!selectedChildObject}" value=""/>	
                    <apex:param name="SortOrder" assignTo="{!SortOrders}" value=""/>	
                </apex:actionFunction>  
                
                <apex:actionFunction name="CopyLineItems" status="status"  action="{!CopyLineItems}"
                                     reRender="showchiIds,WrapIds,TaxtId"
                                     >
                    <apex:param name="SortOrder" assignTo="{!SortOrders}" value=""/>
                    <apex:param name="oldSortOrder" assignTo="{!OldSortorder}" value=""/>
                    <apex:param name="InvoiceString" assignTo="{!InvoiceString}" value=""/>
                </apex:actionFunction>
                <apex:actionFunction name="deleteTables" status="status"  action="{!deleteTables}"
                                     reRender="showchiIds"
                                     >
                    <apex:param name="sortorderIdlist" assignTo="{!deletestrings}" value="deletestrings"/>
                </apex:actionFunction>
                
                <apex:actionFunction name="savechilddetails" status="status"  action="{!savechilddetails}"
                                     reRender="childFieldlabelBoxid,showchiIds,TaxtId"
                                     oncomplete="boxDragdrop()">
                    <apex:param name="SortOrder" assignTo="{!SortOrders}" value=""/>
                    <apex:param name="parentObject" assignTo="{!parentObjects}" value=""/>
                    <apex:param name="childField" assignTo="{!childFields}" value=""/>
                    <apex:param name="AvchildField" assignTo="{!AvailableFieldNames}" value=""/>
                    <apex:param name="borders" assignTo="{!border}" value=""/>
                    <apex:param name="colors1" assignTo="{!color1}" value=""/>
                    <apex:param name="colors2" assignTo="{!color2}" value=""/>
                    <apex:param name="FieldLabels" assignTo="{!FieldLabels}" value=""/>
                    <apex:param name="renderFields" assignTo="{!renderFields}" value=""/>
                    <apex:param name="rendercondition" assignTo="{!rendercondition}" value=""/>
                    <apex:param name="finalstring" assignTo="{!finalstring}" value=""/>
                    <apex:param name="Headerstring" assignTo="{!Headerstring}" value=""/>
                    <apex:param name="FooterString" assignTo="{!FooterString}" value=""/>
                    <apex:param name="orderby" assignTo="{!orderby}" value=""/>
                    <apex:param name="height" assignTo="{!height}" value=""/>
                    <apex:param name="InvoiceString" assignTo="{!InvoiceString}" value=""/>
                    <apex:param name="groupby" assignTo="{!GroupBy}" value=""/>	
                    <apex:param name="aggregatequery" assignTo="{!aggregatequery}" value=""/>
                </apex:actionFunction>
                <!-- SPINNER -->
                <div id="spinner" class="slds-spinner_container slds-hide" >
                    <div role="status" class="slds-spinner slds-spinner--large slds-spinner--brand">
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                    </div> 
                </div>
                <!-- / SPINNER -->
                <div class="wrapper">
                    <header style="background:#ffffff;box-shadow:0px 2px 5px 0px rgba(0,0,0,0.75);z-index: 1000000;">
                        <div class="clipboard" id="clipboardId">Copied to Clipboard</div>
                        <div class="GroupObjectError" id="GroupObjectErrorId">Please select Group By</div>

                        <!-- Top Left hand side Invoice Generator Image -->
                        <div class="left-box" style="width:15%;padding-top:5px">
                            <img src="{!$Resource.JunoDoc}" alt="logo" style="width: 200px;" />
                        </div>
                        <!-- Top right hand side save, clear and print button -->
                        
                        <div class="right-box" style="display:inline-flex;font-size:11px;margin-top: 5px;position:sticky;">
                            
                            
                            
                            
                            
                            <apex:outputpanel Id="aftersaveId">
                                <ul style="{!IF(DocId != null,'display:inline-flex','display:none')}">
                                    <li>
                                        <button type="button" class="slds-button slds-button_outline-brand" onclick="validate()" style="width:max-content;margin-right:4px;position:sticky;">
                                            Validate</button>
                                    </li> 
                                    <li>
                                        <button type="button" class="slds-button slds-button_brand" onclick="afterSavecontainer('save')" style="width:max-content;margin-right:4px;position:sticky;">
                                            Save</button>
                                    </li>
                                    <li>
                                        <button type="button" class="slds-button slds-button_brand" onclick="afterSavecontainer('saveandclose')" style="width:max-content;margin-right:4px;position:sticky;" >
                                            Save and Close</button>
                                        
                                    </li>
                                    <li>
                                        <button type="button" class="slds-button slds-button_brand" onclick="afterSavecontainer('saveas')" style="width:max-content;margin-right:4px;position:sticky;">
                                            Save As</button>
                                        
                                    </li>
                                    <li>
                                        
                                        <apex:commandbutton styleclass="slds-button slds-button_brand" value="Close" action="{!close}" style="width:max-content;margin-right:4px;height:32px;position:sticky;" />
                                    </li> 
                                    <li><a  title="Clear Container" style="padding: 2px 0;" class=""><em class="" onclick="$('#settingsMessageId').show();"><i style="font-size: 26px;color:#1D3461;padding-top: 4px;padding-left: 3px;" class="fa fa-cog"></i></em></a></li>
                                    
                                </ul>
                                <ul style="{!IF(EmailId != null,'display:inline-flex','display:none')}">
                                    <li>
                                        <button type="button" class="slds-button slds-button_outline-brand" onclick="validate()" style="width:max-content;margin-right:4px;position:sticky;">
                                            Validate</button>
                                    </li> 
                                    <li>
                                        <button type="button" class="slds-button slds-button_brand" onclick="afterSaveEmailcontainer('save')" style="width:max-content;margin-right:4px;position:sticky;">
                                            Save</button>
                                    </li>
                                    <li>
                                        <button type="button" class="slds-button slds-button_brand" onclick="afterSaveEmailcontainer('saveandclose')" style="width:max-content;margin-right:4px;position:sticky;" >
                                            Save and Close</button>
                                        
                                    </li>
                                    <li>
                                        <button type="button" class="slds-button slds-button_brand" onclick="afterSaveEmailcontainer('saveas')" style="width:max-content;margin-right:4px;position:sticky;">
                                            Save As</button>
                                        
                                    </li>
                                    <li>
                                        <apex:commandbutton styleclass="slds-button slds-button_brand" value="Close" action="{!closeEmailTemplate}" style="width:max-content;margin-right:4px;height:32px;position:sticky;" />
                                    </li> 
                                    <li><a  title="Clear Container" style="padding: 2px 0;" class=""><em class="" onclick="$('#settingsMessageId').show();"><i style="font-size: 26px;color:#1D3461;padding-top: 4px;padding-left: 3px;" class="fa fa-cog"></i></em></a></li>
                                    
                                    
                                </ul>
                                <ul style="{!IF(DocId == null && EmailId == null,'display:inline-flex','display:none')}">
                                    <li>
                                        <button type="button" class="slds-button slds-button_outline-brand" onclick="validate()" style="width:max-content;margin-right:4px;position:sticky;">
                                            Validate</button>
                                    </li> 
                                    
                                    <li>
                                        <button type="button" class="slds-button slds-button_brand" onclick="afterSaveEmailcontainer('saveas')" style="width:max-content;margin-right:4px;position:sticky;" >
                                            Save Email Template</button> 
                                    </li>
                                    <li><a  title="Clear Container" style="padding: 2px 0;" class=""><em class="" onclick="$('#settingsMessageId').show();"><i style="font-size: 26px;color:#1D3461;padding-top: 4px;padding-left: 3px;" class="fa fa-cog"></i></em></a></li>
                                    
                                    
                                    <!--  <li><a id="btnPrint" title="Print"><em class="">
<i class="fa fa-print"></i>
</em></a>
</li> -->
                                </ul>
                            </apex:outputpanel>
                        </div>
                        
                        
                    </header>
                    <apex:outputpanel id="NewFormId">
                        <apex:outputpanel rendered="{!validError}">
                            <div id="validErrId" style="font-family:sans-serif;padding-top:8px;background:{!Color};color:white;text-align:center;width:100%;height:50px;font-size:16px;position:absolute;font-weight:bold;z-index:100000000001;">
                                {!validErrorMessage} 
                            </div>
                        </apex:outputpanel>
                    </apex:outputpanel>
                    <!-- Left side menu icons(controls, properties, section properties) -->
                    <aside class="left-menu-box">
                        
                        <ul class="top-menu-list" style = "margin-top:15px;display:none; right: 2px;position:fixed; height:80vh !important; width: 17%;padding:5px !important;box-shadow: rgb(0 0 0 / 63%) -3px 0px 15px;border-color:white !important">
                            <li><a  data-drawerid="html_blocks" id="btnControls" title="Controls"
                                   class="active-menu"><i class="fa fa-cog"></i></a></li>
                            <li><a  data-drawerid="property_blocks" id="btnProperties"
                                   title="Properties"><i class="fa fa-paint-brush"></i></a></li>
                            <li><a  data-drawerid="section_blocks" id="sectionProperties"
                                   title="Export Template"><i class="fa fa-file"></i></a></li>
                        </ul>
                        
                        <!-- Left hand side menu controls elements -->
                        <div id="html_blocks" class="slds-card style-box scroll-box" style="display:block !important">                
                            <!-- Elements -->
                            <div class="slds-tabs_default style-header-box">
                                <ul class="slds-tabs_default__nav" role="tablist">
                                    <li class="slds-tabs_default__item slds-is-active" title="Elements" role="presentation" >
                                        <a class="slds-tabs_default__link" role="tab" style = "margin: 0;padding: 5px 0 0 0;font-size: 14px;font-weight: bold;background:white !important" tabindex="0" aria-selected="true" aria-controls="Elements" id="Elements">Elements</a>
                                    </li>
                                </ul>
                            </div>
                            <!--<div class="style-header-box">
<div class="left-box">
<h2>Elements</h2>
</div>  
</div>-->
                            <div class="elements-content-box" style = "position: relative; font-size: 10px;width: 100%; background: #ffffff; padding: 0px; top:0px; bottom:12px;" > <!--style="height:35rem;overflow:hidden;overflow-y:scroll" -->
                                <apex:outputPanel rendered="{!selectedParentObject!=''}"> 
                                    <div class="slds" >
                                        <div class="slds-col--padded slds-large-size--1-of-1 slds-small-size--1-of-1" style="padding:0px">
                                            <div class="slds-grid slds-wrap ">
                                                
                                                
                                                <div class="slds-col--padded slds-large-size--1-of-1 slds-small-size--1-of-1" style="position: -webkit-sticky;position: sticky;top:20px;padding:0px">
                                                    
                                                    <div style="margin-bottom: 0px;">
                                                        <!--<div class="panel-heading ">
<h3 class="panel-title " style="display: inline;">
Form Controls
</h3>
<h3 class="slds-float--right" onclick="updatePage();" style="color: white;display: inline;cursor:pointer">Create/Update Page</h3>
</div>-->
                                                        <div > 
                                                            <!-- <table style="width: 100%;">
<tbody><tr > 
<td style="float:left;"><a onclick="createField()" style=" text-decoration: none;">Refresh</a></td><td style="float:right;"><a style=" text-decoration: none;" onclick="newFieldCreateObj('{!newFieldObjectId[selectedParentObject]}')" >New Field</a></td></tr><tr></tr></tbody></table>
-->
                                                            <br/>                                                                 
                                                            <span class="slds-box slds-box_x-small hoverclassFields" onclick="$('#ParentFIeldsMessage').show();" style = "top:0px;border:none !important;width:94% !important">
                                                                <!-- <input type="radio" id="unique-id-01-ParentFields" value="unique-id-01-ParentFields" onclick="$('#ParentFIeldsMessage').show();" name="unique-id-example1"/>-->
                                                                <label style = "display:inline-flex; width:92%; height:auto;padding:0px;">
                                                                    
                                                                    <span class="slds-icon_container slds-icon-standard-hierarchy" style = "cursor: pointer;margin-left:0px; text-decoration: none;width:9%;">
                                                                        <svg aria-hidden="true" class="slds-icon slds-icon--x-small">
                                                                            <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                                                                 xlink:href="/apexpages/slds/latest/assets/icons/standard-sprite/svg/symbols.svg#hierarchy">
                                                                            </use>
                                                                        </svg>
                                                                    </span>
                                                                    <h2 style="text-decoration: none;width:86%;" >
                                                                        &nbsp;&nbsp;
                                                                        
                                                                        <b>Parent Fields</b>
                                                                        
                                                                    </h2>
                                                                    <em style="float:right;color:white;text-align:right;font-size:10px;width:4%;"><i class="fa fa-chevron-right" ></i></em>
                                                                </label>
                                                            </span>
                                                            <br/><br/>
                                                            <span class="slds-box slds-box_x-small hoverclassFields" onclick="toggleLayout(this,'.parenttoggle')" onmouseover = "toggleLayout_show('.parenttoggle')"  onmouseout = "toggleLayout_hide('.parenttoggle')" style = "border:none !important;width:94% !important">
                                                                <!--<input type="radio" id="unique-id-01-parentLabel" value="unique-id-01-parentLabel" onclick="toggleLayout(this,'.parenttoggle')" name="unique-id-example1" />-->
                                                                <label style = "display:inline-flex; width:92%; height:auto; padding:0px;">
                                                                    <span style="cursor: pointer;margin-left:0px; text-decoration: none;width:9%;" class="slds-icon_container slds-icon-standard-metrics" >
                                                                        <svg aria-hidden="true" class="slds-icon slds-icon--x-small">
                                                                            <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                                                                 xlink:href="/apexpages/slds/latest/assets/icons/standard-sprite/svg/symbols.svg#metrics">
                                                                            </use>
                                                                        </svg>
                                                                    </span>
                                                                    <h2 style="text-decoration: none;width:86%;">
                                                                        &nbsp;&nbsp;
                                                                        <b >Fields</b>
                                                                        <!--<span class="fa fa-plus-circle" style="float:right;font-size:20px"></span>-->
                                                                    </h2>
                                                                    <em style="float:right;color:white;text-align:right;font-size:10px;width:4%;"><i class="fa fa-chevron-right" ></i></em>
                                                                </label>
                                                            </span><br/><br/>
                                                            
                                                            
                                                            <apex:outputPanel rendered="{!selectedParentObject!=''}"> 
                                                                <div class="parenttoggle slds-filters__header slds-box slds-grid " style="background:white;display:none;position: absolute;left: 201px; width: 110%;height:65vh; top: 2px; padding: 0px;box-shadow:rgb(0 0 0 / 33%) 0px 2px 6px">
                                                                    <br/>
                                                                    <input onkeydown="return (event.keyCode!=13);" class="slds-input" type="slds-text" style="width:100%;border:1px solid lightgray;height:34px;background:white;" placeholder="Search Fields" id="SelParentImp" onkeyup="sortRecords('SelParentUL','SelParentImp')"/>
                                                                </div>
                                                                <div class="modal-body parenttoggle " style="display:none;position: absolute;left: 203px; width: 106%;height:100%; top: 40px;">
                                                                    <div class="ParentObj" style="padding-right:4%">
                                                                        <ul id="SelParentUL" class="dragUL" style="overflow-y:auto;overflow-x:hidden;max-height:56vh !important; background:white;">
                                                                            <apex:variable var="count" value="{!1}"   /> 
                                                                            <apex:repeat value="{!parentobjectFields}" var="childfieldApiNames"> 
                                                                                
                                                                                <!--<li><a class="{!If(mpreqFields[childfieldApiNames]==true ,'reqFields','')} parentOBjectarr {!FieldsType}"  href="javascript:void(0)" id="{!selectedParentObject},{!childfieldApiNames}" >-->
                                                                                <li>
                                                                                    <a class="" href=""  style="padding:0px;padding-bottom:5px;padding-top:5px;">
                                                                                        
                                                                                        <label Id="copytext{!count}" style=" font-size: 11px; font-weight: 500;cursor: pointer;overflow: hidden;box-sizing: border-box;height:auto;"
                                                                                               data-title="Label Element" >
                                                                                            {!childfieldApiNames.parentLabel}
                                                                                            <span class=" slds-icon_container" title="Clone Control" onClick="ClipBoard('copytext{!count}', 'holdtext{!count}','{!childfieldApiNames.parentName}');" style = "padding-right: 6px;float:right;top:0px">
                                                                                                <svg aria-hidden="true" class="slds-icon slds-icon--xx-small" >
                                                                                                    <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                                                                                         xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#copy">
                                                                                                    </use>
                                                                                                </svg></span>
                                                                                            <!--<em style="float:right"><i class="fa fa-files-o" title="Copy to clipboard" style="padding-right: 10px;" onClick="ClipBoard('copytext{!count}', 'holdtext{!count}','{!childfieldApiNames.parentName}');"></i></em>-->
                                                                                        </label>
                                                                                        <input type="textarea" ID="holdtext{!count}" style="display:none;"></input>
                                                                                    
                                                                                </a>
                                                                        </li>
                                                                        <apex:variable value="{!count+1}" var="count"/>  <!--increment-->
                                                                    </apex:repeat>
                                                                    
                                                                    
                                                                </ul>
                                                                
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel> 
                                                    <!---Child Object Fields --->
                                                    <div style="width:100%" >
                                                        <span class="slds-box slds-box_x-small hoverclassFields" onclick="toggleLayout(this,'.childtoggle')" onmouseover = "toggleLayout_show('.childtoggle')" onmouseout = "toggleLayout_hide('.childtoggle')" style = "border:none !important;width:94% !important">
                                                            <!--<input type="radio" id="unique-id-01-RelatedObjects" value="unique-id-01-RelatedObjects" onclick="toggleLayout(this,'.childtoggle')" name="unique-id-example1" />-->
                                                            <label style = "display:inline-flex; width:92%; height:auto; padding:0px;">
                                                                <span class="slds-icon_container slds-icon-standard-feed" style="cursor: pointer;margin-left:0px; text-decoration: none;width:9%;">
                                                                    <svg aria-hidden="true" class="slds-icon slds-icon--x-small">
                                                                        <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                                                             xlink:href="/apexpages/slds/latest/assets/icons/standard-sprite/svg/symbols.svg#feed">
                                                                        </use>
                                                                    </svg>
                                                                </span>&nbsp;&nbsp;
                                                                <h2 style=" text-decoration: none;width:86%" >
                                                                    <b >Related Objects</b>
                                                                    <!-- <span class="fa fa-plus-circle" style="float:right;font-size:20px"></span>-->
                                                                </h2>
                                                                <em style="float:right;color:white;text-align:right;font-size:10px;width:4%;"><i class="fa fa-chevron-right" ></i></em>
                                                            </label>
                                                        </span><br/><br/>
                                                        <div class="childtoggle slds-filters__header slds-grid slds-box slds-has-divider--bottom-space" style="background:white;display:none;position: absolute;left: 201px; width: 110%;height:65vh; top: 2px;padding: 0px;box-shadow:rgb(0 0 0 / 33%) 0px 2px 6px">
                                                            <br/>
                                                            <input onkeydown="return (event.keyCode!=13);" class="slds-input" type="slds-text" style="width:100%;border:1px solid lightgray;height:34px;background:white;" placeholder="Search Related Objects" id="SelchildImp" onkeyup="sortchildRecords('SelchildUL','SelchildImp')"/> 
                                                        </div>
                                                        <div class="childtoggle modal-body " style="display:none;position: absolute;left: 203px; width: 108% !important;height:100%; top: 40px;">
                                                            <div class="ParentObj" style="padding-right:4%">
                                                                <ul id="SelchildUL" class="dragUL" style="overflow-y:auto;overflow-x:hidden;max-height:53vh; background:white;">
                                                                    <apex:variable var="i" value="{!1}"/>
                                                                    <apex:repeat value="{!childObjects}" var="recChild">
                                                                        <li Class="Containers hoverclass2" >
                                                                            
                                                                            <div class="Tableorder ordlist order-list snippet_item table-drag table-element item_element"
                                                                                 style="font-size:11px;font-weight: 500;height:1rem; min-height:auto;table-layout: fixed;border: 1px solid #bbbbbb; cursor: pointer;overflow: hidden;box-sizing: border-box;border-spacing: 0;text-align: center; width: 200px;"
                                                                                 data-title="Table Element" >    
                                                                                
                                                                                <div class="order-list" onclick="ShowpChildPop('{!JSENCODE(recChild)}',event)" style="width: 66%;table-layout: fixed;border-collapse: collapse;text-align:left;">
                                                                                    <!--  {!mapOBjectLabelNames[recChild]} -->
                                                                                    {!recChild}
                                                                                </div>            
                                                                            </div>
                                                                        </li>  
                                                                        <apex:variable var="i" value="{!i+1}"/>
                                                                    </apex:repeat>    
                                                                </ul>
                                                                
                                                            </div>
                                                            
                                                        </div><!---modal Body End --->
                                                    </div> 
                                                    
                                            <div style="width:100%" >
                                                        <span class="slds-box slds-box_x-small hoverclassFields" onclick="toggleLayout(this,'.groupchildtoggle')" onmouseover = "toggleLayout_show('.groupchildtoggle')" onmouseout = "toggleLayout_hide('.groupchildtoggle')" style = "border:none !important;width:94% !important">
                                                            <!--<input type="radio" id="unique-id-01-GroupBy" value="unique-id-01-GroupBy" onclick="toggleLayout(this,'.groupchildtoggle')" name="unique-id-example1" />-->
                                                            <label style = "display:inline-flex; width:92%; height:auto; padding:0px;">
                                                                
                                                                <span class="slds-icon_container slds-icon-standard-cms" style="cursor: pointer;margin-left:0px; text-decoration: none;width:9%;">
                                                                    <svg aria-hidden="true" class="slds-icon slds-icon--x-small">
                                                                        <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                                                             xlink:href="/apexpages/slds/latest/assets/icons/standard-sprite/svg/symbols.svg#cms">
                                                                        </use>
                                                                    </svg>
                                                                </span>&nbsp;&nbsp;
                                                                <h2 style= "text-decoration: none;width:86%" >
                                                                    <b > Group By </b>
                                                                    <!-- <span class="fa fa-plus-circle" style="float:right;font-size:20px"></span> -->
                                                                </h2>
                                                                <em style="float:right;color:white;text-align:right;font-size:10px;width:4%;"><i class="fa fa-chevron-right" ></i></em>
                                                            </label>
                                                        </span><br/><br/>
                                                        <div class="groupchildtoggle slds-box slds-filters__header slds-grid " style="display:none;position: absolute;left: 201px; width: 110%;height:65vh; top: 2px; padding:0px;box-shadow:rgb(0 0 0 / 33%) 0px 2px 6px">
                                                            <br/>
                                                            <input onkeydown="return (event.keyCode!=13);" class="slds-input" type="slds-text" style="width:102%;border:1px solid lightgray;height:34px; background:white;" placeholder="Search GroupBy Objects" id="groupSelchildImp" onkeyup="sortchildRecords('groupSelchildUL','groupSelchildImp')"/> 
                                                        </div>
                                                        <div class="groupchildtoggle modal-body " style="background:white;display:none;position: absolute;left: 203px; width: 108% !important;height:78%; top:40px;">
                                                            <div class="ParentObj" >
                                                                <ul id="groupSelchildUL" class="dragUL" style="overflow-y:auto;overflow-x:hidden;max-height:53vh; background:white;">
                                                                    <apex:variable var="i" value="{!1}"/>
                                                                    <apex:repeat value="{!childObjects}" var="recChild">
                                                                        <li Class="Containers hoverclass2" >
                                                                            
                                                                            <div class="Tableorder ordlist order-list snippet_item table-drag table-element item_element"
                                                                                 style="font-size: 11px; font-weight: 500;height:1rem; min-height:auto;table-layout: fixed;border: 1px solid #bbbbbb; cursor: pointer;overflow: hidden;box-sizing: border-box;border-spacing: 0;text-align: center; width: 310px;margin-right:125px;"
                                                                                 data-title="Table Element" >  
                                                                                
                                                                                <div class="order-list" onclick="groupShowpChildPop('{!JSENCODE(recChild)}',event)" style="width: 66%;table-layout: fixed;border-collapse: collapse;text-align:left;">
                                                                                    <!--  {!mapOBjectLabelNames[recChild]} -->
                                                                                    {!recChild}
                                                                                </div>            
                                                                            </div>
                                                                        </li>  
                                                                        <apex:variable var="i" value="{!i+1}"/>
                                                                    </apex:repeat>    
                                                                </ul>
                                                                
                                                            </div>
                                                            
                                                        </div><!---modal Body End --->
                                                    </div>  
                                                    <div style="width:100%" >
                                                        <span class="slds-box slds-box_x-small hoverclassFields" onclick="toggleLayout(this,'.querychildtoggle')" onmouseover = "toggleLayout_show('.querychildtoggle')" onmouseout = "toggleLayout_hide('.querychildtoggle')" style = "border:none !important;width:94% !important">
                                                            <!--<input type="radio" id="unique-id-01-Aggregate" value="unique-id-01-Aggregate" onclick="toggleLayout(this,'.querychildtoggle')" name="unique-id-example1" />-->
                                                            <label style = "display:inline-flex; width:92%; height:auto; padding:0px;">
                                                                <span class="slds-icon_container slds-icon-standard-merge" style="cursor: pointer;margin-left:0px; text-decoration: none;width:9%;">
                                                                    <svg aria-hidden="true" class="slds-icon slds-icon--x-small">
                                                                        <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                                                             xlink:href="/apexpages/slds/latest/assets/icons/standard-sprite/svg/symbols.svg#merge">
                                                                        </use>
                                                                    </svg>
                                                                </span>&nbsp;&nbsp;
                                                                <h2 style="text-decoration: none;width:86%;" >
                                                                    <b > Aggregate Query</b>
                                                                    <!-- <span class="fa fa-plus-circle" style="float:right;font-size:20px"></span>-->
                                                                </h2>
                                                                <em style="float:right;color:white;text-align:right;font-size:10px;width:4%;"><i class="fa fa-chevron-right" ></i></em>
                                                            </label>
                                                        </span><br/><br/>
                                                        <div class="querychildtoggle slds-box slds-filters__header slds-grid " style="background:white;display:none;position: absolute;left: 201px; width: 110%;height:65vh; top: 2px; padding:0px;box-shadow:rgb(0 0 0 / 33%) 0px 2px 6px">
                                                            <br/>
                                                            <input onkeydown="return (event.keyCode!=13);" class="slds-input" type="slds-text" style="width:100%;border:1px solid lightgray;height:34px; background:white;" placeholder="Search Aggregated Query Objects" id="querySelchildImp" onkeyup="sortchildRecords('querySelchildUL','querySelchildImp')"/> 
                                                        </div>
                                                        <div class="querychildtoggle modal-body " style="display:none;position: absolute;left: 203px; width: 108% !important;height:100%; top: 40px;">
                                                            <div class="ParentObj" >
                                                                <ul id="querySelchildUL" class="dragUL" style="overflow-y:auto;overflow-x:hidden;max-height:53vh; background:white;">
                                                                    <apex:variable var="i" value="{!1}"/>
                                                                    <apex:repeat value="{!childObjects}" var="recChild">
                                                                        <li Class="Containers hoverclass2" >
                                                                            
                                                                            <div class="Tableorder ordlist order-list snippet_item table-drag table-element item_element"
                                                                                 style="font-size: 11px; font-weight: 500;height:1rem; min-height:auto;width: 100%;table-layout: fixed;border: 1px solid #bbbbbb; cursor: pointer;overflow: hidden;box-sizing: border-box;border-spacing: 0;text-align: center !important; width: 310px;margin-right:125px;"
                                                                                 data-title="Table Element" >  
                                                                                
                                                                                <div class="order-list" onclick="queryShowpChildPop('{!JSENCODE(recChild)}',event)" style="width: 66%;table-layout: fixed;border-collapse: collapse;text-align:left;">
                                                                                    <!--  {!mapOBjectLabelNames[recChild]} -->
                                                                                    {!recChild}
                                                                                </div>            
                                                                            </div>
                                                                        </li>  
                                                                        <apex:variable var="i" value="{!i+1}"/>
                                                                    </apex:repeat>    
                                                                </ul>
                                                                
                                                            </div>
                                                            
                                                        </div><!---modal Body End --->
                                                    </div>                                             
                                                    <span class="slds-box slds-box_x-small hoverclassFields" onclick="toggleLayout(this,'.Logotoggle')" onmouseover = "toggleLayout_show('.Logotoggle')" onmouseout = "toggleLayout_hide('.Logotoggle')" style = "border:none !important;width:94% !important">
                                                        <!-- <input type="radio" id="unique-id-01-Images" value="unique-id-01-Images" onclick="toggleLayout(this,'.Logotoggle')" name="unique-id-example1" />-->
                                                        <label style = "display:inline-flex; width:92%; height:auto; padding:0px;">
                                                            
                                                            <span class="slds-icon_container slds-icon-standard-carousel" style = "cursor: pointer;margin-left:0px; text-decoration: none;width:9%;" >
                                                                <svg aria-hidden="true" class="slds-icon slds-icon--x-small">
                                                                    <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                                                         xlink:href="/apexpages/slds/latest/assets/icons/standard-sprite/svg/symbols.svg#carousel">
                                                                    </use>
                                                                </svg>
                                                            </span>
                                                            <h2 style="text-decoration: none;width:86%;" >
                                                                &nbsp;&nbsp;
                                                                <b >Images</b>
                                                                <!-- <span class="fa fa-upload" style="float:right;font-size:20px"></span> -->
                                                                
                                                                <!-- <span class="fa fa-plus-circle" style="float:right;font-size:20px"></span>-->
                                                            </h2>
                                                            <em style="float:right;color:white;text-align:right;font-size:10px;width:4%;"><i class="fa fa-chevron-right" ></i></em>
                                                        </label>
                                                    </span><br/><br/>
                                                    
                                                    <div class="Logotoggle modal-body " style="display:none;position: absolute;left: 201px; width: 110%;height:65vh; top: 2px; background:white;box-shadow:rgb(0 0 0 / 33%) 0px 2px 6px;padding:5px;border-radius:5px">
                                                        <div class="" style="overflow:hidden;overflow-y: auto;max-height: 61vh;">
                                                            <div style="display:inline-flex;padding:0px">
                                                                <input type="file" class="slds-file-selector__input" id="newAttFiles" accept="image/*" style="width:92%" onchange="addAttachment()"> </input>
                                                            <!--<a  data-title="upload Images" class="" onclick="addAttachment();"><em class=""><i class="fa fa-upload"></i></em></a>-->
                                                        </div>
                                                        
                                                        <ul id="SelLogoUL" class="dragUL" style = "max-height:390px; background:white;">
                                                            
                                                            <apex:repeat value="{!Uploadimages}" var="imgs">
                                                                <li>
                                                                    <div class='snippet_item img img-element item_element' id="ImageId{!imgs}" data-title="Image Element">
                                                                        
                                                                    </div>
                                                                </li>
                                                            </apex:repeat>
                                                            <apex:repeat value="{!lstOfDocs}" var="doc"> 
                                                                <li>
                                                                    <div class='snippet_item img img-element item_element' data-title="Image Element">
                                                                        <img src="{!sfdcURL & '/servlet/servlet.ImageServer?id=' & doc.Id & '&oid=' & organizationId}"  alt="your image"
                                                                             style="width: 100%;margin: 0 0 0px 0;padding:0px;cursor: grab;overflow: hidden;box-sizing: border-box;"/>
                                                                    </div>
                                                                </li> 
                                                            </apex:repeat>
                                                        </ul>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>       
                                    </div><!--panel default End --->   
                                    
                                </div><!--Panel Body End --->
                            </div>   
                        </div>
                    </apex:outputPanel>
                    
                     <div id="calculatedFIeldsMessage" class="slds" style="display:none">
                        <apex:outputpanel id="calculatedFIeldsMessageId">
                            <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open" style="z-index:90002">
                               <div class="slds-modal__container " style="width:60%;max-width:none">
                                    <div class="slds-modal__header" style = "background-color:#187bcd;color:white;height:auto!important">
                                        <h2 id="header43" class="slds-text-heading--medium"  style = "text-align:left;float:left;font-size:120%;width:90%;">
                                            Calculated Fields
                                        </h2>
                                    <span class="fa fa-close" style = "float:right; color:#fffff;padding-top:4px;font-size:98%;" onclick="$('#calculatedFIeldsMessage').hide();"></span>
                                    </div>
                                    <div class="slds-modal__content slds-p-around--medium">
                                        <div class="slds-grid slds-wrap">
                                            
                                            <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2">
                                                <div class="modal-body " style="display:flex">
                                                    <div id="hideId" style="display:block">
                                                        <label class="slds-text"> Select Object</label>
                                                        <select class="slds-input" name="Caliculate" id="selectedCalId" onchange="getobjects();">
                                                            
                                                            <option value="">--select one -- </option>
                                                            <apex:repeat value="{!childObjects}" var="childfieldApiNames" >
                                                                <option Value="{!childfieldApiNames}">{!childfieldApiNames}</option>
                                                            </apex:repeat>
                                                        </select>
                                                        
                                                    </div>
                                                    <div id="showId" style="display:flex"> 
                                                        <div class="slds-box slds-box__small ParentObj" style="padding-left:2px;padding-right:2px;padding-top:0px;padding-bottom:0px;width:45%;overflow-y:auto;">
                                                            <ul id="SelParentULs" class="dragUL" style="overflow-y:auto;max-height:900px">
                                                                <apex:variable var="count" value="{!1}"   /> 
                                                                <apex:repeat value="{!CalculateFields}" var="flds"> 
                                                                    <li>
                                                                        <a class="" href=""  style="padding:0px;padding-bottom:5px;padding-top:5px;">
                                                                            <label Id="copytext{!count}{!flds}" 
                                                                                   style=" font-size: 95%; font-weight: 500;padding:0px;cursor: pointer;overflow: hidden;box-sizing: border-box;height:auto;"
                                                                                   title="Label Element" class="slds-text">
                                                                                
                                                                                {!CalculateFieldsMap[flds]}
                                                                                
                                                                                
                                                                                
                                                                            </label>
                                                                            <em style="float:right;font-size:10px">
                                                                                <i class="fa fa-files-o" title="Copy to clipboard" style="padding-right: 10px;font-size:10px" 
                                                                                   onClick="ClipBoard('copytext{!count}{!flds}', 'holdtext{!count}{!flds}','{!flds}');">
                                                                                </i>
                                                                            </em>
                                                                            <input type="textarea" class = "slds-input" ID="holdtexts{!count}{!flds}" style="display:none;"></input>
                                                                    </a>
                                                            </li>
                                                            <apex:variable value="{!count+1}" var="count"/>  <!--increment-->
                                                        </apex:repeat>
                                                    </ul>
                                                </div>
                                                <div  style="width:55%;padding-left:10px;">
                                                    <div class="box-item">
                                                        <label class = "slds-text" for="CalculatedFieldIds">Calculated Name<em></em></label>
                                                        <div class = "slds-text" style="color:green;font-size:10px;font-weight:bold">
                                                            (Use [] for calculted Name.)
                                                        </div>
                                                        <input type="slds-text" id="CalculatedFieldtext" class="slds-input" style="height:auto"></input>   
                                                </div>
                                                
                                                <label class = "slds-text" for="CalculatedFieldIds">Calculated Field <em></em></label>
                                                <div class = "slds-text" style="color:green;font-size:10px;font-weight:bold">
                                                    (Use SUM(),AVG() for calculations.)
                                                </div>
                                                <div id="Calcontainers1" >
                                                    
                                                    <div class="box-item">
                                                        <textarea id="CalculatedFieldIds" rows="2" cols="50" class="slds-input slds-textarea" style="height:auto"></textarea>   
                                                    </div>
                                                    <div id="container4" class="slds-panel__body box-container" style="max-height:270px;overflow-y:auto">
                                                        <label class = "slds-text" for="renderIds">Select Field</label>
                                                        <select class="slds-input" name="Caliculate" id="calIds">
                                                            
                                                            <option value="">--select one -- </option>
                                                            <apex:repeat value="{!childObjectFields}" var="childfieldApiNames" >
                                                                <option Value="{!childfieldApiNames}">{!childObjectLabelsMap[childfieldApiNames]}</option>
                                                            </apex:repeat>
                                                        </select>
                                                        
                                                        <label class = "slds-text" for="SumAvgIds">Select Operator</label>
                                                        <select class="slds-input" name="Sum/Avg" id="calSumAvgIds">
                                                            <option value="=">equals</option>
                                                            <option value="!=">not equals</option>
                                                            <option value=">">greater than</option>
                                                            <option value="<">less than</option>
                                                        </select>
                                                        <label class = "slds-text" for="renderId">Enter Value</label>
                                                        <input type="text" class="slds-input" id="calrenderId"  /> 
                                                        <input type="button" value="Add" class="slds-button slds-button--brand"  onclick="AddcalField();"/>
                                                        
                                                        <label class = "slds-text" for="renderedFieldId">Calculated Query</label>
                                                        <textarea id="calFieldId" rows="2" cols="50" class="slds-input slds-textarea"></textarea>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                        </div> 
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-modal__footer">
                            <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="$('#calculatedFIeldsMessage').hide();"/> 
                            <input type="button" value="OK" class="slds-button slds-button--brand" onclick="AddToCalInner()"/> 
                        </div>
                    </div>
                </div>
                <div class="slds-backdrop slds-backdrop--open"></div>
                
            </apex:outputpanel>  
        </div>
        <!-- javasript data ---> 
        <!-- Label Html -->
        <span class="slds-box slds-box_x-small hoverclassFields" onclick="toggleLayout(this,'.Globaltoggle')" onmouseover = "toggleLayout_show('.Globaltoggle')" onmouseout = "toggleLayout_hide('.Globaltoggle')" style = "border:none !important;width:94% !important">
            <!-- <input type="radio" id="unique-id-01-Global" value="unique-id-01-Global" onclick="toggleLayout(this,'.Globaltoggle')" name="unique-id-example1" />-->
            <label style = "display:inline-flex; width:92%; height:auto; padding:0px;">
                
                <span class="slds-icon_container slds-icon-custom-custom68" style = "cursor: pointer;margin-left:0px; text-decoration: none;width:9%;">
                    <svg aria-hidden="true" class="slds-icon slds-icon--x-small">
                        <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                             xlink:href="/apexpages/slds/latest/assets/icons/custom-sprite/svg/symbols.svg#custom68">
                        </use>
                    </svg>
                </span>
                <h2 style="text-decoration: none;width:86%;" >
                    &nbsp;&nbsp;
                    <b >Global Variables</b>
                    <!-- <span class="fa fa-plus-circle" style="float:right;font-size:20px"></span>-->
                </h2> 
                <em style="float:right;color:white;text-align:right;font-size:10px;width:4%;"><i class="fa fa-chevron-right" ></i></em>
            </label>
        </span><br/><br/>
        <div class="Globaltoggle modal-body slds-box " id="GloablIds" style="padding-top: 5px;display:none;position: absolute;left: 201px; width: 110%;height:65vh; top: 2px; padding:5px;box-shadow:rgb(0 0 0 / 33%) 0px 2px 6px">
            <div class="ParentObj" >
                <ul id="SelParentULs" class="dragUL" style="overflow-y:auto;overflow-x:hidden;max-height:60vh !important; background:white;">
                    <apex:variable var="count" value="{!1}"   /> 
                    <apex:repeat value="{!UserfieldNames}" var="flds"> 
                        <li>
                            <a class="" href=""  style="padding:0px;padding-bottom:5px;padding-top:5px;">
                                <label Id="Newcopytext{!count}" 
                                       style=" font-size: 11px; font-weight: 500;cursor: pointer;overflow: hidden;box-sizing: border-box;height:auto;"
                                       data-title="Label Element" >
                                    {!flds}
                                    <span class=" slds-icon_container" onClick="ClipBoard('Newcopytext{!count}', 'Newholdtext{!count}','{!flds}');" style = "padding-right: 6px;float:right;top:0px">
                                        <svg aria-hidden="true" class="slds-icon slds-icon--xx-small">
                                            <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                                 xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#copy">
                                            </use>
                                        </svg></span>
                                    <!--<em style="float:right">
<i class="fa fa-files-o" title="Copy to clipboard" style="padding-right: 10px;" 
onClick="ClipBoard('Newcopytext{!count}', 'Newholdtext{!count}','{!flds}');">
</i>
</em>-->
                                </label>
                                <input type="textarea" ID="Newholdtext{!count}" style="display:none;"></input>
                        </a>
                </li>
                <apex:variable value="{!count+1}" var="count"/>  <!--increment-->
            </apex:repeat>
        </ul>
    </div>
</div>

<span class="slds-box slds-box_x-small hoverclassFields" onclick="toggleLayout(this,'.caltoggle')" onmouseover = "toggleLayout_show('.caltoggle')" onmouseout = "toggleLayout_hide('.caltoggle')" style = "border:none !important;width:94% !important">
    <!--<input type="radio" id="unique-id-01-Calculated" value="unique-id-01-Calculated" onclick="toggleLayout(this,'.caltoggle')" name="unique-id-example1" />-->
    <label style = "display:inline-flex; width:92%; height:auto; padding:0px;">
        
        <span class="slds-icon_container slds-icon-standard-topic2" style = "cursor: pointer;margin-left:0px; text-decoration: none;width:9%;">
            <svg aria-hidden="true" class="slds-icon slds-icon--x-small">
                <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                     xlink:href="/apexpages/slds/latest/assets/icons/standard-sprite/svg/symbols.svg#topic2">
                </use>
            </svg>
        </span>
        <h2 style="text-decoration: none;width:86%;" >
            &nbsp;&nbsp;
            <b >Calculated Fields</b>
            <!-- <span class="fa fa-plus-circle" style="float:right;font-size:20px"></span>-->
        </h2> 
        <em style="float:right;color:white;text-align:right;font-size:10px;width:4%;"><i class="fa fa-chevron-right" ></i></em>
    </label>
</span><br/><br/>

<div class="caltoggle modal-body slds-box " id="testCalculatedIds" style="display:none;position: absolute;left: 200px; width: 110%;height:65vh; top: 2px;padding:0px;background:white;box-shadow:rgb(0 0 0 / 33%) 0px 2px 6px">
    <div style="cursor:pointer;text-align:center;padding:8px;background:white;" class= "slds-box hoverclass" onclick="showcalcualtedFields()">
        + Add Calculated Fields
    </div>
    <ul id="CalculatedIds" class="dragUL" style="overflow-y:auto;overflow-x:hidden;max-height:60vh !important; background:white;">
        
    </ul>
</div>

<span class="slds-box slds-box_x-small hoverclassFields" onclick="toggleLayout(this,'.Paratoggle')" onmouseover = "toggleLayout_show('.Paratoggle')" onmouseout = "toggleLayout_hide('.Paratoggle')" style = "border:none !important;width:94% !important">
    <!--<input type="radio" id="unique-id-01-Text" value="unique-id-01-Text" onclick="toggleLayout(this,'.Paratoggle')" name="unique-id-example1" />-->
    <label style = "display:inline-flex; width:92%; height:auto; padding:0px;">
        
        <span class="slds-icon_container slds-icon-custom-custom83" style = "cursor: pointer;margin-left:0px; text-decoration: none;width:9%;">
            <svg aria-hidden="true" class="slds-icon slds-icon--x-small">
                <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                     xlink:href="/apexpages/slds/latest/assets/icons/custom-sprite/svg/symbols.svg#custom83">
                </use>
            </svg>
        </span>
        <h2 style="text-decoration: none;width:86%;" >
            &nbsp;&nbsp;
            <b >Text</b>
            <!-- <span class="fa fa-plus-circle" style="float:right;font-size:20px"></span>-->
        </h2>
        <em style="float:right;color:white;text-align:right;font-size:10px;width:4%;"><i class="fa fa-chevron-right" ></i></em>
    </label>
</span><br/><br/>
<div class="Paratoggle modal-body" style="display:none;position: absolute;left: 200px; width: 110%;height:100%; top: 2px;padding:5px;border-radius:5px;box-shadow:rgb(0 0 0 / 33%) 0px 2px 6px">
    
    
    <!-- Paragraph html -->
    <div class = "slds-box slds-box__small" style = "background:white;">
        
        
        <!-- Paragraph html -->
        <div class='snippet_item paragraph-element item_element' contenteditable="true"
             style="font-family: sans-serif;padding:0px;cursor: grab;background:white;overflow: hidden; font-size:11px;box-sizing: border-box;height:30px; width: 160px; text-align: left;"
             data-title="Paragraph Element">Multiple line text box like paragraph</div>
        <!-- Paragraph html -->
        
    </div></div>
<!-- Header html -->
<!-- <h1 class='snippet_item h1-element item_element bold-label-header header-element'
contenteditable="true"
style="font-family: sans-serif; padding:0px;font-size:32px; font-weight: 500;cursor: grab;overflow: hidden;box-sizing: border-box;" title="H1 Element">
This is for H1 Style</h1>

<h2 class='snippet_item h2-element item_element bold-label-header header-element'
contenteditable="true"
style="font-family: sans-serif;padding:0px; font-size:28px; font-weight: 500;cursor: grab;overflow: hidden;box-sizing: border-box;" title="H2 Element">
This is for H2 Style</h2>

<h3 class='snippet_item h3-element item_element bold-label-header header-element'
contenteditable="true"
style="font-family: sans-serif;padding:0px; font-size:24px; font-weight: 500;cursor: grab;overflow: hidden;box-sizing: border-box;" title="H3 Element">
This is for H3 Style
</h3>

<h4 class='snippet_item h4-element item_element bold-label-header header-element'
contenteditable="true"
style="font-family: sans-serif;padding:0px; font-size:20px; font-weight: 500;cursor: grab;overflow: hidden;box-sizing: border-box;" title="H4 Element">
This is for H4 Style
</h4>
<h5 class='snippet_item h5-element item_element bold-label-header header-element'
contenteditable="true"
style="font-family: sans-serif;padding:0px; font-size:16px; font-weight: 500;cursor: grab;overflow: hidden;box-sizing: border-box;" title="H5 Element">
This is for H5 Style
</h5> -->

<!-- Image html -->

<span class="slds-box slds-box_x-small hoverclassFields" onclick="toggleLayout(this,'.Tabletoggle')" onmouseover = "toggleLayout_show('.Tabletoggle')" onmouseout = "toggleLayout_hide('.Tabletoggle')" style = "border:none !important;width:94% !important">
    <!--<input type="radio" id="unique-id-01-Table" value="unique-id-01-Table" onclick="toggleLayout(this,'.Tabletoggle')" name="unique-id-example1" />-->
    <label style = "display:inline-flex; width:92%; height:auto; padding:0px;">
        
        <span class="slds-icon_container slds-icon-custom-custom40" style = "cursor: grab;margin-left:0px; text-decoration: none;width:9%;" >
            <svg aria-hidden="true" class="slds-icon slds-icon--x-small">
                <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                     xlink:href="/apexpages/slds/latest/assets/icons/custom-sprite/svg/symbols.svg#custom40">
                </use>
            </svg>
        </span>
        <h2 style="text-decoration: none;width:86%;" >
            &nbsp;&nbsp;
            <b >Table</b>
            <!--<span class="fa fa-plus-circle" style="float:right;font-size:20px"></span>-->
        </h2>
        <em style="float:right;color:white;text-align:right;font-size:10px;width:4%;"><i class="fa fa-chevron-right" ></i></em>
    </label>
</span>
<!-- Table html -->
<!-- <div class='snippet_item table-drag table-element item_element' style="font-family: sans-serif;border: 1px solid #bbbbbb; cursor: grab;overflow: hidden;margin:0 0 15px 0;box-sizing: border-box;" title="Table Element"> -->
<div class="Tabletoggle modal-body" style="display:none;position: absolute;left: 200px; width: 110%;height:100%; top: 2px;box-shadow:rgb(0 0 0 / 33%) 0px 2px 6px;padding:5px;border-radius:5px">
    <div class = "slds-box slds-box__small" style = "background:white;width: 100%;max-height:50%;">
        <table class="order-list snippet_item table-drag table-element item_element"
               style="height:auto; width: auto;font-family: sans-serif;border: 1px solid #bbbbbb; cursor: grab;padding:0px;overflow: hidden;box-sizing: border-box;border-spacing: 0;text-align: center;font-size:12px;border-collapse:collapse;"
               data-title="Table Element">	
            
            <tbody style="box-sizing: border-box;">
                <tr class="hover-row" style="background-color:#ffffff;box-sizing: border-box;">
                    <td class="item-label"
                        style="overflow-wrap: break-word;border-collapse: collapse;border: 1px solid #bbbbbb;height:auto;width:53px;font-weight: 400;box-sizing: border-box;padding: 0px;"
                        data-title="Td Element">
                        <div class="td-label" style="display: inline-block;box-sizing: border-box;width: inherit;">Enter Value
                        </div>
                    </td>
                    <td class="item-label"
                        style="overflow-wrap: break-word;border-collapse: collapse;border: 1px solid #bbbbbb;height:auto;width:53px;font-weight: 400;box-sizing: border-box;padding: 0px;"
                        data-title="Td Element">
                        <div class="td-label" style="display: inline-block;box-sizing: border-box;width: inherit;">Enter Value
                        </div>
                    </td>
                    <td class="item-label"
                        style="overflow-wrap: break-word;border-collapse: collapse;border: 1px solid #bbbbbb;height:auto;width:53px;font-weight: 400;box-sizing: border-box;padding: 0px;"
                        data-title="Td Element">
                        <div class="td-label" style="display: inline-block;box-sizing: border-box;width: inherit;">Enter Value
                        </div>
                    </td>
                </tr>
                <tr class="hover-row" style="background-color:#ffffff;box-sizing: border-box;">
                    <td class="item-label"
                        style="overflow-wrap: break-word;border-collapse: collapse;border: 1px solid #bbbbbb;height:auto;width:53px;font-weight: 400;box-sizing: border-box;padding: 0px;"
                        data-title="Td Element">
                        <div class="td-label" style="display: inline-block;box-sizing: border-box;width: inherit;">Enter Value</div>
                    </td>
                    <td class="item-label"
                        style="overflow-wrap: break-word;border-collapse: collapse;border: 1px solid #bbbbbb;height:auto;width:53px;font-weight: 400;box-sizing: border-box;padding: 0px;"
                        data-title="Td Element">
                        <div class="td-label" style="display: inline-block;box-sizing: border-box;width: inherit;">Enter Value</div>
                    </td>
                    <td class="item-label"
                        style="overflow-wrap: break-word;border-collapse: collapse;border: 1px solid #bbbbbb;height:auto;width:53px;font-weight: 400;box-sizing: border-box;padding: 0px;"
                        data-title="Td Element">
                        <div class="td-label" style="display: inline-block;box-sizing: border-box;width: inherit;">Enter Value</div>
                    </td>
                </tr>
                <tr class="hover-row" style="background-color:#ffffff;box-sizing: border-box;">
                    <td class="item-label"
                        style="overflow-wrap: break-word;border-collapse: collapse;border: 1px solid #bbbbbb;height:auto;width:53px;font-weight: 400;box-sizing: border-box;padding: 0px;"
                        data-title="Td Element">
                        <div class="td-label" style="display: inline-block;box-sizing: border-box;width: inherit;">Enter Value</div>
                    </td>
                    <td class="item-label"
                        style="overflow-wrap: break-word;border-collapse: collapse;border: 1px solid #bbbbbb;height:auto;width:53px;font-weight: 400;box-sizing: border-box;padding: 0px;"
                        data-title="Td Element">
                        <div class="td-label" style="display: inline-block;box-sizing: border-box;width: inherit;">Enter Value</div>
                    </td>
                    <td class="item-label"
                        style="overflow-wrap: break-word;border-collapse: collapse;border: 1px solid #bbbbbb;height:auto;width:53px;font-weight: 400;box-sizing: border-box;padding: 0px;"
                        data-title="Td Element">
                        <div class="td-label" style="display: inline-block;box-sizing: border-box;width: inherit;">Enter Value</div>
                    </td>
                </tr>
            </tbody>
        </table>
        <!-- Section html -->
        <div data-title="Section Element" class='snippet_section sec-div section-element'
             style="width: 100%;height:100px;padding:0px;box-sizing: border-box;width:310px;">
            
            <i class="fa fa-pencil" onclick="sectionShowpChildPop(event)" ></i>
            
        </div>
        
    </div>
</div>
</div>
</div>
<!-- End of Controls Element html -->

<!-- Left hand side Property block html Start -->
<div id="property_blocks" class="slds-card style-box scroll-box" style = "margin-top:15px;display:none; left: 85% !important;position:fixed; height:80vh !important; width: 16%;padding:5px !important;box-shadow: rgb(0 0 0 / 63%) -3px 0px 15px;border-color:white !important">
    <div class="slds-tabs_default style-header-box" style = "height:auto">
        <div style = "display:inline-flex;width:100%">
            
            <ul class="slds-tabs_default__nav" role="tablist" style="width:100%">
                <li class="slds-tabs_default__item slds-is-active" title="Elements" role="presentation" style="width:54%">
                    <div class="left-box">
                        <a class="slds-tabs_default__link" role="tab" style = "margin: 0;padding: 5px 0 0 0;font-size: 12px;font-weight: bold;background:white !important" tabindex="0" aria-selected="true" aria-controls="propertyHeader">Elements</a>
                    </div>
                    
                </li>
                <li style="width:12%">
                    <button type="button" class="slds-button slds-button_small slds-button_icon-container btn-clone" title="Clone Control" style = "top:10px;">
                        <svg aria-hidden="true" class="slds-button_icon slds-icon--xx-small" title="Clone Control">
                            <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                 xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#copy">
                            </use>
                        </svg></button>
                </li>
                <li style="width:12%">
                    <button type="button" class="slds-button slds-button_icon-container btn-delete" title="Delete Control" style = "top:10px;">
                        <svg aria-hidden="true" class="slds-button_icon slds-icon--xx-small">
                            <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                 xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#delete">
                            </use>
                        </svg></button>
                </li>
                <li style="width:12%">
                    <button type="button" class="slds-button slds-button_icon-container btn-Close" title="close Control" style = "top:10px;" onclick = "closeTableElements()">
                        <svg aria-hidden="true" class="slds-button_icon slds-icon--xx-small">
                            <use xmlns:xlink=" http://www.w3.org/1999/xlink"
                                 xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#close">
                            </use>
                        </svg></button>
                </li>
            </ul>
        </div>
    </div>
    <!-- Properties html -->
    <div class="style-content-box " style="overflow-y:auto;height:90% !important">
        <!-- textarea Property -->
        <div class="form-group H1 H2 H3 H4 H5" style="display: none;">
            <label class="slds-form-element__label" >Value:</label>
            <div class="slds-form-element__control">
                <input type="text"  data-style="singleline" class="slds-input form-control text-property" />
            </div>
        </div>
        <div class="form-group Label Td Paragraph" style="display: none;">
            <label class="slds-form-element__label" >Value:</label>
            <textarea id="textAreaProperty" data-style="multiline" name="Text Area"
                      class="slds-textarea form-control textarea-property text-property"></textarea>
        </div><br/>
        
        <!-- Check box Property - Bold, Italic -->
        <div style="display: none;" class="form-group Label Td Paragraph">
            <label class="custom-radio-check chkBold" >
                <input type="checkbox" data-style="font-weight" class="form-control" value="bold"
                       name="bold" />
                <em></em>
                <span>Bold</span>
            </label>
            <label class="custom-radio-check">
                <input type="checkbox" data-style="font-style" class="form-control" value="italic"
                       name="italic" />
                <em></em>
                <span>Italic</span>
            </label>
        </div>
        
        <!-- Font-family Property -->
        <div style="display: none;" class="slds-form-element form-group Label Paragraph Table H1 H2 H3 H4 H5 Td">
            <label class="slds-form-element__label">Font Family:</label>
            <div class="slds-form-element__control">
                <div class="slds-select_container">
                    <select id="themeFont" class="slds-select form-control" data-style="font-family">
                        <option value="Arial Unicode MS">Arial Unicode MS</option>
                        <option value="sans-serif">sans-serif</option>
                        <option value="SansSerif">SansSerif</option>
                        <option value="Dialog">Dialog</option>
                        <option value="serif">serif</option>
                        <option value="Times">Times</option>
                        <option value="monospace">monospace</option>
                        <option value="Courier">Courier</option>
                        <option value="Monospaced">Monospaced</option>
                        <option value="DialogInput">DialogInput</option>
                        <option value="Verdana">Verdana</option>
                    </select>
                </div>
            </div>
        </div>
        
        <!-- Padding Property -->
        <div style="display: none;" class=" slds-form-element form-group Label Paragraph Table H1 H2 H3 H4 H5 Td">
            <label class="slds-form-element__label">Padding:</label>
            <input type="number" class="slds-input slds-form-element__control form-control" data-style="padding" id="padding-property"
                   placeholder="10" />
        </div>
        
        <!-- Font Size Property -->
        <div style="display: none;" class="slds-form-element form-group Label Paragraph Table Td">
            <label class="slds-form-element__label" >Font Size:</label>
            <div class="slds-form-element__control">
                <div class="slds-select_container">
                    <select id="fontSize" class="slds-select form-control" data-style="font-size">
                        <option value="8px">8</option>
                        <option value="9px">9</option>
                        <option value="10px">10</option>
                        <option value="11px">11</option>
                        <option value="12px">12</option>
                        <option value="14px">14</option>
                        <option value="16px">16</option>
                        <option value="18px">18</option>
                        <option value="20px">20</option>
                        <option value="22px">22</option>
                        <option value="24px">24</option>
                        <option value="26px">26</option>
                        <option value="28px">28</option>
                        <option value="36px">36</option>
                        <option value="48px">48</option>
                        <option value="72px">72</option>
                    </select>
                </div>
            </div>
        </div>
        
        <!-- Font color Property -->
        <div style="display: none;" class="form-group Label Paragraph Table Td">
            <label >Font Color:</label>
            <input type="color" id="fontColor" data-style="color" class="form-control" value="#FF0000" />
        </div>
        
        <!-- Background color Property -->
        <div style="display: none;" class="form-group Label Paragraph  H1 H2 H3 H4 H5 Section Td">
            <label >Background Color:</label>
            <input type="color" id="backgroundColor" data-style="background-color" name="backgroundColor"
                   class="form-control" value="#ffffff" />
        </div>
        
        
        <!-- Horizontal and Vertical Line Property -->
        <div style="display: none;" class="form-group line">
            <label >Line Style:</label>
            <div class="form-group">
                <label class="custom-radio-check">
                    <input type="radio" name="line-style" data-style="line" class="form-control"
                           value="border-bottom" /><em></em><span>Horizontal</span></label>
                <label class="custom-radio-check">
                    <input type="radio" name="line-style" data-style="line" class="form-control"
                           value="border-left" /><em></em><span>Vertical</span></label>
            </div>
        </div>
        
        <!-- Border Property -->
        <div style="display: none;"
             class="slds-form-element form-group Label Paragraph line Table Image H1 H2 H3 H4 H5 Section Td">
            <!-- Border style Property -->
            <!--<div class="form-group">
<label>Border Style:</label>
<select id="borderStyle" data-style="border-style" class="form-control">
<option value="hidden">Hidden</option>
<option value="dotted">Dotted</option>
<option value="double">Double</option>
<option value="solid">Solid</option>
<option value="dashed">Dashed</option>
</select>
</div>-->
            
            <div class="slds-form-element form-group ">
                <label class="slds-form-element__label" >Border Style:</label>
                <div class="slds-form-element__control">
                    <div class="slds-select_container">
                        <select id="borderStyle" class="slds-select form-control" data-style="border-style">
                            <option value="hidden">Hidden</option>
                            <option value="dotted">Dotted</option>
                            <option value="double">Double</option>
                            <option value="solid">Solid</option>
                            <option value="dashed">Dashed</option>
                        </select>
                    </div>
                </div>
            </div>
            
            
            <!-- Border width Property -->
            <div class="slds-form-element form-group ">
                <label class="slds-form-element__label" >Border Width:</label>
                <div class="slds-form-element__control">
                    <div class="slds-select_container">
                        <select id="borderWidth" class="slds-select form-control" data-style="border-width">
                            <option value="0px">0</option>
                            <option value="1px">1</option>
                            <option value="2px">2</option>
                            <option value="3px">3</option>
                            <option value="4px">4</option>
                            <option value="5px">5</option>
                            <option value="6px">6</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Border color Property -->
            <div class="form-group">
                <label >Border Color:</label>
                <input type="color" id="borderColor" data-style="border-color" class="form-control"
                       value="" />
            </div>
        </div>
        
        <!-- Table header color -->
        <div style="display: none;" class="form-group Table ">
            <label>Header Color:</label>
            <input type="color" data-style="header-color" class="form-control" value="#ffffff" />
        </div>
        
        <!-- Table alternate row color 1 -->
        <div style="display: none;" class="form-group Table">
            <label >Color 1:</label>
            <input type="color" data-style="odd-row-color" class="form-control" value="#ffffff" />
        </div>
        
        <!-- Table alternate row color 2 -->
        <div style="display: none;" class="form-group Table">
            <label >Color 2:</label>
            <input type="color" data-style="even-row-color" class="form-control" value="#ffffff" />
        </div>
        
        <!-- Table Number of Row -->
        <div style="display: none;" id="hiderow" class="form-group Table">
            <label >Number of Row:</label>
            <input type="number" class="form-control" data-style="noofrowcolumn" min="1" id="no-row"
                   placeholder="0" />
        </div>
        
        <!-- Table Number of Column -->
        <div style="display: none;" id="hidecol" class="form-group Table">
            <label >Number of Column:</label>
            <input type="number" class="form-control" data-style="noofrowcolumn" min="1" id="no-column"
                   placeholder="0" />
        </div>
        
        <!-- Table Grid -->
        <div style="display: none;" class="form-group Table">
            <label>Table Grid</label>
            <div class="form-group">
                <label class="custom-radio-check">
                    <input type="radio" name="tableborder" data-style="border" class="form-control"
                           value="yes" /><em></em><span>Yes</span></label>
                <label class="custom-radio-check">
                    <input type="radio" name="tableborder" data-style="border" class="form-control"
                           value="no" /><em></em><span>
                    No</span></label>
            </div>
        </div>
        
        
        
        <div style="display: none;" class="form-group Table Label Paragraph Td">
            <label >Horizontal Alignment</label>
            <div class="form-group">
                <label class="custom-radio-check">
                    <input type="radio" name="btnradio" data-style="text-align" class="form-control"
                           value="left" /><em></em><span>Left</span></label>
                <label class="custom-radio-check">
                    <input type="radio" name="btnradio" data-style="text-align" class="form-control"
                           value="center" /><em></em><span>
                    Center</span></label>
                <label class="custom-radio-check">
                    <input type="radio" name="btnradio" data-style="text-align" class="form-control"
                           value="right" /><em></em><span>
                    Right</span></label>
            </div>
        </div>
        
        <!-- Text Vertical Alignment Property -->
        <div style="display: none;" class="form-group Td">
            <label>Vertical Alignment</label>
            <div class="form-group">
                <label class="custom-radio-check">
                    <input type="radio" name="btnverticalradio" data-style="vertical-align"
                           class="form-control" value="top" /><em></em><span>Top</span></label>
                <label class="custom-radio-check">
                    <input type="radio" name="btnverticalradio" data-style="vertical-align"
                           class="form-control" value="middle" /><em></em><span>
                    Middle</span></label>
                <label class="custom-radio-check">
                    <input type="radio" name="btnverticalradio" data-style="vertical-align"
                           class="form-control" value="bottom" /><em></em><span>
                    Bottom</span></label>
            </div>
        </div>      
    </div>
</div>
<!-- End of Properties html -->

<!-- Start section block html -->
<div id="section_blocks" class="slds-card style-box scroll-box" style="display:none;">
    <div class="style-header-box" style="background: white;">
        <div class="left-box">
            <h2>Export Invoice</h2>
        </div>
        
        <!-- Add page html and add section html button -->
        <div class="right-box">
            <button type="button" class="round-btn btn-add-page" title="Add Page HTML"><em
                                                                                           class=""><i class="fa fa-file-o"></i></em></button>
            <button type="button" class="round-btn btn-add-section" title="Add Section HTML"><em
                                                                                                 class=""><i class="fa fa-plus-square"></i></em></button>
        </div>
    </div>
    <!-- Property -->
    <div class="style-content-box">
        <!-- textarea for add section and html -->
        <div class="form-group field-element">
            <apex:outputpanel id="TaxtId">
                <textarea id="txtArea" name="Text Area" class="form-control"
                          placeholder="Please Enter HTML">{!DocTemplateBody}</textarea>
            </apex:outputpanel>
        </div>
        
        <!-- 
<div class="form-group field-element container-style">
<label>Container Height:</label>
<input onkeydown="return (event.keyCode!=13);" type="text" class="form-control height-property" />
</div>


<div class="form-group field-element container-style">
<label>Container width:</label>
<input onkeydown="return (event.keyCode!=13);" type="text" class="form-control width-property" />
</div> -->
    </div>
</div>
<!-- End of section block html -->
</aside>
<!-- End of left side menu -->


<section class="main-content" id="invoiceId">
    
    <div class="invoice-container" id="page1" style="width:842px">
        
        <div class="invoice-content-box tabcontent actives" id="content_area" style="height: 1191px;">
            
            
        </div>
        
    </div>
</section>

<!-- End main container html -->
</div>
<input type="hidden" id="Idvalue" /> 
<input type="hidden" id="oldIdvalue" /> 
<input type="hidden" id="childObjName" value="{!selectedChildObject}"/>
<!--- Static Label ---> 

<!--- New COde -->
<div id="settingsMessageId" class="slds" style="display: none;">
    <apex:outputpanel id="settingsMessage">
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open" style="z-index: 10000;">
            <div class="slds-modal__container" style = "width:40% !important">
                <div class="slds-modal__header" style = "background-color:#187bcd;color:white;">
                    <h2 id="header43" class="slds-text-heading--medium" style="text-align:left;float:left;font-size:120%;width:100%;">
                        Add Formats
                        <span class="fa fa-close" style = "float:right; color:#ffffff;padding-top:4px;font-size:98%;padding-right:10px;" onclick="$('#settingsMessageId').hide();"></span>
                    </h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium" style = "font-size:85%">
                    <div class="slds-grid slds-wrap ">
                        <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2">    
                            <label>Date Format:</label>
                            <apex:selectList size="1" styleclass="slds-input" value="{!dateFormats}" multiselect="false">
                                <apex:selectOptions value="{!dateFormatLists}"/>
                            </apex:selectList>
                            
                        </div>
                        <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2" style="margin-top:1em">    
                            <label>Currency Format:</label>
                            <apex:selectList size="1" styleclass="slds-input" value="{!CurrencyFormat}" multiselect="false">
                                <apex:selectOptions value="{!CurrencyFormatLists}"/>
                            </apex:selectList>
                            
                        </div>
                        
                        <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2" style="margin-top:1em">    
                            <label >Currency Symbol:</label>
                            <apex:input Type="text" value="{!currencySymbol}" styleclass="slds-input" />
                            
                        </div>
                        <!-- <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2">    
<label>Number Format:</label>
<apex:selectList size="1" styleclass="slds-input" value="{!NumberFormat}" multiselect="false">
<apex:selectOptions value="{!NumberFormatLists}"/>
</apex:selectList>

</div> -->
                    </div>
                </div>
                <div class="slds-modal__footer">
                    <input type="button" value="Save" class="slds-button slds-button--brand" style = "font-size:110%" onclick="$('#settingsMessageId').hide();"/>
                    <input type="button" value="Cancel" class="slds-button slds-button--brand" style = "font-size:110%" onclick="$('#settingsMessageId').hide();"/>
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open" style="z-index: 9996;"></div>
        
    </apex:outputpanel>     
</div>
<!-- End Code -->
<div id="childFieldlabelBox" class="slds" style="display: none;">
    <apex:outputPanel id="childFieldlabelBoxid">
        <apex:inputHidden id="childFieldsJSON" value="{!LabelsMapJson}"/>
        <input type="hidden" id="parentName" value="{!selectedParentObject}"/>
        
        
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container customClass" style = "width:40% !important">
                <div class="slds-modal__header" style = "background-color:#187bcd;color:white;">
                    <h2 id="header43" class="slds-text-heading--medium" style = "text-align:left;float:left;font-size:120%;width:90%;">
                        Select Fields
                    </h2>
                    <span class="fa fa-close" style = "float:right;padding-top:4px;font-size:98%;" onclick="$('#childFieldlabelBox').hide();"></span>
                </div>
                
                <div class="slds-modal__content slds-p-around--medium" style = "height:500px;overflow-y:hidden;">
                    <div id="spinners" class="slds-spinner_container slds-hide" >
                        <div role="status" class="slds-spinner slds-spinner--large slds-spinner--brand">
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div> 
                    </div>
                    <div class = "" style = "height: auto !important;overflow-y:hidden;overflow-x:hidden">
                        <div class="tab" style="width: 100%;margin-bottom: 20px;padding-top:10px;padding-left:5px">
                            <a class = "chtablinks slds-box slds-box_small hoverclass active" onclick = "openChilds(event, 'SelectFields')"  style = "width:8%; height:5%;padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; margin-right:10px; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;">Select Fields</a>
                            <a class = "chtablinks slds-box slds-box_small hoverclass " onclick = "openChilds(event, 'Filters')" style = "width:8%; height:5%; margin-right:10px; padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;">Filters</a>
                            <a class = "chtablinks slds-box slds-box_small hoverclass" onclick = "openChilds(event, 'Calculations')" style = "width:8%; height:5%; margin-right:10px; padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;">Calculation</a>
                            <a class = "chtablinks slds-box slds-box_small hoverclass" onclick = "openChilds(event, 'rendering')" style = "width:8%; height:5%; margin-right:10px; padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;">Rendering</a>
                            <a class = "chtablinks slds-box slds-box_small hoverclass" onclick = "openChilds(event, 'orderby')" style = "width:8%; height:5%; margin-right:10px; padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; text-decoration: none;color:#187bcd;margin-bottom:8px;background:white;">Order By</a>
                        </div>
                        <div id="SelectFields" class="chtabcontent actives">
                            <div class="slds-grid slds-wrap ">
                                <div class="slds-col--padded slds-large-size--5-of-12 slds-small-size--5-of-12">
                                    <div class="slds-panel panel-default">
                                        <div class="slds-panel__header" style="background-color:#187bcd;color:white;">
                                            <h1 class="slds-panel__header-title" style="font-size:80%;">Available</h1>
                                        </div>
                                        <div class="slds-form-element">
                                            <div class="slds-form-element__control">
                                                <input class="slds-input" type="slds-text" style="width:100%;border:1px solid lightgray;height:28px;text-align:center;font-size:74%" placeholder="Filter" id="container1search" onkeyup="sortchildFields('container1','container1search')"/>
                                            </div>
                                        </div>
                                        <div id="container1" class="slds-panel__body slds-box" style="max-height:270px;overflow-y:auto">
                                            <apex:repeat value="{!childObjectFields}" var="flds"> 
                                                <div itemid="{!flds}" id="{!flds}" class="slds-text-align_left box-item" style ="padding-top:8px;font-size:74%" onclick="movetoright('{!flds}','{!childObjectLabelsMap[flds]}')">{!childObjectLabelsMap[flds]}</div>
                                            </apex:repeat>
                                        </div>
                                    </div>
                                </div>
                                <div class="slds-col--padded slds-large-size--2-of-12 slds-small-size--2-of-12" style="text-align:center;margin-top:25%">
                                    <div>
                                        <label id="up" onclick="moveup()"><span style = "color:#A9A9A9;font-size:74%" class="fa fa-chevron-up"></span></label>
                                    </div>
                                    <div>
                                        <label id="down" onclick="movedown()"><span style = "color:#A9A9A9;font-size:74%" class="fa fa-chevron-down"></span></label>
                                    </div>
                                </div>
                                <div class="slds-col--padded slds-large-size--5-of-12 slds-small-size--5-of-12">
                                    <div class="slds-panel panel-default">
                                        <div class="slds-panel__header" style="background-color:#187bcd;color:white;">
                                            <h1 class="slds-panel__header-title" style = "text-align:left;float:left;width:90%;font-size:80%">
                                                Selected
                                            </h1>
                                            <span class="fa fa-plus" style="float: right;font-size:70%;padding-top: 4.2px;" onclick="GetAddChildParent()">
                                            </span>
                                            
                                        </div>
                                        <div id="container2" class="slds-panel__body slds-box" style="min-height:300px"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="Filters" class="tabcontent">
                            <apex:outputpanel id="FiltersId">
                                <div class="slds" style = "font-size:85%">
                                    <div class="slds-grid slds-gutters slds-p-around_medium">
                                        <div class="slds-col slds-size_12-of-12">
                                            <div class="slds-grid slds-wrap slds-grid--pull-padded">
                                                <div class="slds-col slds-size_3-of-12">
                                                    
                                                </div>
                                                <div class="slds-col slds-size_12-of-12">
                                                    <div class="slds-form-element">
                                                        <label class="slds-form-element__label" >{!selectedChildObject}</label>
                                                        <div class="slds-form-element__control">
                                                            <apex:selectList id="fieldId" value="{!selectedField}" size="1" styleClass="slds-input" onchange="displayFilters()">
                                                                <apex:selectOptions value="{!Fields}"/>
                                                            </apex:selectList>
                                                        </div>
                                                    </div> 
                                                    <apex:outputPanel id="WrapIds">
                                                        
                                                        <apex:repeat value="{!wrapperList}" var="wrapper">
                                                            <apex:outputpanel rendered="{!IF(wrapper.Ids == sortOrders,true,false)}">
                                                                <apex:outputPanel rendered="{!isFilters}">
                                                                    <div class="slds-col slds-size_12-of-12 slds-m-bottom_small slds-m-top_medium">
                                                                        <div class="slds-text-align_left">{!wrapper.fieldName}</div>
                                                                    </div>
                                                                    <div class="slds-col slds-size_12-of-12">
                                                                        <div class="slds-grid slds-wrap slds-grid--pull-padded">
                                                                            
                                                                            <div class="slds-col slds-size_5-of-12 slds-m-right_x-small">
                                                                                <apex:outputPanel rendered="{!!wrapper.isGroup}">
                                                                                    <apex:selectList id="filterId" value="{!wrapper.filterOption}" size="1" styleClass="slds-input">
                                                                                        <apex:selectOptions value="{!Conditions}"/>
                                                                                    </apex:selectList>  
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                            <div class="slds-col slds-size_5-of-12 slds-m-right_x-small">
                                                                                <apex:outputPanel rendered="{!wrapper.isPicklist}">
                                                                                    <apex:selectList id="picklistId" value="{!wrapper.selectedInputValue}" size="1" styleClass="slds-input">
                                                                                        <apex:selectOptions value="{!pickLIstValues}"/>
                                                                                    </apex:selectList>      
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel rendered="{!!wrapper.isPicklist}">
                                                                                    <apex:inputText styleClass="slds-input" value="{!wrapper.selectedInputValue}"/>     
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                            <div class="slds-col slds-size_1-of-12">
                                                                                <apex:commandLink styleClass="slds-button slds-button_destructive" value="X" action="{!deleteRow}" rerender="WrapIds">
                                                                                    <apex:param name="rowToBeDeleted" value="{!wrapper.rowCount}" assignTo="{!selectedRowIndex}"></apex:param>
                                                                                </apex:commandLink>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </apex:outputpanel> 
                                                        </apex:repeat>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{!isFilters}">
                                                        <div class="slds-m-top_large">
                                                            <center>
                                                                <!-- <apex:commandButton styleClass="slds-button slds-button_brand" value="Save Results" action="{!saveWrapperList}"></apex:commandButton>  -->
                                                            </center>           
                                                        </div>
                                                    </apex:outputPanel>
                                                    
                                                </div>
                                                <div class="slds-col slds-size_3-of-12">
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </apex:outputpanel>
                        </div>
                        <div id="Calculations" class="tabcontent" style="padding:0px 0px;font-size:85%">
                            <div id="container3" class="slds-panel__body box-container" style="max-height:270px;overflow-y:auto;padding:5px">
                                
                                <div class="modal-body parenttoggle" style="display:flex">
                                    <div class="slds-box slds-box__small ParentObj" style="padding-left:2px;padding-right:2px;padding-top:0px;padding-bottom:0px;width:45%;overflow-y:auto;">
                                        <ul id="SelParentULs" class="dragUL" style="overflow-y:auto;max-height:250px">
                                            <apex:variable var="count" value="{!1}"   /> 
                                            <apex:repeat value="{!CalculateFields}" var="flds"> 
                                                <li>
                                                    <a class="" href=""  style="padding:0px;padding-bottom:5px;padding-top:5px;">
                                                        <label Id="copytext{!count}{!flds}" 
                                                               style=" font-size: 95%; font-weight: 500;padding:0px;cursor: grab;overflow: hidden;box-sizing: border-box;height:auto;"
                                                               title="Label Element" class="slds-text">
                                                            {!CalculateFieldsMap[flds]}
                                                            <!--<span class=" slds-icon_container" onClick="ClipBoard('copytext{!count}{!flds}', 'holdtext{!count}{!flds}','{!flds}{!SortOrders}');" style = "padding-left: 2px;float:right;top:0px">
<svg aria-hidden="true" class="slds-icon slds-icon--xx-small">
<use xmlns:xlink=" http://www.w3.org/1999/xlink"
xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#copy">
</use>
</svg></span>-->
                                                        </label>
                                                        <input type="textarea" ID="holdtext{!count}{!flds}" style="display:none;"/>
                                                        
                                                        <em style="float:right">
                                                            <i class="fa fa-files-o" title="Copy to clipboard" style="padding-right: 10px;" 
                                                               onClick="ClipBoard('copytext{!count}{!flds}', 'holdtext{!count}{!flds}','{!flds}{!SortOrders}');">
                                                            </i>
                                                        </em>
                                                    </a>
                                                </li>
                                                <apex:variable value="{!count+1}" var="count"/>  <!--increment-->
                                            </apex:repeat>
                                        </ul>
                                    </div>
                                    <div  style="width:55%; padding-left:10px;">
                                        <label for="CalculatedFieldId" class="slds-text">Calculated Field <em><i class="fa fa-plus" onclick="AddCalculation()"></i></em></label>
                                        <div style="color:green;font-size:85%;font-weight:bold" class="slds-text">
                                            (Use SUM(),AVG() for calculations.)
                                        </div>
                                        <div id="Calcontainer1" >
                                            <div class="box-item">
                                                <textarea id="CalculatedFieldId" rows="2" cols="50" class="slds-input slds-textarea" style="height:auto"></textarea>   
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="rendering" class="tabcontent" style="font-size:85%">
                            <div id="container4" class="slds-panel__body box-container" style="max-height:270px;overflow-y:auto">
                                <div>
                                    <label for="renderIds">Select Field</label>
                                    <select class="slds-input" name="Caliculate" id="renderIds">
                                        <option value="">--select one -- </option>
                                        <apex:repeat value="{!parentobjectFields}" var="childfieldApiNames" >
                                            <option Value="{!childfieldApiNames.rendparentName}">{!childfieldApiNames.parentLabel}</option>
                                        </apex:repeat>
                                    </select>
                                </div>
                                <div style = "margin-top:1em;">
                                    <label for="SumAvgIds">Select Operator</label>
                                    <select class="slds-input" name="Sum/Avg" id="SumAvgIds">
                                        <option value="==">equals</option>
                                        <option value="!=">not equals</option>
                                        <option value=">">greater than</option>
                                        <option value="<">less than</option>
                                    </select>
                                </div>
                                
                                <div style = "margin-top:1em;">
                                    <label for="renderId">Enter Value</label>
                                    <input type="text" class="slds-input" id="renderId"  /> 
                                </div>
                                <div style = "margin-top:1em;">
                                    <input type="button" value="Add" class="slds-button slds-button--brand"  onclick="AddrenderedField();"/>
                                </div>
                                <div style = "margin-top:1em;">
                                    <label for="renderedFieldId">Render Field</label>
                                    <textarea id="renderedFieldId" rows="2" cols="50" class="slds-input"></textarea>
                                </div>
                            </div>
                            
                        </div>
                        <div id="orderby" class="tabcontent" style ="font-size:85%">
                            <div id="container4" class="slds-panel__body box-container" style="max-height:270px;overflow-y:auto">
                                <div>
                                    <label for="renderIds" class="slds-text">Select Field</label>
                                    <select class="slds-input" name="Caliculate" id="OrderByField">
                                        <option value="">--select one--</option>
                                        <apex:repeat value="{!childObjectFields}" var="flds"> 
                                            <option Value="{!flds}">{!childObjectLabelsMap[flds]}</option>
                                        </apex:repeat>
                                    </select>
                                </div>
                                
                                <div style = "margin-top:1em;">
                                    <label for="SumAvgIds" class="slds-text">Order By</label>
                                    <select class="slds-input" name="Order By" id="OrderByASC" >
                                        <option value="">--select one-- </option>
                                        <option value="ASC">Ascending</option>
                                        <option value="DESC">Descending</option>
                                    </select>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
                <div class="slds-modal__footer">
                    <input type="button" value="Save" class="slds-button slds-button--brand"  onclick="createChildItemTable();"/>
                    <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="$('#childFieldlabelBox').hide();"/> 
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open"></div>
    </apex:outputPanel>
</div>
<div id="pagechildFieldlabelBox" class="slds" style="display: none;font-size:85%">
    <apex:outputPanel id="pagechildFieldlabelBoxId">
        <input type="hidden" id="parentName" value="{!selectedParentObject}"/>
        
        
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container customClass" style = "width:40% !important">
                <div class="slds-modal__header"  style = "background-color:#187bcd;color:white;">
                    <h2 id="header43" class="slds-text-heading--medium" style = "text-align:left;float:left;font-size:120% !important;width:90%;">
                        Select Fields
                    </h2>
                    <span class="fa fa-close" style = "float:right; color:#ffffff;padding-top:4px;font-size:98% !important;" onclick="$('#pagechildFieldlabelBox').hide();"></span>
                </div>
                <div id="spinners" class="slds-spinner_container slds-hide" >
                    <div role="status" class="slds-spinner slds-spinner--large slds-spinner--brand">
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                    </div> 
                </div>
                <div class="slds-modal__content slds-p-around--medium" style = "height:500px;overflow-y:hidden;">
                    <!-- <div id="GroupErrorId" style="display:none;color:red">
Please select Group By
</div>-->
                    <div class = "" style = "height: auto !important;overflow-y:hidden;overflow-x:hidden">
                        <div class="tab" style="width: 100%;margin-bottom: 20px;padding-top:10px;padding-left:5px">
                            <a class="chtablinks slds-box slds-box_small hoverclass" style = "width:8%; height:5%;padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; margin-right:10px; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;" onclick="openChilds(event, 'pagerendering')">Rendering</a>
                        </div>
                        
                        <div id="pagerendering" class="tabcontent" style="font-size:85%">
                            <div id="container4" class="slds-panel__body box-container" style="max-height:270px;overflow-y:auto">
                                <label for="renderIds" class="slds-text">Select Field</label>
                                <select class="slds-input" name="Caliculate" id="pagerenderIds">
                                    <option value="">--select one -- </option>
                                    <apex:repeat value="{!parentobjectFields}" var="childfieldApiNames" >
                                        <option Value="{!childfieldApiNames.rendparentName}">{!childfieldApiNames.parentLabel}</option>
                                    </apex:repeat>
                                </select>
                                <br/>
                                <label for="SumAvgIds" class="slds-text">Select Operator</label>
                                <select class="slds-input" name="Sum/Avg" id="pageSumAvgIds">
                                    <option value="==">equals</option>
                                    <option value="!=">not equals</option>
                                    <option value=">">greater than</option>
                                    <option value="<">less than</option>
                                </select>
                                <br/>
                                <label for="renderId" class="slds-text">Enter Value</label>
                                <input type="text" class="slds-input" id="pagerenderId"  /> 
                                <br/>
                                <input type="button" value="Add" class="slds-button slds-button--brand"  onclick="AddpagerenderedField();"/>
                                <br/>
                                <label for="renderedFieldId" class="slds-text">Render Field</label>
                                <textarea id="pagerenderedFieldId" rows="2" cols="50" class="slds-input slds-textarea"></textarea>
                                
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="slds-modal__footer">
                    <input type="button" value="Save" class="slds-button slds-button--brand"  onclick="pagecreate();"/>
                    <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="$('#pagechildFieldlabelBox').hide();"/> 
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open"></div>
    </apex:outputPanel>
</div>	

<div id="sectionchildFieldlabelBox" class="slds" style="display: none;">
    <apex:outputPanel id="sectionchildFieldlabelBoxId">
        <input type="hidden" id="parentName" value="{!selectedParentObject}"/>
        
        
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container" style = "width:40% !important">
                <div class="slds-modal__header" style = "background-color:#187bcd;color:white;">
                    <h2 id="header43" class="slds-text-heading--medium" style = "text-align:left;float:left;font-size:120% !important;width:90%;">
                        Select Fields
                    </h2>
                    <span class="fa fa-close" style = "float:right; color:#ffffff;padding-top:4px;font-size:98% !important;" onclick="$('#sectionchildFieldlabelBox').hide();"></span>
                </div>
                <div id="spinners" class="slds-spinner_container slds-hide" >
                    <div role="status" class="slds-spinner slds-spinner--large slds-spinner--brand">
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                    </div> 
                </div>
                <div class="slds-modal__content slds-p-around--medium" style = "height:500px;overflow-y:hidden;">
                    <!--<div id="GroupErrorId" style="display:none;color:red">
Please select Group By
</div>-->
                    <div class = "" style = "height: auto !important;overflow-y:hidden;overflow-x:hidden">
                        <div class="tab" style="width: 100%;margin-bottom: 20px;padding-top:10px;padding-left:5px">
                            <a class="chtablinks slds-box slds-box_small hoverclass" style = "width:8%; height:5%;padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; margin-right:10px; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;" onclick="openChilds(event, 'sectionrendering')">Rendering</a>
                        </div>
                        
                        <div id="sectionrendering" class="tabcontent" style="font-size:85%">
                            <div id="container4" class="slds-panel__body box-container" style="max-height:270px;overflow-y:auto">
                                <div>
                                    <label for="renderIds" class="slds-text">Select Field</label>
                                    <select class="slds-input" name="Caliculate" id="sectionrenderIds">
                                        <option value="">--select one -- </option>
                                        <apex:repeat value="{!parentobjectFields}" var="childfieldApiNames" >
                                            <option Value="{!childfieldApiNames.rendparentName}">{!childfieldApiNames.parentLabel}</option>
                                        </apex:repeat>
                                    </select>
                                </div>
                                <div style="margin-top:1em;">
                                    <label for="SumAvgIds" class="slds-text">Select Operator</label>
                                    <select class="slds-input" name="Sum/Avg" id="sectionSumAvgIds">
                                        <option value="==">equals</option>
                                        <option value="!=">not equals</option>
                                        <option value=">">greater than</option>
                                        <option value="<">less than</option>
                                    </select>
                                </div>
                                <div style="margin-top:1em;">
                                    <label for="renderId" class="slds-text">Enter Value</label>
                                    <input type="text" class="slds-input" id="sectionrenderId"  />
                                </div>
                                <div style="margin-top:1em;">
                                    <input type="button" value="Add" class="slds-button slds-button--brand"  onclick="AddsecrenderedField();"/>
                                </div>
                                <div style="margin-top:1em;">
                                    <label for="sectionrenderedFieldId" class="slds-text">Render Field</label>
                                    <textarea id="sectionrenderedFieldId" rows="2" cols="50" class="slds-input"></textarea>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <div class="slds-modal__footer">
                    <input type="button" value="Save" class="slds-button slds-button--brand"  onclick="sectioncreate()"/>
                    <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="$('#sectionchildFieldlabelBox').hide();"/> 
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open"></div>
    </apex:outputPanel>
</div>	

<div id="groupchildFieldlabelBox" class="slds" style="display: none;">
    <apex:outputPanel id="groupchildFieldlabelBoxId">
        <apex:inputHidden id="groupchildFieldsJSON" value="{!LabelsMapJson}"/>
        <input type="hidden" id="parentName" value="{!selectedParentObject}"/>
        
        
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                 <div class="slds-modal__header" style = "background-color:#187bcd;color:white;">
                    <h2 id="header43" class="slds-text-heading--medium" style = "text-align:left;float:left;font-size:120%;width:90%;">
                        Select Fields
                    </h2>
                    <span class="fa fa-close" style = "float:right; color:#fffff;padding-top:4px;font-size:98%;" onclick="$('#groupchildFieldlabelBox').hide();"></span>
                </div>
                <div id="spinners" class="slds-spinner_container slds-hide" >
                    <div role="status" class="slds-spinner slds-spinner--large slds-spinner--brand">
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                    </div> 
                </div>
                <div class="slds-modal__content slds-p-around--medium" style = "height:500px;overflow-y:hidden;">
                    <!--<div id="GroupErrorId" style="display:none;color:red">
                        Please select Group By
                    </div>-->
                    <div class = "" style = "height: auto !important;overflow-y:hidden;overflow-x:hidden">
                        <div class="tab" style="width: 100%;margin-bottom: 20px;padding-top:10px;padding-left:5px">
                            <a class="chtablinks slds-box slds-box_small hoverclass active" style = "width:8%; height:5%;padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; margin-right:10px; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;" onclick="openChilds(event, 'groupSelectFields')">Select Fields</a>
                            <a class="chtablinks slds-box slds-box_small hoverclass" style = "width:8%; height:5%;padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; margin-right:10px; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;" onclick="openChilds(event, 'GroupFilters')">Filter</a>
                            <a class="chtablinks slds-box slds-box_small hoverclass" style = "width:8%; height:5%;padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; margin-right:10px; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;" onclick="openChilds(event, 'groupby')">Group By</a>
                            <a class="chtablinks slds-box slds-box_small hoverclass" style = "width:8%; height:5%;padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; margin-right:10px; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;" onclick="openChilds(event, 'groupCalculations')">Calculation</a>
                            <a class="chtablinks slds-box slds-box_small hoverclass" style = "width:8%; height:5%;padding-top:5px; padding-bottom:5px;padding-right:5px; padding-left:5px;font-size:85%; margin-right:10px; text-decoration: none;color:#187bcd;margin-bottom:20px;background:white;" onclick="openChilds(event, 'grouporderby')">Order By</a>
                        </div>
                       <div id="groupSelectFields" class="chtabcontent actives">
                            <div class="slds-grid slds-wrap ">
                                <div class="slds-col--padded slds-large-size--5-of-12 slds-small-size--5-of-12">
                                   <div class="slds-panel panel-default">
                                        <div class="slds-panel__header" style="background-color:#187bcd;color:white;">
                                            <h1 class="slds-panel__header-title" style="font-size:80%">Available</h1>
                                        </div>
                                       <div class="slds-form-element">
                                            <div class="slds-form-element__control">
                                                <input class="slds-input" type="slds-text" style="width:100%;border:1px solid lightgray;height:28px;text-align:center;font-size:74%" placeholder="Filter" id="container1search" onkeyup="sortchildFields('groupcontainer1','grpcontainer1search')"/>
                                            </div>
                                        </div>
                                        <div id="groupcontainer1" class="slds-panel__body slds-box" style="max-height:270px;overflow-y:auto">
                                            <apex:repeat value="{!childObjectFields}" var="flds"> 
                                                <div itemid="{!flds}" id="{!flds}" class="slds-text-align_left box-item" style ="padding-top:8px;font-size:74%" onclick="groupmovetoright('{!flds}','{!childObjectLabelsMap[flds]}')">{!childObjectLabelsMap[flds]}</div>
                                            </apex:repeat>
                                        </div>
                                        
                                    </div>
                                </div>
                                <div class="slds-col--padded slds-large-size--2-of-12 slds-small-size--2-of-12" style="text-align:center;margin-top:25%">
                                     <div>
                                        <label id="up" onclick="groupmoveup()"><span style = "color:#A9A9A9;font-size:74%" class="fa fa-chevron-up"></span></label>
                                    </div>
                                    <div>
                                        <label id="down" onclick="groupmovedown()"><span style = "color:#A9A9A9;font-size:74%" class="fa fa-chevron-down"></span></label>
                                    </div>
                                </div>
                                <div class="slds-col--padded slds-large-size--5-of-12 slds-small-size--5-of-12">
                                    <div class="slds-panel panel-default">
                                        <div class="slds-panel__header" style="background-color:#187bcd;color:white;">
                                            <h1 class="slds-panel__header-title" style = "text-align:left;float:left;width:90%;font-size:80%">
                                                Selected
                                            </h1>
                                            <span class="fa fa-plus" style="float: right;font-size:70%;padding-top: 4.2px;" onclick="groupGetAddChildParent()">
                                            </span> 
                                        </div>
                                        <div id="groupcontainer2" class="slds-panel__body slds-box" style="min-height:300px"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="GroupFilters" class="tabcontent">
                            <apex:outputpanel id="GroupFiltersId">
                                <div class="slds">
                                    <div class="slds-grid slds-gutters slds-p-around_medium">
                                        <div class="slds-col slds-size_12-of-12">
                                            <div class="slds-grid slds-wrap slds-grid--pull-padded">
                                                <div class="slds-col slds-size_3-of-12">
                                                    
                                                </div>
                                                <div class="slds-col slds-size_12-of-12">
                                                    <div class="slds-form-element">
                                                        <label class="slds-form-element__label" >{!selectedChildObject}</label>
                                                        <div class="slds-form-element__control">
                                                            <apex:selectList id="groupfieldId" value="{!selectedField}" size="1" styleClass="slds-input" onchange="grpdisplayFilters()">
                                                                <apex:selectOptions value="{!Fields}"/>
                                                            </apex:selectList>
                                                        </div>
                                                    </div> 
                                                    <apex:outputPanel id="groupWrapIds">
                                                        
                                                        <apex:repeat value="{!wrapperList}" var="wrapper">
                                                            <apex:outputpanel rendered="{!IF(wrapper.Ids == sortOrders,true,false)}">
                                                                <apex:outputPanel rendered="{!isFilters}">
                                                                    <div class="slds-col slds-size_12-of-12 slds-m-bottom_small slds-m-top_medium">
                                                                        <div class="slds-text-align_left">{!wrapper.fieldName}</div>
                                                                    </div>
                                                                    <div class="slds-col slds-size_12-of-12">
                                                                        <div class="slds-grid slds-wrap slds-grid--pull-padded">
                                                                            
                                                                            <div class="slds-col slds-size_5-of-12 slds-m-right_x-small">
                                                                                <apex:outputPanel rendered="{!wrapper.isGroup}">
                                                                                    <apex:selectList id="goupfilterId" value="{!wrapper.filterOption}" size="1" styleClass="slds-input">
                                                                                        <apex:selectOptions value="{!Conditions}"/>
                                                                                    </apex:selectList>  
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                            
                                                                            <div class="slds-col slds-size_5-of-12 slds-m-right_x-small">
                                                                                <apex:outputPanel rendered="{!wrapper.isPicklist}">
                                                                                    <apex:selectList id="groupicklistId" value="{!wrapper.selectedInputValue}" size="1" styleClass="slds-input">
                                                                                        <apex:selectOptions value="{!pickLIstValues}"/>
                                                                                    </apex:selectList>      
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel rendered="{!!wrapper.isPicklist}">
                                                                                    <apex:inputText styleClass="slds-input" value="{!wrapper.selectedInputValue}"/>     
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                            <div class="slds-col slds-size_1-of-12">
                                                                                <apex:commandLink styleClass="slds-button slds-button_destructive" value="X" action="{!deleteRow}" rerender="groupWrapIds">
                                                                                    <apex:param name="rowToBeDeleted" value="{!wrapper.rowCount}" assignTo="{!selectedRowIndex}"></apex:param>
                                                                                </apex:commandLink>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </apex:outputpanel> 
                                                        </apex:repeat>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{!isFilters}">
                                                        <div class="slds-m-top_large">
                                                            <center>
                                                                <!-- <apex:commandButton styleClass="slds-button slds-button_brand" value="Save Results" action="{!saveWrapperList}"></apex:commandButton>  -->
                                                            </center>           
                                                        </div>
                                                    </apex:outputPanel>
                                                    
                                                </div>
                                                <div class="slds-col slds-size_3-of-12">
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </apex:outputpanel>
                        </div>
                        <div id="groupby" class="tabcontent">
                            <div id="container4" class="panel-body box-container" style="max-height:270px;overflow-y:auto">
                                <div>
                                    <label class="slds-text" for="renderIds">Select Group Field</label>
                                    <select class="slds-input" name="Caliculate" id="groupByField">
                                        <option value="">--select one--</option>
                                        <apex:repeat value="{!childObjectFields}" var="flds"> 
                                            <option Value="{!flds}">{!childObjectLabelsMap[flds]}</option>
                                        </apex:repeat>
                                    </select>
                                </div>
                                <div style="margin-top:5px">
                                    <label class="slds-text" for="renderIds">Select Child Group Field</label>
                                    <select class="slds-input" name="Caliculate" id="childgroupByField">  
                                        <option value="">--select one--</option>
                                        <apex:repeat value="{!childObjectFields}" var="flds"> 
                                            <option Value="{!flds}">{!childObjectLabelsMap[flds]}</option>
                                        </apex:repeat>
                                    </select>
                                </div>
                                <div style="margin-top:5px">
                                    <label class="slds-text">Group by roll up</label>
                                    <span class="vfHelpText">
                                        <a href="javascript:return false">
                                            <i class="fa fa-info" data-toggle="tooltip" ></i>
                                            <span style="text-align: left;">For single group by rollup</span>                                                       
                                        </a>        
                                    </span><br/>
                                    <input type="checkbox" id="isRollupField" />
                                </div>
                                
                            </div>
                            
                        </div>
                        <div id="groupCalculations" class="tabcontent" style="padding:0px 0px;">
                            <div id="container3" class="panel-body box-container" style="max-height:270px;overflow-y:auto;padding:5px">
                                
                                <div class="modal-body parenttoggle" style="display:flex">
                                    <div class="ParentObj" style="padding-right:4%;width:45%">
                                        <ul id="SelParentULs" class="dragUL" style="overflow-y:auto;max-height:250px;border:1px solid lightgray;border-radius:5px;padding-left:3px">
                                            <apex:variable var="count" value="{!1}"   /> 
                                            <apex:repeat value="{!CalculateFields}" var="flds"> 
                                                <li>
                                                    <a class="" href=""  style="padding:0px;padding-bottom:5px;padding-top:5px;">
                                                        <label Id="copytext{!count}{!flds}" 
                                                               style="font-family: sans-serif; font-size: 75%; font-weight: 500;padding:0px;cursor: grab;overflow: hidden;box-sizing: border-box;height:auto;"
                                                               title="Label Element">
                                                            {!CalculateFieldsMap[flds]}
                                                        </label>
                                                        <input type="textarea" ID="holdtext{!count}{!flds}" class="slds-textarea" style="display:none;"></input>
                                                    <em style="float:right">
                                                        <i class="fa fa-files-o" title="Copy to clipboard" style="padding-right: 10px;padding-top: 6px;" 
                                                           onClick="ClipBoard('copytext{!count}{!flds}', 'holdtext{!count}{!flds}','{!flds}');">
                                                        </i>
                                                    </em>
                                                </a>
                                        </li>
                                        <apex:variable value="{!count+1}" var="count"/>  <!--increment-->
                                    </apex:repeat>
                                </ul>
                            </div>
                            <div  style="width:55%">
                                <label class="slds-text" for="CalculatedFieldId">Calculated Field</label>
                                <div style="color:green;font-size:10px;font-weight:bold">
                                    
                                </div>
                                <div id="Calcontainer1" >
                                    <div class="box-item">
                                        <textarea id="grpCalculatedFieldId" rows="2" cols="50" class="slds-input slds-textarea" style="height:auto"></textarea>   
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                        
                        
                        
                    </div>
                </div>
                <div id="grouporderby" class="tabcontent">
                    <div id="groupcontainer4" class="panel-body box-container" style="max-height:270px;overflow-y:auto">
                        <label for="renderIds">Select Field</label>
                        <select class="slds-input" name="Caliculate" id="groupOrderByField">
                            <option value="">--select one--</option>
                            <apex:repeat value="{!childObjectFields}" var="flds"> 
                                <option Value="{!flds}">{!childObjectLabelsMap[flds]}</option>
                            </apex:repeat>
                        </select>
                        
                        <label for="SumAvgIds">Order By</label>
                        <select class="slds-input" name="Order By" id="groupOrderByASC">
                            <option value="">--select one-- </option>
                            <option value="ASC">Ascending</option>
                            <option value="DESC">Descending</option>
                        </select>
                        
                        
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="slds-modal__footer">
            <input type="button" value="Save" class="slds-button slds-button--brand"  onclick="groupcreateChildItemTable();"/>
            <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="$('#groupchildFieldlabelBox').hide();"/> 
        </div>
    </div>
</div>
<div class="slds-backdrop slds-backdrop--open"></div>
</apex:outputPanel>
</div>    	
<div id="querychildFieldlabelBox" class="slds" style="display: none;">	
    <apex:outputPanel id="querychildFieldlabelBoxId">	
        <apex:inputHidden id="querychildFieldsJSON" value="{!LabelsMapJson}"/>	
        <input type="hidden" id="parentName" value="{!selectedParentObject}"/>	
        
        
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">	
            <div class="slds-modal__container">	
                
                <div id="spinners" class="slds-spinner_container slds-hide" >	
                    <div role="status" class="slds-spinner slds-spinner--large slds-spinner--brand">	
                        <div class="slds-spinner__dot-a"></div>	
                        <div class="slds-spinner__dot-b"></div>	
                    </div> 	
                </div>	
                <div class="slds-modal__content slds-p-around--medium">	
                    
                    <div id="QueryId" class="">	
                        <div id="container4" class="panel-body box-container" style="max-height:270px;overflow-y:auto">	
                            
                            <div>	
                                <label for="renderIds">Aggregate Query</label>	
                            </div>	
                            <div>	
                                <textarea id="AggregateQueryId" style="width:100%" class = "slds-textarea" rows="4"/>	
                            </div>	
                            <div style="color:red" id="AggregateQueryError">{!execute}</div>	
                        </div>	
                        
                    </div>	
                    
                </div>	
                <div class="slds-modal__footer">	
                    <!--	<input type="button" value="Check Syntax" class="slds-button slds-button--brand"  onclick="checksyntax();"/>	
<apex:outputPanel rendered="{!!showError}"> -->	
                    <button type="button" class="slds-button slds-button--brand" onclick="querycreateChildItemTable();" style="background:#187bcd">Save</button>
                    <!--</apex:outputPanel> -->
                    <button type="button" class="slds-button slds-button--brand" onclick="$('#querychildFieldlabelBox').hide();" style="background:#187bcd">Cancel</button>
                    
                </div>	
            </div>	
        </div>	
        <div class="slds-backdrop slds-backdrop--open"></div>	
    </apex:outputPanel>	
</div>		

<!-- the content area -->
<div id="SucessMessageId" class="slds" style="display: none;font-size:90%">
    <apex:outputpanel id="SaveId">
        <apex:outputtext value="{!loadstringssave}" escape="false" />
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <div class="slds-modal__header">
                    <h2 id="header43" class="slds-text-heading--medium"></h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div class="slds-grid slds-wrap ">
                        <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2">
                            <div id="SuccessMsg" style="display:none;background:green;color:white;padding:10px">
                                {!SuccessMessage}
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="slds-modal__footer">
                    <input type="button" value="OK" style = "font-size:110%" class="slds-button slds-button--brand" onclick="$('#SucessMessageId').hide();"/> 
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open"></div>
        
    </apex:outputpanel>  
</div>

<div id="SaveContainerBox" class="slds" style="display: none;font-size:85%">
    <apex:outputPanel id="SaveContainerBoxid">
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <div class="slds-modal__header" style = "background-color:#187bcd;color:white;">
                    <h2 id="header43" class="slds-text-heading--medium"><b>Doc Template</b></h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div class="slds-grid slds-wrap ">
                        <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2">
                            <div id="ErrorId" style="display:none;color:red" class="slds-text">
                                Please Enter Doc Template Name
                            </div>
                            <div id="HeaderErrorId" style="display:none;color:red" class="slds-text">
                                Please Enter Header Template Name
                            </div>
                            <div id="FooterErrorId" style="display:none;color:red" class="slds-text">
                                Please Enter Footer Template Name
                            </div>
                            <div class="slds-panel panel-default" style="border:0px">
                                <label class="slds-text"><b style="color: rgb(192,55,51);">*</b>Doc Template Name:</label>    
                                <div>
                                    <apex:inputtext onkeydown="return (event.keyCode!=13);" value="{!DoctemplateName}" styleclass="slds-input" id="DocTemplateId" />
                                </div> 
                            </div>
                            <div class="slds-panel panel-default" style="border:0px">
                                <label class="slds-text"><b style="color: rgb(192,55,51);"></b>Header Name:</label>    
                                <div>
                                    <apex:inputtext onkeydown="return (event.keyCode!=13);" value="{!HeaderName}" styleclass="slds-input" id="HeaderNameId" />
                                </div> 
                            </div>
                            <div class="slds-panel panel-default" style="border:0px">
                                <label class="slds-text"><b style="color: rgb(192,55,51);"></b>Footer Name:</label>    
                                <div>
                                    <apex:inputtext onkeydown="return (event.keyCode!=13);" value="{!FooterName}" styleclass="slds-input" id="FooterNameId" />
                                </div> 
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="slds-modal__footer">
                    <input type="button" value="Save" class="slds-button slds-button--brand"  onclick="Savecontainer('saveas');return false;"/>
                    <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="cancelcontainer()"/> 
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open"></div>
    </apex:outputPanel>
</div> 
<div id="SaveContainerEmailBox" class="slds" style="display: none;font-size:85%">
    <apex:outputPanel id="SaveContainerBoxEmailid">
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <div class="slds-modal__header" style = "background-color:#187bcd;color:white;">
                   
                    <h2 id="header43" class="slds-text-heading--medium"><b>Email Template</b></h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <div class="slds-grid slds-wrap ">
                        <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2">
                            <div id="EmailErrorId" style="display:none;color:red" class="slds-text">
                                Please Enter Email Template Name
                            </div>
                            <div class="slds-panel panel-default" id="EmailTemplatediv" style="border:0px">
                                <label class="slds-text"><b style="color: rgb(192,55,51);">*</b>Email Template Name:</label>    
                                <div>
                                    <apex:inputtext onkeydown="return (event.keyCode!=13);" value="{!EmailtemplateName}" styleclass="slds-input" id="EmailTemplateId" />
                                </div> 
                            </div>
                            <div id="EmailsubjectErrorId" style="display:none;color:red" class="slds-text">
                                Please Enter Email Template Subject
                            </div>
                            <div class="slds-panel panel-default" style="border:0px">
                                <label class="slds-text"><b style="color: rgb(192,55,51);">*</b>Email Template Subject:</label>    
                                <div>
                                    <apex:inputtext onkeydown="return (event.keyCode!=13);" value="{!Subject}" styleclass="slds-input" id="EmailSubjectId" />
                                </div> 
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="slds-modal__footer">
                    <input type="button" value="Save" id="savetemplateId" class="slds-button slds-button--brand"  onclick="SaveEmailcontainer('save');return false;"/>
                    <input type="button" value="Save" id="saveastemplateId" class="slds-button slds-button--brand"  onclick="SaveEmailcontainer('saveas');return false;"/>
                    <input type="button" value="Save" id="saveasclosetemplateId" class="slds-button slds-button--brand"  onclick="SaveEmailcontainer('saveandclose');return false;"/>
                    <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="cancelEmailcontainer();"/> 
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open"></div>
    </apex:outputPanel>
</div> 
<div id="AddChildMessageId" class="slds" style="display: none;">
    <apex:outputpanel id="AddChildMessage">
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open" style="z-index: 10000;">
            <div class="slds-modal__container">
                <div class="slds-modal__header" style = "background-color:#187bcd;color:white;">
                   
                    <h2 id="header43" class="slds-text-heading--medium" style = "font-size:110%">Add Parent Fields</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium" style = "font-size:85%">
                    <div class="slds-grid slds-wrap ">
                        <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2">    
                            <div id="SuccessMsgs" style="padding:10px">
                                <label class="slds-text">Parent Label</label>
                                <input type="text" id="addpageLabel" class="slds-input" onkeydown="return (event.keyCode!=13);"/>
                            </div>
                            <div id="SuccessMsg" style="padding:10px">
                                <label class="slds-text">Parent Field API</label> 
                                
                                <input type="text" id="addpageId" class="slds-input" onkeydown="return (event.keyCode!=13);"/>
                                <input type="button" style="margin-top:5px" value="Get Parent Field API" class="slds-button slds-button--brand" onclick="$('#childFIeldsMessage').show();"/> 
                                
                            </div>
                        </div>
                    </div>
                </div>
                <div class="slds-modal__footer">
                    <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="$('#AddChildMessageId').hide();"/>
                    <input type="button" value="Ok" class="slds-button slds-button--brand" onclick="Addtocontainer()"/> 
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open" style="z-index: 9996;"></div>
        
    </apex:outputpanel>     
</div>

<div id="groupAddChildMessageId" class="slds" style="display: none;">	
    <apex:outputpanel id="groupAddChildMessage">	
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open" style="z-index: 10000;">	
            <div class="slds-modal__container">	
                <div class="slds-modal__header" style = "background-color:#187bcd;color:white;">	
                    <h2 id="header43" class="slds-text-heading--medium" style = "font-size:110%">Add Parent Fields</h2>	
                </div>	
                <div class="slds-modal__content slds-p-around--medium" style = "font-size:85%">	
                    <div class="slds-grid slds-wrap ">	
                        <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2">    	
                            <div id="SuccessMsgs" style="padding:10px">	
                                <label class="slds-text">Parent Label</label>	
                                <input type="text" id="groupaddpageLabel" class="slds-input" onkeydown="return (event.keyCode!=13);"/>	
                            </div>	
                            <div id="SuccessMsg" style="padding:10px">	
                                <label class="slds-text">Parent Field API</label> 	
                                
                                <input type="text" id="groupaddpageId" class="slds-input" onkeydown="return (event.keyCode!=13);"/>	
                                <input type="button" style="margin-top:5px" value="Get Parent Field API" class="slds-button slds-button--brand" onclick="$('#childFIeldsMessage').show();"/>  	
                                
                            </div>	
                        </div>	
                    </div>	
                </div>	
                <div class="slds-modal__footer">	
                    <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="$('#groupAddChildMessageId').hide();"/>	
                    <input type="button" value="Ok" class="slds-button slds-button--brand" onclick="groupAddtocontainer()"/> 	
                </div>	
            </div>	
        </div>	
        <div class="slds-backdrop slds-backdrop--open" style="z-index: 9996;"></div>	
        
    </apex:outputpanel>     	
</div>     	

<div id="ParentFIeldsMessage" class="slds" style="display: none;">
    <apex:outputpanel id="ParentFIeldsMessageId">
        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container" style="width:90%;max-width:none">
                <div class="slds-modal__header" style = "background-color:#187bcd;color:white;">
                    <h2 id="header43" class="slds-text-heading--medium" style = "text-align:left;float:left;font-size:120%;width:90%;">
                        Get Parent Field API
                    </h2>
                    <span class="fa fa-close" style = "float:right; color:#fffff;padding-top:4px;font-size:98%;" onclick="$('#ParentFIeldsMessage').hide();"></span>
                </div>
                <div class="slds-modal__content slds-p-around--medium" style = "font-size:85%">
                    <div class="slds-grid slds-wrap ">
                        <!--<label class="slds-text" style="padding-left:10px"><b>Get Parent Field API</b></label>-->
                        <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2">
                            <iframe height="300px" id="theIframe" name="theIframe" src="/{!JunodocUrl}/JunoDoc__FormBuilder_VF?objectName={!selectedParentObject}&parents=yes" width="100%"></iframe>
                            
                        </div>
                        
                    </div>
                </div>
                <div class="slds-modal__footer">
                    <input type="button" value="Ok" class="slds-button slds-button--brand" onclick="$('#ParentFIeldsMessage').hide();"/>
                    <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="$('#ParentFIeldsMessage').hide();"/>
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open"></div>
        
    </apex:outputpanel>  
</div>      


<!-- the content area -->

<apex:outputpanel id="showchiIds">
    <div id="childFIeldsMessage" class="slds" style="display: none;">
        <apex:outputpanel id="childFIeldsMessageId">
            <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open" style="z-index:90002">
                <div class="slds-modal__container" style="width:90%;max-width:none">
                    <div class="slds-modal__header" style = "background-color:#187bcd;color:white;">
                    <h2 id="header43" class="slds-text-heading--medium" style = "text-align:left;float:left;font-size:120%;width:90%;">
                        Get Parent Field API
                    </h2>
                    <span class="fa fa-close" style = "float:right; color:#fffff;padding-top:4px;font-size:98%;" onclick="$('#childFIeldsMessage').hide();"></span>
                </div>
                    <div class="slds-modal__content slds-p-around--medium" style = "font-size:85%">
                        <div class="slds-grid slds-wrap ">
                            
                            <div class="slds-col--padded slds-large-size--2-of-2 slds-small-size--2-of-2">
                                <!--<label style="padding-left:10px" class="slds-text"><b>Get Parent Field API</b></label>--> 
                                <iframe height="300px" id="theIframe" name="theIframe" src="/{!JunodocUrl}/FormBuilder_VF?objectName={!selectedChildObject}&parents=no" width="100%"></iframe>
                                
                            </div>
                            
                        </div>
                    </div>
                    <div class="slds-modal__footer">
                        <input type="button" value="Ok" class="slds-button slds-button--brand" onclick="$('#childFIeldsMessage').hide();"/> 
                        <input type="button" value="Cancel" class="slds-button slds-button--brand" onclick="$('#childFIeldsMessage').hide();"/>
                    </div>
                </div>
            </div>
            <div class="slds-backdrop slds-backdrop--open"></div>
            <script>
            // var calIds = '{!calculatedFields}';
            </script>
        </apex:outputpanel>  
    </div>
    <apex:outputtext value="{!loadstrings}" escape="false" />
    <script>
    function getobjects(){	
        var objectName = document.getElementById('selectedCalId').value;    	
        getcalchildObjectFields(objectName,1);	
    }	
    function showcalObj(){	
        document.getElementById('hideId').style.display = "none";	
        document.getElementById('showId').style.display = "flex";  	
    }	
    function hide_Property(){
        
        //document.getElementById('showId').style.display = "flex";  
    }	
    
    function showcalcualtedFields(){	
        document.getElementById('hideId').style.display = "block";	
        document.getElementById('showId').style.display = "none";  	
        $('#calculatedFIeldsMessage').show()	
    }
    function AddCalculationField(){
        var childIds = document.getElementById('CaliculateId').value;
        var childsunIds = document.getElementById('SumAvgId').value;
        var Ids = document.getElementById('Idvalue').value;
        var childcalId = document.getElementById('CalculatedFieldId').value;
        var totalIds = '';
        if(childcalId != undefined && childcalId != ''){
            
            childcalId = childcalId.replace('}]','');
            totalIds = childcalId +' ' +childsunIds+'('+childIds+ Ids+')}]';
        }
        else{
            totalIds = '[{' + childsunIds+'('+childIds+ Ids+')}]';
        }
        document.getElementById('CalculatedFieldId').value = totalIds
    }
    var RenderFields = '';
    function AddrenderedField(){
        var childIds = document.getElementById('renderIds').value;
        var childsunIds = document.getElementById('SumAvgIds').value;
        var rendIds = document.getElementById('renderId').value; 
        var Ids = document.getElementById('Idvalue').value;
        var childcalId = document.getElementById('renderedFieldId').value;
        
        if(childIds != undefined && childIds != ''){
            if(RenderFields.length > 0){
                RenderFields += ',' + childIds;
            }
            else{
                RenderFields += childIds;
            }
        }
        var totalIds = '';
        if(childcalId != undefined && childcalId != ''){
            // if(childsunIds == '==' || childsunIds == '!='){
            //     totalIds = childcalId + ' &&  \'' + childIds +'\' '+ childsunIds + ' \'' + rendIds + '\'';
            //}
            // else{
            totalIds = childcalId + ' AND  ' + childIds +' '+ childsunIds + ' ' + rendIds;  
            // }
        } 
        else{
            // if(childsunIds != '==' && childsunIds != '!='){
            totalIds = childIds +' '+ childsunIds + ' ' + rendIds;  
            // }
            //  else{
            //  totalIds = '\''+childIds +'\' '+ childsunIds + ' \'' + rendIds + '\'';
            //  }
            
        }
        document.getElementById('renderedFieldId').value = totalIds
    }
    var calFields = '';	
    function AddcalField(){	
        var childIds = document.getElementById('calIds').value;	
        var childsunIds = document.getElementById('calSumAvgIds').value;	
        var rendIds = document.getElementById('calrenderId').value; 	
        var Ids = document.getElementById('Idvalue').value;	
        var childcalId = document.getElementById('calFieldId').value;	
        
        if(childIds != undefined && childIds != ''){	
            if(calFields.length > 0){	
                calFields += ',' + childIds;	
            }	
            else{	
                calFields += childIds;	
            }	
        }	
        var totalIds = '';	
        if(childcalId != undefined && childcalId != ''){	
            totalIds = childcalId + ' &&  ' + childIds +' '+ childsunIds + ' ' + rendIds;  	
        } 	
        else{	
            totalIds = childIds +' '+ childsunIds + ' ' + rendIds;  	
            
        }	
        document.getElementById('calFieldId').value = totalIds	
    }	
    function AddToCalInner(){	
        var calqueryId = document.getElementById('calFieldId').value;	
        var calrenderId = document.getElementById('calrenderId').value;	
        var CalculatedFieldtext = document.getElementById('CalculatedFieldtext').value 	
        var CalculatedFieldIds = document.getElementById('CalculatedFieldIds').value; 	
        
        getcalInnerFields(calqueryId,CalculatedFieldIds,CalculatedFieldtext);	
        calrenderId = calrenderId.replace('\'','');	
        calrenderId = calrenderId.replace('\'','');	
        var newdocs = CalculatedFieldtext;	
        var TotalIds = ''	
        TotalIds += '<li style="padding-top: 2px;padding-bottom: 2px;">';	
        TotalIds += '<a class="" style="padding:0px;padding-bottom:5px;padding-top:5px;">';	
        TotalIds += '<div style="display:inline-flex;width: 100%;"><div style="width: 88%;">';
        TotalIds += '<label Id="calcopytext'+CalculatedFieldtext+'" ';	
        TotalIds += 'style="font-size: 95%; font-weight: 500;padding:0px;cursor: grab;overflow: hidden;box-sizing: border-box;height:auto;"';
        TotalIds += 'data-title="Label Element" class="slds-text">';	
        TotalIds += newdocs;    	
        TotalIds += '</label>';	
        TotalIds += '<input type="textarea" ID="calholdtext'+CalculatedFieldtext+'" style="display:none;" class="slds-textarea"></input>';	
        TotalIds += '<em style="font-size:11px"><i class="fa fa-files-o" data-title="Copy to clipboard" style="padding-right: 6px;float:right;top:0px" onClick="ClipBoard(\'calcopytext'+CalculatedFieldtext+'\', \'calholdtext'+CalculatedFieldtext+'\',\''+newdocs+'\');"></i></em>';	
        TotalIds += '</div></div>';
        TotalIds += '</a>';	
        TotalIds += '</li>';	
        // TotalIds += '</ul>';	
        $("#CalculatedIds").append(TotalIds);	
        $('#calculatedFIeldsMessage').hide();	
        
        
    }
    function getchildata(){
        document.getElementById('spinners').className = 'slds-spinner_container slds-hide';
        var childName = document.getElementById('childObjName').value; 
        Ids = document.getElementById('Idvalue').value;
        
        var childJson = '{!JSENCODE(ChildInnerClassJson)}';
        
        var javascripts = [];
        if(childJson != '' && childJson != undefined){
            javascripts = JSON.parse(childJson);
            
        }
        document.getElementById('renderedFieldId').value = '';
        $("#container2").children().remove();
        
        for(var i=0;i< javascripts.length ;i++){   
            if( javascripts[i].ChildObject == childName && javascripts[i].sortorder == Ids){
                
                if(javascripts[i].rendercondition != null && javascripts[i].rendercondition != ''){
                    javascripts[i].rendercondition = javascripts[i].rendercondition.split('ssz').join('\'')
                    document.getElementById('renderedFieldId').value = javascripts[i].rendercondition;
                }
                else
                    
                    if(javascripts[i].orderby != null && javascripts[i].orderby != ''){
                        var ordercond = javascripts[i].orderby.split(' ');
                        document.getElementById('OrderByField').value = ordercond[0];
                        document.getElementById('OrderByASC').value = ordercond[1];
                    }
                    else{
                        document.getElementById('OrderByField').value = '';
                        document.getElementById('OrderByASC').value = '';
                    }
                
                var evelist = javascripts[i].FieldNames.split(',');
                var eveLabel = javascripts[i].FieldLabels.split(',');
                
                for(var j= 0;j < evelist.length ;j++){
                    if(evelist[j] != undefined && evelist[j] != ''){
                        movetoright(evelist[j],eveLabel[j]);
                        callmethod = false;
                    }
                }
            }
        }
    }
    function groupgetchildata(){	
        document.getElementById('spinners').className = 'slds-spinner_container slds-hide';	
        var childName = document.getElementById('childObjName').value; 	
        Ids = document.getElementById('Idvalue').value;	
        
        var childJson = '{!JSENCODE(ChildInnerClassJson)}';	
        
        var javascripts = [];	
        if(childJson != '' && childJson != undefined){	
            javascripts = JSON.parse(childJson);	
            
        }	
        //document.getElementById('renderedFieldId').value = '';	
        
        $("#groupcontainer2").children().remove();	
        
        for(var i=0;i< javascripts.length ;i++){   	
            if( javascripts[i].ChildObject == childName && javascripts[i].sortorder == Ids){	
                
                
                if(javascripts[i].orderby != null && javascripts[i].orderby != ''){	
                    var ordercond = javascripts[i].orderby.split(' ');	
                    document.getElementById('groupOrderByField').value = ordercond[0];	
                    document.getElementById('groupOrderByASC').value = ordercond[1];	
                }	
                else{	
                    document.getElementById('groupOrderByField').value = '';	
                    document.getElementById('groupOrderByASC').value = '';	
                }	
                
                if(javascripts[i].GroupBy != undefined){	
                    document.getElementById("groupByField").value = javascripts[i].GroupBy;  	
                }	
                var evelist = javascripts[i].FieldNames.split(',');	
                var eveLabel = javascripts[i].FieldLabels.split(',');	
                
                for(var j= 0;j < evelist.length ;j++){	
                    if(evelist[j] != undefined && evelist[j] != ''){	
                        groupmovetoright(evelist[j],eveLabel[j]);	
                        callmethod = false;	
                    }	
                }	
            }	
        }	
    }	       	
    function querygetchildata(){	
        document.getElementById('spinners').className = 'slds-spinner_container slds-hide';	
        var childName = document.getElementById('childObjName').value; 	
        Ids = document.getElementById('Idvalue').value;	
        
        var childJson = '{!JSENCODE(ChildInnerClassJson)}';	
        
        var javascripts = [];	
        if(childJson != '' && childJson != undefined){	
            javascripts = JSON.parse(childJson);              	
        }	
        //document.getElementById('renderedFieldId').value = '';                	
        for(var i=0;i< javascripts.length ;i++){   	
            if( javascripts[i].ChildObject == childName && javascripts[i].sortorder == Ids){	
                document.getElementById('AggregateQueryId').value = javascripts[i].aggregatequery;  	
            }         	
        }	
    }	
    function ShowpChildPop(childName,event){
        var Ids = event.target.parentElement.id; 
        document.getElementById('renderedFieldId').value = '';
        document.getElementById('childObjName').value = childName;
        var childJson = '{!JSENCODE(ChildInnerClassJson)}';
        var javascripts = [];
        if(childJson != '' && childJson != undefined){
            javascripts = JSON.parse(childJson);
        }
        //var scripts = JSON.parse(javascripts)
        var testbool = true;
        if(Ids != ''){
            document.getElementById('spinners').className = 'slds-spinner_container slds-show';
            
            if(Ids.includes('parentsvalue')){
                Ids = Ids.replace('parentsvalue',''); 
                var sortorderIdlist ='';
                $(".order-list").each(function (){
                    if($(this).closest('div').children().children().attr('id') != undefined){
                        if($(this).closest('div').children().children().attr('id').includes('parentsvalue')){
                            var newoldIds = $(this).closest('div').children().children().attr('id').replace('parentsvalue','');
                            
                            if($(this).attr('id') != newoldIds && Ids == newoldIds){
                                Ids = $(this).attr('id');   
                                document.getElementById('oldIdvalue').value = newoldIds;
                                // var newparse = String($('#'+$(this).attr('id')).html());
                                
                                // newparse = newparse.split(newoldIds+'"').join(Ids+'"');
                                
                                // $('#'+$(this).attr('id')).html(newparse);
                                //  var invoices = document.getElementById("invoiceId").innerHTML; 
                                // CopyLineItems(Ids,newoldIds,invoices);
                                // setTimeout(function(){
                                //getchildObjectFields(childName,Ids);
                                //},3000);  
                                // testbool = false;
                            }
                            
                            sortorderIdlist += $(this).attr('id') + ',';
                        }
                    }       
                });
                
                if(sortorderIdlist != ''){
                    //deleteTables(sortorderIdlist);  
                }
            }
            //if(testbool == true){
            getchildObjectFields(childName,Ids);
            // }
            // }
            document.getElementById('Idvalue').value = Ids;
            $("#childFieldlabelBox").show();
            boxDragdrop (); 
        }
    }
    function groupShowpChildPop(childName,event){	
        var Ids = event.target.parentElement.id; 	
        document.getElementById('renderedFieldId').value = '';	
        document.getElementById('childObjName').value = childName;	
        var childJson = '{!JSENCODE(ChildInnerClassJson)}';	
        var javascripts = [];	
        if(childJson != '' && childJson != undefined){	
            javascripts = JSON.parse(childJson);	
        }	
        
        //var scripts = JSON.parse(javascripts)	
        var testbool = true;	
        if(Ids != ''){	
            document.getElementById('spinners').className = 'slds-spinner_container slds-show';	
            
            if(Ids.includes('parentsvalue')){	
                Ids = Ids.replace('parentsvalue',''); 	
                var sortorderIdlist ='';	
                $(".order-list").each(function (){	
                    if($(this).closest('div').children().children().attr('id') != undefined){	
                        if($(this).closest('div').children().children().attr('id').includes('parentsvalue')){	
                            var newoldIds = $(this).closest('div').children().children().attr('id').replace('parentsvalue','');	
                            
                            if($(this).attr('id') != newoldIds && Ids == newoldIds){	
                                Ids = $(this).attr('id');   	
                                document.getElementById('oldIdvalue').value = newoldIds;	
                                // var newparse = String($('#'+$(this).attr('id')).html());	
                                
                                // newparse = newparse.split(newoldIds+'"').join(Ids+'"');	
                                
                                // $('#'+$(this).attr('id')).html(newparse);	
                                //  var invoices = document.getElementById("invoiceId").innerHTML; 	
                                // CopyLineItems(Ids,newoldIds,invoices);	
                                // setTimeout(function(){	
                                //getchildObjectFields(childName,Ids);	
                                //},3000);  	
                                // testbool = false;	
                            }	
                            
                            sortorderIdlist += $(this).attr('id') + ',';	
                        }	
                    }       	
                });	
                
                if(sortorderIdlist != ''){	
                    //deleteTables(sortorderIdlist);  	
                }	
            }	
            //if(testbool == true){	
            groupgetchildObjectFields(childName,Ids);	
            // }	
            // }	
            document.getElementById('Idvalue').value = Ids;	
            $("#groupchildFieldlabelBox").show();	
            boxDragdrop (); 	
        }	
    }	       	
    function queryShowpChildPop(childName,event){	
        var Ids = event.target.parentElement.id; 	
        document.getElementById('renderedFieldId').value = '';	
        document.getElementById('childObjName').value = childName;	
        var childJson = '{!JSENCODE(ChildInnerClassJson)}';	
        var javascripts = [];	
        if(childJson != '' && childJson != undefined){	
            javascripts = JSON.parse(childJson);	
        }	
        
        //var scripts = JSON.parse(javascripts)	
        var testbool = true;	
        if(Ids != ''){	
            document.getElementById('spinners').className = 'slds-spinner_container slds-show';	
            
            if(Ids.includes('parentsvalue')){	
                Ids = Ids.replace('parentsvalue',''); 	
                var sortorderIdlist ='';	
                $(".order-list").each(function (){	
                    if($(this).closest('div').children().children().attr('id') != undefined){	
                        if($(this).closest('div').children().children().attr('id').includes('parentsvalue')){	
                            var newoldIds = $(this).closest('div').children().children().attr('id').replace('parentsvalue','');	
                            
                            if($(this).attr('id') != newoldIds && Ids == newoldIds){	
                                Ids = $(this).attr('id');   	
                                document.getElementById('oldIdvalue').value = newoldIds;	
                                
                            }	
                            
                            sortorderIdlist += $(this).attr('id') + ',';	
                        }	
                    }       	
                });	
                
            }	
            document.getElementById('Idvalue').value = Ids;	
            querygetchildObjectFields(childName,Ids);	
            $("#querychildFieldlabelBox").show();	
            boxDragdrop (); 	
        }	
    }	
    
    </script>
    <style>
        @media (min-height:790px) and (max-height:900px){
        .customClass {
        height: 42rem !important;
        position: relative;
        bottom: -1rem;
        }
        }
        @media (min-height:690px) and (max-height:790px){
        .customClass {
        height: 42rem !important;
        position: relative;
        bottom: -1rem;
        }
        }
        @media (min-height:590px) and (max-height:690px){
        .customClass {
        height: 42rem !important;
        position: relative;
        bottom: -1rem;
        }
        }
        @media (min-height:490px) and (max-height:590px){
        .customClass {
        height: 34rem !important;
        position: relative;
        bottom: -1rem;
        }
        }
        @media (min-height:390px) and (max-height:490px){
        .customClass {
        height: 32rem !important;
        position: relative;
        bottom: -1rem;
        }
        }
        @media (min-height:290px) and (max-height:390px){
        .customClass {
        height: 28rem !important;
        position: relative;
        bottom: -1rem;
        }
        }
        /*  .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default {
        display:none;
        }
        @media (min-width:400px) { 
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }   
        @media (min-width:500px) { 
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }   
        @media (min-width:600px) { 
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }   
        @media (min-width:700px) { 
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }   
        
        @media only screen and (min-width: 800px) {
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }
        @media only screen and (min-width: 900px) {
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }
        @media only screen and (min-width: 1000px) {
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }
        @media only screen and (min-width: 1100px) {
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }
        @media only screen and (min-width: 1200px) {
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }
        @media only screen and (min-width: 1400px) {
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }
        @media only screen and (min-width: 1500px) {
        .ui-widget-content { 
        height:480px !important;  
        }
        .groupmedia{
        height:500px !important;  
        }
        }*/
    </style>
    <script language="JavaScript">
    function TapCopy(Value){
        //alert('Value---->'+Value);
        document.getElementById('FieldValue').innerHTML = Value;
        
        //alert(document.getElementById('FieldValue').innerHTML);
    }
    function TapCopy2(Value){
        //alert('Value---->'+Value);
        document.getElementById('FieldValue2').innerHTML = Value;
        
        //alert(document.getElementById('FieldValue').innerHTML);
    }
    function ClipBoards(){
        copyToClipboard(document.getElementById('FieldValue').innerHTML);
    }
    function ClipBoards2(){
        copyToClipboard(document.getElementById('FieldValue2').innerHTML);
    }
    function ClipBoard(copytextid, holdtextid, Value){
        copyToClipboard(Value);
    }
    function copyToClipboard(Value) {
        // Create an auxiliary hidden input
        var aux = document.createElement("input");
        // Get the text from the element passed into the input
        var elements = Value.trim();
        aux.setAttribute("value", elements);
        // Append the aux input to the body
        document.body.appendChild(aux);
        // Highlight the content
        aux.select();
        // Execute the copy command
        document.execCommand("copy");
        // Remove the input from the body
        document.body.removeChild(aux);
        
        document.getElementById('clipboardId').style.display = "block";
        setTimeout(function(){
            document.getElementById('clipboardId').style.display = "none";
        },1000)
    }  
    
    function SaveEmailcontainer(actionname){  
        document.getElementById('spinner').className = 'slds-spinner_container slds-show';
        var docname = document.getElementById('pageId:formId:EmailTemplateId').value
        var Emailname = document.getElementById('pageId:formId:EmailSubjectId').value
        $('.bottom-page-number').css('font-size','2px');
        $('.bottom-page-number').css('top','20px');
        if(docname != '' && Emailname != ''){
            var childJson = '{!JSENCODE(ChildInnerClassJson)}';
            var childNewJson = '';
            if(childJson != '' && childJson != undefined){
                var jsonpasrse = JSON.parse(childJson);
                for(var i = 0;i < jsonpasrse.length;i++){
                    var color1 = '';
                    var color2 = '';
                    var border = '';
                    document.getElementById(jsonpasrse[i].sortorder).style.border= "none";
                    if(document.getElementById('td'+ jsonpasrse[i].sortorder) != undefined){
                        jsonpasrse[i].border = document.getElementById('td'+ + jsonpasrse[i].sortorder).style.border;
                    }
                    if(document.getElementById('1tr'+ + jsonpasrse[i].sortorder) != undefined){
                        jsonpasrse[i].color1 = document.getElementById('1tr'+ + jsonpasrse[i].sortorder).style.backgroundColor;
                        document.getElementById('1tr'+ + jsonpasrse[i].sortorder).style.display = "none";
                    }
                    if(document.getElementById('2tr'+ + jsonpasrse[i].sortorder) != undefined){
                        jsonpasrse[i].color2 = document.getElementById('2tr'+ + jsonpasrse[i].sortorder).style.backgroundColor;
                        document.getElementById('2tr'+ + jsonpasrse[i].sortorder).style.display = "none";
                    } 
                }
                childNewJson = JSON.stringify(jsonpasrse);
            }
            $(".order-list").each(function (){
                if($(this).attr('id') != undefined){
                    document.getElementById($(this).attr('id')).style.height = "auto";
                    document.getElementById($(this).attr('id')).style.minHeight = "auto";
                    if($(this).closest('div').children().children().attr('id') != undefined){
                        
                        if($(this).closest('div').children().children().attr('id').includes('parentsvalue')){
                            document.getElementById($(this).attr('id')).style.border= "none";
                            
                        }
                    }   
                }
                
            });
            
            var htmls = '';
            $(".invoice-container").each(function (){
                htmls += $(this).children("#content_area").html() + 'seperatedocs'; 
                
            });
            
            console.log(htmls+'htmls')
            
            if(childJson != '' && childJson != undefined){
                for(var i = 0;i < jsonpasrse.length;i++){
                    if(document.getElementById('1tr'+ + jsonpasrse[i].sortorder) != undefined){
                        document.getElementById('1tr'+ + jsonpasrse[i].sortorder).style.display = "table-row";
                    }
                    if(document.getElementById('2tr'+ + jsonpasrse[i].sortorder) != undefined){
                        document.getElementById('2tr'+ + jsonpasrse[i].sortorder).style.display = "table-row";
                    } 
                }
            }
            $(".paragraph-element").each(function (){
                
                if($(this).attr('id') != undefined){
                    var heights = parseInt(document.getElementById($(this).attr('id')).style.minHeight.replace('px',''));
                    var padings = parseInt(document.getElementById($(this).attr('id')).style.padding.replace('px',''))*2;
                    var widths = parseInt(document.getElementById($(this).attr('id')).style.width.replace('px',''));
                    
                    if(padings >= 0){
                        var minheights = heights - padings;
                        var minwidths = widths - padings;
                        document.getElementById($(this).attr('id')).style.minHeight = minheights + 'px'  ;
                        document.getElementById($(this).attr('id')).style.width = minwidths + 'px'  ;
                    }
                }
            });
            $(".label-element").each(function (){
                if($(this).attr('id') != undefined){
                    var heights = parseInt(document.getElementById($(this).attr('id')).style.minHeight.replace('px',''));
                    var padings = parseInt(document.getElementById($(this).attr('id')).style.padding.replace('px',''))*2;
                    var widths = parseInt(document.getElementById($(this).attr('id')).style.width.replace('px',''));
                    
                    if(padings >= 0){
                        var minheights = heights - padings;
                        var minwidths = widths - padings;
                        document.getElementById($(this).attr('id')).style.minHeight = minheights + 'px'  ;
                        document.getElementById($(this).attr('id')).style.width = minwidths + 'px'  ;
                    }
                }
            });
            document.getElementById('EmailErrorId').style.display = "none";
            document.getElementById('EmailsubjectErrorId').style.display = "none";
            $('.bottom-page-number').css('font-size','12px');
            $('.bottom-page-number').css('top','0px');  
            var Calculate = calIds
            var pageSize ='' // document.getElementById('ddlPageSize').value;
            saveEmailDataString(htmls,actionname,childNewJson,pageSize,Calculate,document.getElementById('Height-Property').value); 
            $(".paragraph-element").each(function (){
                if($(this).attr('id') != undefined){
                    var heights = parseInt(document.getElementById($(this).attr('id')).style.minHeight.replace('px',''));
                    var padings = parseInt(document.getElementById($(this).attr('id')).style.padding.replace('px',''))*2;
                    var widths = parseInt(document.getElementById($(this).attr('id')).style.width.replace('px',''));    
                    if(padings >= 0){
                        var minheights = heights + padings;
                        var minwidths = widths + padings;
                        document.getElementById($(this).attr('id')).style.minHeight = minheights + 'px'  ;
                        document.getElementById($(this).attr('id')).style.width = minwidths + 'px'  ;
                    }
                }
            });
            $(".label-element").each(function (){
                if($(this).attr('id') != undefined){
                    var heights = parseInt(document.getElementById($(this).attr('id')).style.minHeight.replace('px',''));
                    var padings = parseInt(document.getElementById($(this).attr('id')).style.padding.replace('px',''))*2;
                    var widths = parseInt(document.getElementById($(this).attr('id')).style.width.replace('px',''));    
                    if(padings >= 0){
                        var minheights = heights + padings;
                        var minwidths = widths + padings;
                        document.getElementById($(this).attr('id')).style.minHeight = minheights + 'px'  ;
                        document.getElementById($(this).attr('id')).style.width = minwidths + 'px'  ;
                    }
                }
            });
            var htmls = document.getElementById("invoiceId").innerHTML; 
            
            $("#txtArea").css("display", "block");
            $("#txtArea").val(htmls)
            $('.btn-add-page').click();
            $("#txtArea").css("display", "none");
            
        }
        else{
            if(docname == ''){
                document.getElementById('EmailErrorId').style.display = "block";
            }
            if(Emailname == ''){
                document.getElementById('EmailsubjectErrorId').style.display = "block";
            }
            
        }
    }
    
    function Savecontainer(actionname){  
        document.getElementById('spinner').className = 'slds-spinner_container slds-show';
        var docname = document.getElementById('pageId:formId:DocTemplateId').value
        //  var checkHeaderhtmls = document.getElementById("content_area_header").innerHTML;
        //  var checkFooterhtmls = document.getElementById("content_area_footer").innerHTML;
        var checkHeader = false;
        var checkFooter = false;
        if(checkHeaderhtmls.trim() != ''){
            var Headerdocname = document.getElementById('pageId:formId:HeaderNameId').value
            if(Headerdocname == '' || Headerdocname == undefined){
                checkHeader = true;
            }
        }
        if(checkFooterhtmls.trim() != ''){
            var Footerdocname = document.getElementById('pageId:formId:FooterNameId').value
            if(Footerdocname == '' || Footerdocname == undefined){
                checkFooter = true;
            }
        }
        
        
        //  alert(document.getElementById('ddlPageSize').value);
        var pageSize = '' //document.getElementById('ddlPageSize').value;
        if((docname != '' && checkHeader == false && checkFooter == false)  || (actionname != 'saveas')){
            
            var childJson = '{!JSENCODE(ChildInnerClassJson)}';
            var childNewJson = '';
            var jsonpasrse ;
            if(childJson != '' && childJson != undefined){
                jsonpasrse = JSON.parse(childJson);
                
                
                $('.bottom-page-number').css('font-size','1px');
                $('.bottom-page-number').css('top','20px');
                $(".sec-div").each(function () {
                    for(var i = 0;i < jsonpasrse.length;i++){
                        if($(this).attr('id') != undefined){
                            document.getElementById($(this).attr('id')).style.height = "auto";
                            document.getElementById($(this).attr('id')).style.minHeight = "auto";
                            
                        }
                        if($(this).children("#"+jsonpasrse[i].sortorder).attr('id') != undefined || $(this).children("#NewIds").attr('id') != undefined){
                            
                            var divsecs = $(this).attr('id');
                            
                            var divsec = '';
                            
                            if($(this).children("#NewIds").attr('id') == undefined){
                                divsec = $('#'+divsecs).html();
                            }
                            else{
                                if($(this).children("#NewIds").children("#"+jsonpasrse[i].sortorder).attr('id') == jsonpasrse[i].sortorder){
                                    divsec = $(this).children("#NewIds").html();
                                }
                            }
                            if(divsec != ''){
                                var renderedFieldIds = jsonpasrse[i].rendercondition;                     
                                var thmltabl = '';
                                if(renderedFieldIds != null && renderedFieldIds != undefined && renderedFieldIds != ''){
                                    thmltabl += '<div id="NewIds" style="{{IF( '+renderedFieldIds+',\'display:block\',\'display:none\')}">';
                                }
                                else{
                                    thmltabl += '<div id="NewIds">';
                                }
                                thmltabl += divsec;
                                thmltabl += '</div>';
                                $('#'+divsecs).html(thmltabl);
                            }
                        }
                    }
                });
                for(var i = 0;i < jsonpasrse.length;i++){
                    var color1 = '';
                    var color2 = '';
                    var border = '';
                    if(document.getElementById(jsonpasrse[i].sortorder) != undefined){
                        document.getElementById(jsonpasrse[i].sortorder).style.height= "auto";
                    }
                    if(document.getElementById('td'+ jsonpasrse[i].sortorder) != undefined){
                        jsonpasrse[i].border = document.getElementById('td'+ + jsonpasrse[i].sortorder).style.border;
                    }
                    if(document.getElementById('th'+ jsonpasrse[i].sortorder) != undefined){
                        jsonpasrse[i].height = document.getElementById('th'+ + jsonpasrse[i].sortorder).style.height;
                    }
                    if(document.getElementById('1tr'+ + jsonpasrse[i].sortorder) != undefined){
                        jsonpasrse[i].color1 = document.getElementById('1tr'+ + jsonpasrse[i].sortorder).style.backgroundColor;
                        document.getElementById('1tr'+ + jsonpasrse[i].sortorder).style.display = "none";
                    }
                    if(document.getElementById('2tr'+ + jsonpasrse[i].sortorder) != undefined){
                        jsonpasrse[i].color2 = document.getElementById('2tr'+ + jsonpasrse[i].sortorder).style.backgroundColor;
                        document.getElementById('2tr'+ + jsonpasrse[i].sortorder).style.display = "none";
                    } 
                }
                var childNewJson = JSON.stringify(jsonpasrse);
            }
            $(".paragraph-element").each(function (){
                if($(this).attr('id') != undefined){
                    var heights = parseInt(document.getElementById($(this).attr('id')).style.minHeight.replace('px',''));
                    var padings = parseInt(document.getElementById($(this).attr('id')).style.padding.replace('px',''))*2;
                    var widths = parseInt(document.getElementById($(this).attr('id')).style.width.replace('px',''));
                    
                    if(padings >= 0){
                        var minheights = heights - padings;
                        var minwidths = widths - padings;
                        document.getElementById($(this).attr('id')).style.minHeight = minheights + 'px'  ;
                        document.getElementById($(this).attr('id')).style.width = minwidths + 'px'  ;
                    }
                }
            });
            $(".label-element").each(function (){
                if($(this).attr('id') != undefined){
                    var heights = parseInt(document.getElementById($(this).attr('id')).style.minHeight.replace('px',''));
                    var padings = parseInt(document.getElementById($(this).attr('id')).style.padding.replace('px',''))*2;
                    var widths = parseInt(document.getElementById($(this).attr('id')).style.width.replace('px',''));
                    
                    if(padings >= 0){
                        var minheights = heights - padings;
                        var minwidths = widths - padings;
                        document.getElementById($(this).attr('id')).style.minHeight = minheights + 'px'  ;
                        document.getElementById($(this).attr('id')).style.width = minwidths + 'px'  ;
                    }
                }
            });
            $(".order-list").each(function (){
                
                if($(this).attr('id') != undefined){
                    document.getElementById($(this).attr('id')).style.height = "auto";
                    document.getElementById($(this).attr('id')).style.minHeight = "auto";
                    document.getElementById($(this).attr('id')).style.pageBreakAfter = "always";
                    document.getElementById($(this).attr('id')).style.pageBreakInside = "auto";
                    if($(this).closest('div').children().children().attr('id') != undefined){
                        
                        if($(this).closest('div').children().children().attr('id').includes('parentsvalue')){
                            document.getElementById($(this).attr('id')).style.border= "none";
                            
                        }
                    }   
                    
                }
            });
            var htmls = '';
            $(".invoice-container").each(function (){
                htmls += $(this).children("#content_area").html() + 'seperatedocs'; 
                
            });
            
            var Headerhtmls = document.getElementById("content_area_header").innerHTML;
            var Footerhtmls = document.getElementById("content_area_footer").innerHTML;
            if(childJson != '' && childJson != undefined){
                for(var i = 0;i < jsonpasrse.length;i++){
                    if(document.getElementById('1tr'+ + jsonpasrse[i].sortorder) != undefined){
                        document.getElementById('1tr'+ + jsonpasrse[i].sortorder).style.display = "table-row";
                    }
                    if(document.getElementById('2tr'+ + jsonpasrse[i].sortorder) != undefined){
                        document.getElementById('2tr'+ + jsonpasrse[i].sortorder).style.display = "table-row";
                    } 
                }
            }
            $(".paragraph-element").each(function (){
                if($(this).attr('id') != undefined){
                    var heights = parseInt(document.getElementById($(this).attr('id')).style.minHeight.replace('px',''));
                    var padings = parseInt(document.getElementById($(this).attr('id')).style.padding.replace('px',''))*2;
                    
                    var widths = parseInt(document.getElementById($(this).attr('id')).style.width.replace('px',''));
                    
                    if(padings >= 0){
                        var minheights = heights + padings;
                        var minwidths = widths + padings;
                        document.getElementById($(this).attr('id')).style.minHeight = minheights + 'px'  ;
                        document.getElementById($(this).attr('id')).style.width = minwidths + 'px'  ;
                    }
                }
            });
            $(".label-element").each(function (){
                if($(this).attr('id') != undefined){
                    var heights = parseInt(document.getElementById($(this).attr('id')).style.minHeight.replace('px',''));
                    var padings = parseInt(document.getElementById($(this).attr('id')).style.padding.replace('px',''))*2;
                    var widths = parseInt(document.getElementById($(this).attr('id')).style.width.replace('px',''));
                    
                    if(padings >= 0){
                        var minheights = heights + padings;
                        var minwidths = widths + padings;
                        document.getElementById($(this).attr('id')).style.minHeight = minheights + 'px'  ;
                        document.getElementById($(this).attr('id')).style.width = minwidths + 'px'  ;
                    }
                }
            });
            //$('.bottom-page-number').css('display','block');
            $('.bottom-page-number').css('font-size','12px');
            $('.bottom-page-number').css('top','0px');
            var invoices = document.getElementById("invoiceId").innerHTML; 
            document.getElementById('ErrorId').style.display = "none";
            document.getElementById('HeaderErrorId').style.display = "none";
            document.getElementById('FooterErrorId').style.display = "none";
            var Calculate = calIds
            saveDataString(htmls,actionname,childNewJson,Headerhtmls,Footerhtmls,invoices,pageSize,Calculate); 
            
        }
        else if(docname == ''){
            document.getElementById('spinner').className = 'slds-spinner_container slds-hide';
            document.getElementById('ErrorId').style.display = "block";
            document.getElementById('HeaderErrorId').style.display = "none";
            document.getElementById('FooterErrorId').style.display = "none";
        }
            else if(checkHeader == true){
                document.getElementById('spinner').className = 'slds-spinner_container slds-hide';
                document.getElementById('HeaderErrorId').style.display = "block";
                document.getElementById('ErrorId').style.display = "none";
                document.getElementById('FooterErrorId').style.display = "none";
            }
                else if(checkFooter == true){
                    document.getElementById('spinner').className = 'slds-spinner_container slds-hide';
                    document.getElementById('FooterErrorId').style.display = "block";
                    document.getElementById('HeaderErrorId').style.display = "none";
                    document.getElementById('ErrorId').style.display = "none";
                }
    }
    var Counts = 1;
    function RemoveCalculation(countId){
        $("#Calcontainer1").children('#'+countId).remove();
    }
    function AddCalculation(){
        
        var divs = '<div class="box-item" style="display:inline-flex" id="cnt'+Counts+'">';
        divs += '<textarea id="CalculatedFieldId" rows="2" cols="50" class="slds-input slds-textarea" style="height:auto"></textarea><i style="padding-left:10px;padding-top:30px" class="fa fa-times" onclick="RemoveCalculation(\'cnt'+Counts+'\')"></i>';
        divs += '<div>';
        $("#Calcontainer1").append(divs);
        Counts = Counts+1;
        
    }
    function loadscripts(){
        
        $( document ).ready(function() {  
            $("#txtArea").css("display", "block");
            $('.btn-add-page').click();
            
            $("#txtArea").css("display", "none");
        });
    }
    $( document ).ready(function() {  
        
        $(".btn-clone").click(function(){
            setTimeout(function(){
                $(".order-list").each(function (){
                    if($(this).closest('div').children().children().attr('id') != undefined){
                        if($(this).closest('div').children().children().attr('id').includes('parentsvalue')){
                            var newoldIds = $(this).closest('div').children().children().attr('id').replace('parentsvalue','');
                            if($(this).attr('id') != newoldIds){
                                Ids = $(this).attr('id');
                                document.getElementById('oldIdvalue').value = newoldIds;
                                var newparse = String($('#'+$(this).attr('id')).html());
                                
                                newparse = newparse.split(newoldIds+'"').join(Ids+'"');
                                
                                $('#'+$(this).attr('id')).html(newparse);
                                var invoices = document.getElementById("invoiceId").innerHTML; 
                                CopyLineItems(Ids,newoldIds,invoices);
                            }
                        }
                    }       
                });
            },200);
        });       
        $(".btn-delete").click(function(){  
            setTimeout(function(){
                var sortorderIdlist ='';
                $(".order-list").each(function (){
                    
                    if($(this).closest('div').children().children().attr('id') != undefined){
                        if($(this).closest('div').children().children().attr('id').includes('parentsvalue')){
                            var newoldIds = $(this).closest('div').children().children().attr('id').replace('parentsvalue','');
                            sortorderIdlist += $(this).attr('id') + ',';
                            
                        }
                    }       
                });
                deleteTables(sortorderIdlist);
            },00);
        });
        $(".btn-Close").click(function(){
            //alert('inn');
            document.getElementById('property_blocks').style.display = "none";
            var children = document.getElementById('content_area').childNodes;
            for (var i = 0; i < children.length; i++) {
                if (children[i].classList) {
                    children[i].classList.remove('blur')
                }
            }
            
            //alert('inn');
        });
        
        $(".element_section").click(function(){
            //alert('inn');
            document.getElementById('property_blocks').style.display = "none";
            
        });
        
        
        
        
        $(".order-list").click(function(){
            
            $(".Td").css("display", "none !important");
        });
        
        
        
        $(".order-list").click(function(){
            var test= $(this).attr('id');  
            
            document.getElementById("hiderow").style.display = "block";
            document.getElementById("hidecol").style.display = "block";
            setTimeout(function(){
                $(".order-list").each(function (){
                    
                    if($(this).closest('div').children().children().attr('id') != undefined){
                        
                        if($(this).closest('div').children().children().attr('id').includes('parentsvalue') && test == $(this).attr('id') ){
                            document.getElementById("hiderow").style.display = "none";
                            document.getElementById("hidecol").style.display = "none";
                        }
                    }       
                });
            },200);
        }); 
    });
    
    function loadToggle(){
        setTimeout(function(){
            $('.parenttoggle').toggle().show();
            var children = document.getElementById('content_area').childNodes;
            for (var i = 0; i < children.length; i++) {
                if (children[i].classList) {
                    children[i].classList.remove('blur')
                }
            } 
            document.getElementById('backgroundColor').value = '#ffffff';
        },1000);
    }
    </script>   
</apex:outputpanel>
<script> loadToggle()</script>
</body>

</html>
</apex:form>
</apex:page>